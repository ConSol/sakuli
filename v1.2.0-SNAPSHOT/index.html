<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<meta name="author" content="The Sakuli Team">
<title>Sakuli E2E testing and -monitoring</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<!--
  ~ Sakuli - Testing and Monitoring-Tool for Websites and common UIs.
  ~
  ~ Copyright 2013 - 2017 the original author or authors.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!-- Change some CSS. -->

<style>

    h1, h2, h3, h4, h5, h6, #toctitle {
        color: #3583bd;
        font-weight: 500;
    }

    h5 {
        font-size: 1.35em;
    }

    h6 {
        font-size: 1.2em;
    }

    h7:before {
        content: "⮊ ";
    }

    h7 {
        color: #3583bd;
        font-weight: 400;
        font-style: normal;
        font-size: 1.1em;
        display: block;
        padding-bottom: 0.5em;
    }

    .paragraph > .title {
        color: #3583bd;
        font-style: normal;
    }

    .videoblock > .title {
        color: #3583bd;
        font-style: normal;
    }

    div#toctitle {
        content: url("images/sakuli_logo_smaller.png");
    }

    #preamble > div > div:nth-child(1) > p > strong {
        font-size: small;
        font-weight: normal;
    }

    #header > h1:first-child {
        margin-bottom: 1em;
    }

    #git-edit-section {
        font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
        display: inline-block;
        color: rgba(0, 0, 0, .8);
        font-size: .65em;
        font-weight: bold;
        line-height: 1.45;
        border: 1px solid #ccc;
        -webkit-border-radius: 3px;
        border-radius: 3px;
        -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
        box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
        margin: 0 .15em;
        vertical-align: middle;
        position: relative;
        top: -.1em;
        white-space: nowrap;
        /*my stuff*/
        padding: 10px 20px 0 50px;
        margin-bottom: 1.5em;
        background: url(images/github-logo.png) no-repeat;
        background-color: rgba(0, 0, 0, 0.02);
    }

</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Sakuli E2E testing and -monitoring</h1>
<div class="details">
<span id="author" class="author">The Sakuli Team</span><br>
<span id="email" class="email"><a href="mailto:sakuli@consol.de">sakuli@consol.de</a></span><br>
<span id="revnumber">version v1.2.0-SNAPSHOT,</span>
<span id="revdate">14.06.2018 @ 12:06:55 CEST</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Sakuli E2E</div>
<ul class="sectlevel1">
<li><a href="#_general">General</a>
<ul class="sectlevel2">
<li><a href="#contributors">Contributors</a></li>
<li><a href="#supporters">Valued supporters</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#_branches_build_status">Branches &amp; build status</a></li>
<li><a href="#why-sakuli">Why Sakuli?</a></li>
<li><a href="#key-features">Key Features</a></li>
<li><a href="#concept">Concept</a></li>
</ul>
</li>
<li><a href="#manual">1. Manual</a>
<ul class="sectlevel2">
<li><a href="#_introduction">1.1. Introduction</a></li>
<li><a href="#execution-types">1.2. Execution Types</a>
<ul class="sectlevel3">
<li><a href="#native-execution">1.2.1. Native Execution</a>
<ul class="sectlevel4">
<li><a href="#windows">1.2.1.1. Windows Client</a>
<ul class="sectlevel5">
<li><a href="#_installation">Installation</a></li>
<li><a href="#_additional_documentation">Additional documentation:</a></li>
<li><a href="#_optional_software">Optional software</a></li>
<li><a href="#_next_steps">Next steps</a></li>
<li><a href="#rdp-peculiarities">RDP peculiarities</a></li>
<li><a href="#windows-troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li><a href="#linux">1.2.1.2. Linux Client</a>
<ul class="sectlevel5">
<li><a href="#_installation_2">Installation</a></li>
<li><a href="#_additional_documentation_2">Additional documentation</a></li>
<li><a href="#_optional_software_2">Optional software</a></li>
<li><a href="#_next_steps_2">Next steps</a></li>
<li><a href="#_headless_checks">Headless checks</a></li>
<li><a href="#linux-troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li><a href="#upgrade_process">1.2.1.3. Upgrade process</a></li>
</ul>
</li>
<li><a href="#maven-execution">1.2.2. Maven Execution</a>
<ul class="sectlevel4">
<li><a href="#sakuli-java-dsl">1.2.2.1. Sakuli Java DSL</a>
<ul class="sectlevel5">
<li><a href="#_installation_3">Installation</a></li>
<li><a href="#_usage">Usage</a></li>
<li><a href="#_sakuli_java_example">Sakuli Java Example</a></li>
<li><a href="#java-dsl-https">HTTPS-Sites</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#containerized-execution">1.2.3. Containerized Execution</a>
<ul class="sectlevel4">
<li><a href="#docker-images">1.2.3.1. Sakuli Docker Images</a>
<ul class="sectlevel5">
<li><a href="#docker-image-os-types">Image OS types</a></li>
<li><a href="#docker-image-tags">Image tags</a></li>
<li><a href="#docker-image-architecture">Architecture of Sakuli Containers</a></li>
<li><a href="#docker-images-get-images">Get Sakuli Docker Images</a></li>
<li><a href="#docker-javascript-based-test">Run JavaScript based Test</a></li>
<li><a href="#docker-java-based-test">Run Java based test</a></li>
<li><a href="#docker-extend-a-image">Extend a Sakuli Image with your own software</a></li>
<li><a href="#_change_user_of_running_sakuli_container">Change User of running Sakuli Container</a></li>
<li><a href="#docker-vnc-env-variables">Override VNC environment variables</a></li>
<li><a href="#_create_screenhots_for_sakuli_tests">Create Screenhots for Sakuli tests</a></li>
<li><a href="#_view_only_vnc">View only VNC</a></li>
<li><a href="#docker-https-sahi">Writing HTTPS Sahi web tests</a></li>
<li><a href="#docker-images-known-issues">Known Issues</a></li>
<li><a href="#docker-further-information">Further Information</a></li>
</ul>
</li>
<li><a href="#docker-compose">1.2.3.2. Docker Compose</a>
<ul class="sectlevel5">
<li><a href="#docker-compose-javascripte-based-test">Run JavaScript based test</a></li>
<li><a href="#docker-compose-java-based-test">Run Java based test</a></li>
</ul>
</li>
<li><a href="#kubernetes">1.2.3.3. Kubernetes</a>
<ul class="sectlevel5">
<li><a href="#kubernetes-start-pod">Start execution pod</a></li>
<li><a href="#kubernetes-job-config">Job Config</a></li>
<li><a href="#kubernetes-delete-pod">Delete execution pod</a></li>
</ul>
</li>
<li><a href="#openshift">1.2.3.4. OpenShift</a>
<ul class="sectlevel5">
<li><a href="#openshift-run-image">Run image from Dockerhub</a></li>
<li><a href="#_build_run_your_own_image">Build &amp; run your own image</a></li>
<li><a href="#_run_git_based_tests">Run git based tests</a></li>
<li><a href="#_job_config">Job Config</a></li>
<li><a href="#openshift-s2i">OpenShift source to image (S2I)</a></li>
<li><a href="#_other_useful_commands">Other useful commands</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#sakuli-ui">1.3. Sakuli UI</a>
<ul class="sectlevel3">
<li><a href="#sakuli-ui-local">1.3.1. Local execution</a></li>
<li><a href="#sakuli-ui-containerized">1.3.2. Containerized execution</a></li>
<li><a href="#sakuli-ui-configuration">1.3.3. Sakuli UI Configuration</a></li>
</ul>
</li>
<li><a href="#sakuli-testdefintion">1.4. Sakuli Testdefinition</a>
<ul class="sectlevel3">
<li><a href="#sakuli-api">1.4.1. Sakuli API</a>
<ul class="sectlevel5">
<li><a href="#sakuli-api-index">Index</a></li>
<li><a href="#Sahi-API">1.4.1.2. Sahi-API</a></li>
<li><a href="#TestCase">1.4.1.3. TestCase</a></li>
<li><a href="#Application">1.4.1.4. Application</a></li>
<li><a href="#Environment">1.4.1.5. Environment</a></li>
<li><a href="#Key">1.4.1.6. Key</a></li>
<li><a href="#Logger">1.4.1.7. Logger</a></li>
<li><a href="#MouseButton">1.4.1.8. MouseButton</a></li>
<li><a href="#Region">1.4.1.9. Region</a>
<ul class="sectlevel5">
<li><a href="#RegionRectangle">RegionRectangle</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_additional_topics">1.4.2. Additional Topics</a>
<ul class="sectlevel4">
<li><a href="#property-loading-mechanism">1.4.2.1. Property loading mechanism</a>
<ul class="sectlevel5">
<li><a href="#sakuli-default-properties">Property Reference</a></li>
</ul>
</li>
<li><a href="#_exception_handling">1.4.2.2. Exception handling</a></li>
<li><a href="#_logging">1.4.2.3. Logging</a></li>
<li><a href="#encryption">1.4.2.4. Secret De-/Encryption</a></li>
<li><a href="#_screenshot_settings">1.4.2.5. Screenshot settings</a></li>
<li><a href="#_gui_only_tests">1.4.2.6. GUI-only tests</a></li>
<li><a href="#sahi-controller">1.4.2.7. Sahi Controller</a></li>
<li><a href="#sahi-recorder">1.4.2.8. Sahi Recorder</a></li>
<li><a href="#_sahi_settings">1.4.2.9. Sahi settings</a>
<ul class="sectlevel5">
<li><a href="#_browser_selection">Browser selection</a></li>
<li><a href="#sahi-browser-configuration">Browser configuration</a></li>
<li><a href="#sahi_behind_a_proxy">Sahi behind a proxy</a></li>
<li><a href="#sahi-https">HTTPS support in Sahi</a></li>
</ul>
</li>
<li><a href="#_sahi_known_issues">1.4.2.10. Sahi known issues</a>
<ul class="sectlevel5">
<li><a href="#sahi-webpack-dev-server">Sahi and webpack-dev-server</a></li>
<li><a href="#sahi-authorization-headers">Sahi removes authorization headers</a></li>
</ul>
</li>
<li><a href="#_sikuli_settings">1.4.2.11. Sikuli settings</a>
<ul class="sectlevel5">
<li><a href="#_highlighting_regions">Highlighting Regions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_troubleshooting">1.4.3. Troubleshooting</a>
<ul class="sectlevel4">
<li><a href="#_growing_firefox_profile_folder">1.4.3.1. Growing Firefox profile folder</a></li>
<li><a href="#_hanging_applications">1.4.3.2. Hanging applications</a></li>
<li><a href="#image-recognition-problem">1.4.3.3. Sikuli does not recognize images</a></li>
<li><a href="#_missing_keystrokes_on_type_or_failing_paste">1.4.3.4. Missing keystrokes on type or failing paste</a></li>
<li><a href="#_application_getregion_returns_null">1.4.3.5. Application.getRegion() returns NULL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#integration_in_other_tools">1.5. Integration in other Tools</a>
<ul class="sectlevel4">
<li><a href="#forwarder">1.5.1. Forwarder Concept</a></li>
<li><a href="#_forwarder_templates">1.5.2. Forwarder Templates</a>
<ul class="sectlevel5">
<li><a href="#_jtwig_template">JTwig template</a></li>
<li><a href="#_customized_jtwig_functions">Customized Jtwig Functions</a></li>
</ul>
</li>
<li><a href="#sql-database">1.5.3. SQL Database</a>
<ul class="sectlevel5">
<li><a href="#sql-database-create-db">Create Sakuli DB</a></li>
<li><a href="#sql-database-enable-forwarder">Enable database forwarder</a></li>
<li><a href="#_integration_in_other_tools">Integration in other tools</a></li>
<li><a href="#sql-database-optional-cleanup">Database cleanup (optional)</a></li>
</ul>
</li>
<li><a href="#json-forwarder">1.5.4. JSON Forwarder</a>
<ul class="sectlevel5">
<li><a href="#json-forwarder-configuraiton">Configuration of JSON forwarder</a></li>
<li><a href="#json-forwarder-output">Output of JSON forwarder</a></li>
<li><a href="#json-forwarder-usage">Usage of JSON forwarder output</a></li>
</ul>
</li>
<li><a href="#monitoring-integration">1.5.5. Monitoring integration</a>
<ul class="sectlevel4">
<li><a href="#omd-preparation">1.5.5.1. OMD preparation</a>
<ul class="sectlevel5">
<li><a href="#omd-docker">OMD Docker image</a></li>
<li><a href="#_requirements">Requirements</a></li>
<li><a href="#_nagios_configuration">Nagios configuration</a></li>
</ul>
</li>
<li><a href="#omd-gearman">1.5.5.2. Gearman forwarder</a>
<ul class="sectlevel5">
<li><a href="#_omd_configuration">OMD Configuration</a></li>
<li><a href="#sakuli_gearman_client_config">Sakuli Client Configuration</a></li>
<li><a href="#_output_format_template">Output format template</a></li>
<li><a href="#gearman_proxy">Gearman proxy (optional)</a></li>
</ul>
</li>
<li><a href="#omd-sql-database">1.5.5.3. Database forwarder</a>
<ul class="sectlevel5">
<li><a href="#_omd_configuration_2">OMD Configuration</a></li>
<li><a href="#_sakuli_client_configuration">Sakuli Client Configuration</a></li>
<li><a href="#_database_cleanup_optional">Database cleanup (optional)</a></li>
<li><a href="#_troubleshooting_2">Troubleshooting</a></li>
</ul>
</li>
<li><a href="#icinga2-integration">1.5.5.4. Icinga2 forwarder</a>
<ul class="sectlevel5">
<li><a href="#_icinga2_configuration">Icinga2 Configuration</a></li>
<li><a href="#_sakuli_client_configuration_2">Sakuli Client Configuration</a></li>
<li><a href="#_graph_settings">Graph settings</a></li>
</ul>
</li>
<li><a href="#check_mk">1.5.5.5. Check_MK</a>
<ul class="sectlevel5">
<li><a href="#_sakuli_client_configuration_3">Sakuli Client Configuration</a></li>
</ul>
</li>
<li><a href="#screenshot_history">1.5.5.6. Screenshot history</a>
<ul class="sectlevel5">
<li><a href="#_feature_description">Feature description</a></li>
<li><a href="#_activating_the_feature">Activating the feature</a></li>
<li><a href="#screenshot_history_eh">Event handler template</a></li>
<li><a href="#_thruk_action_menu">Thruk action_menu</a></li>
<li><a href="#_grafana_integration">Grafana integration</a></li>
</ul>
</li>
<li><a href="#grafana_graphs">1.5.5.7. Grafana graphs</a>
<ul class="sectlevel5">
<li><a href="#_feature_activation">Feature activation</a></li>
<li><a href="#screenshot_annotations">Screenshot annotations</a></li>
</ul>
</li>
<li><a href="#_pnp4nagios_graphs">1.5.5.8. PNP4Nagios graphs</a>
<ul class="sectlevel5">
<li><a href="#_rrd_storage_type">RRD Storage Type</a></li>
<li><a href="#pnp4nagios-rrd-heartbeat">RRD heartbeat</a></li>
<li><a href="#_install_pnp_graph_template">install PNP graph template</a></li>
<li><a href="#_cpu_memory_metrics">CPU/Memory metrics</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#continuous_integration">1.5.6. Continuous Integration</a>
<ul class="sectlevel4">
<li><a href="#jenkins-integration">1.5.6.1. Jenkins</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_developer_documentation">1.6. Developer Documentation</a>
<ul class="sectlevel3">
<li><a href="#dev-installation">1.6.1. Installation guide for Sakuli-Developers</a></li>
<li><a href="#dev-maven-aspects">1.6.2. Maven aspects</a></li>
<li><a href="#dev-ascii-doc">1.6.3. AsciiDoc documentation aspects</a></li>
<li><a href="#dev-new-release">1.6.4. How to create a new release</a></li>
<li><a href="#dev-sikuli-supplemental-pack">1.6.5. sikulix-supplemental package</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#examples">2. Example projects and Tutorials on GitHub</a></li>
<li><a href="#publications">3. Publications</a></li>
<li><a href="#events">4. Events</a></li>
<li><a href="#media">5. Media</a></li>
<li><a href="#changelog">6. Change Log</a></li>
<li><a href="#support">7. Support</a>
<ul class="sectlevel2">
<li><a href="#_training">7.1. Training</a></li>
<li><a href="#more">7.2. More Resources</a></li>
<li><a href="#_contact">7.3. Contact</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>Copyright © 2017 ConSol Software GmbH - <a href="http://www.sakuli.org">www.sakuli.org</a></strong></p>
</div>
<!-- toc disabled -->
<div class="paragraph">
<p><span class="image"><img src="images/sakuli_logo_small.png" alt="sakuli-logo"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_general"><a class="anchor" href="#_general"></a>General</h2>
<div class="sectionbody">
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/general.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/general.adoc" target="_blank">edit</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Project Homepage: <a href="http://www.sakuli.org/">www.sakuli.org</a></strong></p>
</li>
<li>
<p><strong>Blog Entries: <a href="https://labs.consol.de/tags/sakuli/">labs.consol.de/sakuli</a></strong></p>
</li>
<li>
<p><strong><span class="image"><img src="images/twitter_bird_logo_.png" alt="twitter logo"></span> Twitter: <a href="https://twitter.com/sakuli_e2e">@sakuli_e2e</a></strong></p>
</li>
<li>
<p><strong><span class="image"><img src="images/github-logo-inline.png" alt="github logo"></span> Sourcecode: <a href="https://github.com/ConSol/sakuli">github.com/ConSol/sakuli</a></strong></p>
</li>
<li>
<p><strong><span class="image"><img src="images/github-logo-inline.png" alt="github logo"></span> Tutorials &amp; Examples: <a href="https://github.com/ConSol/sakuli-examples">github.com/ConSol/sakuli-examples</a></strong></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<div class="title">Documentation for version: <code>v1.2.0-SNAPSHOT</code></div>
<p>The documentation of all former Sakuli versions can be found on <a href="http://consol.github.io/sakuli">consol.github.io/sakuli</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>PDF:</strong> <a href="pdf/sakuli_documentation_v1.2.0-SNAPSHOT.pdf">sakuli_documentation_v1.2.0-SNAPSHOT.pdf</a></p>
</li>
<li>
<p><strong>Stable/Latest version:</strong> <a href="http://consol.github.io/sakuli/latest">consol.github.io/sakuli/latest</a></p>
</li>
<li>
<p><strong>Dev version:</strong> latest <code>vX.X.X-SNAPSHOT</code> version</p>
</li>
</ul>
</div>
<div id="short-overview" class="paragraph">
<div class="title">Sakuli Short Overview Presentation</div>
<p>last updated: 12.2017</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="files/Sakuli_Short_Overview.pdf"><img src="images/Sakuli_Short_Overview.png" alt="Sakuli Short Overview Presentation"></a>
</div>
</div>
<div class="videoblock">
<div class="title">Sakuli UI Introduction</div>
<div class="content">
<iframe src="https://www.youtube.com/embed/5RJY_FD6YvQ?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/ConSol/sakuli-ui" class="bare">https://github.com/ConSol/sakuli-ui</a></p>
</div>
<div class="sect2">
<h3 id="contributors"><a class="anchor" href="#contributors"></a>Contributors</h3>
<div class="paragraph">
<p>At this point we want to thank all contributors, which helped to move this great project by submitting code, writing documentation, or adapting other tools to play well together with Sakuli.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tobias Schneck - Sakuli Team / Project Leader, Core Development</p>
</li>
<li>
<p>Simon Meggle - Sakuli Team / Project Leader, Monitoring Integration</p>
</li>
<li>
<p>Christoph Deppisch - Sakuli Team / Core Development</p>
</li>
<li>
<p>Georgi Todorov - Sakuli Team / Core Development</p>
</li>
<li>
<p>Lukas Höfer - Sakuli Team / Consultant</p>
</li>
<li>
<p>Sven Nierlein</p>
</li>
<li>
<p>Philip Griesbacher - <a href="https://github.com/ConSol/sakuli-go-wrapper:">Sakuli Go Starter</a></p>
</li>
<li>
<p>Thomas Rothenbacher</p>
</li>
<li>
<p>Christopher Kreft</p>
</li>
<li>
<p>Sven Hettwer - <a href="#openshift-s2i">OpenShift S2I build</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>(did we forget you? Please poke us):</p>
</div>
</div>
<div class="sect2">
<h3 id="supporters"><a class="anchor" href="#supporters"></a>Valued supporters</h3>
<div class="paragraph">
<p>Very special thanks to all customers which always nourish this project with new ideas and impulses and make it possible in the first place to give it back to the community as Open Source Software. Thumbs up!</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.continentale.de/">Continentale Versicherungsverbund</a></p>
</li>
<li>
<p>LIDL Stiftung &amp; Co. KG</p>
</li>
<li>
<p>Deutsche Pfandbriefbank AG</p>
</li>
<li>
<p>Siemens AG, Global Services Information Technology</p>
</li>
<li>
<p>Federal Ministry for Economic Affairs and Energy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/bmi_logo_eng.png" alt="Supported by Federal Ministry for Economic Affairs and Energy"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="download"><a class="anchor" href="#download"></a>Download</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/download.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/download.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<div class="title">Installer (recommended)</div>
<p><strong>Platform independent Java installer: <a href="https://labs.consol.de/sakuli/install/sakuli-v1.2.0-SNAPSHOT-installer.jar" target="_blank">sakuli-v1.2.0-SNAPSHOT-installer.jar</a></strong></p>
</div>
<div class="paragraph">
<div class="title">Maven Dependencies</div>
<p>See <a href="#maven-execution">Maven Execution</a>.</p>
</div>
<div class="paragraph">
<div class="title">Docker images</div>
<p>See <a href="#containerized-execution">Containerized Execution</a></p>
</div>
<div class="paragraph">
<div class="title">Raw ZIP</div>
<p>Raw Sakuli installation directory, containing Sakuli, Sahi and examples. Useful if you want to build your own installation routines. The installation scripts and the Sakuli binary can be found in <code>sakuli-v1.2.0-SNAPSHOT/bin/</code>:</p>
</div>
<div class="paragraph">
<p><a href="https://labs.consol.de/sakuli/install/sakuli-v1.2.0-SNAPSHOT.zip" target="_blank">sakuli-v1.2.0-SNAPSHOT.zip</a></p>
</div>
<div class="paragraph">
<div class="title">PDF manual</div>
<p>This manual as one PDF document: <a href="pdf/sakuli_documentation_v1.2.0-SNAPSHOT.pdf" target="_blank">Download PDF</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_branches_build_status"><a class="anchor" href="#_branches_build_status"></a>Branches &amp; build status</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/build_states.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/build_states.adoc" target="_blank">edit</a></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">branch</th>
<th class="tableblock halign-left valign-top">build state</th>
<th class="tableblock halign-left valign-top">docker images state</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>master</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><a class="image" href="http://labs-build.consol.de/view/Sakuli/job/Sakuli_perform_release/^"><img src="http://labs-build.consol.de/buildStatus/icon?job=Sakuli_perform_release" alt="Build Status"></a></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://xfce.org">Xfce</a></strong>
</p><p class="tableblock"><code>consol/sakuli-ubuntu-xfce</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-ubuntu-xfce^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-ubuntu-xfce.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-ubuntu-xfce^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-ubuntu-xfce.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-centos-xfce</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-centos-xfce/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-centos-xfce.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-centos-xfce^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-centos-xfce.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-ubuntu-xfce-java</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-ubuntu-xfce-java/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-ubuntu-xfce-java.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-ubuntu-xfce-java^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-ubuntu-xfce-java.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-centos-xfce-java</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-centos-xfce-java/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-centos-xfce-java.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-centos-xfce-java^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-centos-xfce-java.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><strong><a href="http://www.icewm.org/">IceWM</a></strong>
</p><p class="tableblock"><code>consol/sakuli-ubuntu-icewm</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-ubuntu-icewm^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-ubuntu-icewm.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-ubuntu-icewm^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-ubuntu-icewm.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-centos-icewm</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-centos-icewm/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-centos-icewm.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-centos-icewm^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-centos-icewm.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-ubuntu-icewm-java</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-ubuntu-icewm-java/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-ubuntu-icewm-java.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-ubuntu-icewm-java^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-ubuntu-icewm-java.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-centos-icewm-java</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-centos-icewm-java/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-centos-icewm-java.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-centos-icewm-java^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-centos-icewm-java.svg" alt="microbadger profile"></a></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><a class="image" href="http://labs-build.consol.de/view/Sakuli/job/Sakuli_CI/^"><img src="http://labs-build.consol.de/buildStatus/icon?job=Sakuli_CI" alt="Build Status"></a></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://xfce.org">Xfce</a></strong>
</p><p class="tableblock"><code>consol/sakuli-ubuntu-xfce:dev</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-ubuntu-xfce^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-ubuntu-xfce:dev.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-ubuntu-xfce^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-ubuntu-xfce:dev.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"></p><p class="tableblock"><code>consol/sakuli-centos-xfce:dev</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-centos-xfce/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-centos-xfce:dev.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-centos-xfce^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-centos-xfce:dev.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-ubuntu-xfce-java:dev</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-ubuntu-xfce-java/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-ubuntu-xfce-java:dev.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-ubuntu-xfce-java^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-ubuntu-xfce-java:dev.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-centos-xfce-java:dev</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-centos-xfce-java/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-centos-xfce-java:dev.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-centos-xfce-java^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-centos-xfce-java:dev.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><strong><a href="http://www.icewm.org/">IceWM</a></strong>
</p><p class="tableblock"><code>consol/sakuli-ubuntu-icewm:dev</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-ubuntu-icewm^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-ubuntu-icewm:dev.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-ubuntu-icewm^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-ubuntu-icewm:dev.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"></p><p class="tableblock"><code>consol/sakuli-centos-icewm:dev</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-centos-icewm/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-centos-icewm:dev.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-centos-icewm^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-centos-icewm:dev.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-ubuntu-icewm-java:dev</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-ubuntu-icewm-java/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-ubuntu-icewm-java:dev.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-ubuntu-icewm-java^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-ubuntu-icewm-java:dev.svg" alt="microbadger profile"></a></span>
</p><p class="tableblock"><code>consol/sakuli-centos-icewm-java:dev</code>
<span class="image"><a class="image" href="https://hub.docker.com/r/consol/sakuli-centos-icewm-java/^"><img src="https://images.microbadger.com/badges/version/consol/sakuli-centos-icewm-java:dev.svg" alt="dockerhub state"></a></span>
<span class="image"><a class="image" href="http://microbadger.com/images/consol/sakuli-centos-icewm-java^"><img src="https://images.microbadger.com/badges/image/consol/sakuli-centos-icewm-java:dev.svg" alt="microbadger profile"></a></span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="why-sakuli"><a class="anchor" href="#why-sakuli"></a>Why Sakuli?</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/why-sakuli.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/why-sakuli.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>There are already a variety of free end2end/automation tools on the market (Sahi, Selenium, WebInject, Sikuli, CasperJS, AutoIT , …), but each of them has at least one of the following drawbacks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Too specifically</strong>: <em>pure</em> web testing tools can only deal with <em>pure</em> web content. Applets, Flash, dialogues generated by OS, browser dialogues etc. are invisible and a insurmountable hurdle for such tools.</p>
</li>
<li>
<p><strong>Too generic</strong>: screen-based testing tools "see" everything the user sees. They are the best choice for GUI tests, but inappropriate for web tests, because each browser type has its own understanding of how to render and display a web page.</p>
</li>
<li>
<p><strong>Far from reality</strong>: There are tools to test web applications on protocol level - but to know whether a web application is working or not requires a test from the user&#8217;s perspective.</p>
</li>
<li>
<p><strong>Inflexible</strong>: Hardly one of these tools brings the ability to integrate into other systems (like Nagios or Jenkins).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="key-features"><a class="anchor" href="#key-features"></a>Key Features</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/key-features.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/key-features.adoc" target="_blank">edit</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Platform-independent UI testing tool</p>
</li>
<li>
<p>End-2-End monitoring of application functionality and quality</p>
</li>
<li>
<p>Combines two automation technologies:</p>
<div class="ulist">
<ul>
<li>
<p>DOM based web testing</p>
</li>
<li>
<p>Image pattern based UI automation (for non-web content)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Scalable from single-client up to multi-node container setup for parallel execution</p>
</li>
<li>
<p>Integration of test results into</p>
<div class="ulist">
<ul>
<li>
<p>Monitoring systems (e.g. Nagios/Icinga)</p>
</li>
<li>
<p>CI builds (e.g. Jenkins)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="concept"><a class="anchor" href="#concept"></a>Concept</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/concept.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/concept.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sakuli_concept.png" alt="sakuli concept"></span></p>
</div>
<div class="paragraph">
<p><strong>Sakuli simulates user actions</strong> on graphical user interfaces (web, fat client, citrix, …), and provides the obtained information (runtime, result, screenshots) to third party (e.g. Nagios compatible monitoring) systems.</p>
</div>
<div class="paragraph">
<p><strong>Sakuli</strong> is written in Java and runs on many platforms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#windows">Windows</a></p>
</li>
<li>
<p><a href="#linux">Linux</a></p>
</li>
<li>
<p><a href="#containerized-execution">Docker containers</a></p>
</li>
<li>
<p>MacOS</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <strong>Sakuli</strong> project brings together two Open-Source end-to-end testing tools which perfectly fit together: <a href="http://www.sahi.co.in/">Sahi</a> for <strong>web-based tests</strong> (by injecting JavaScript code into the browser), as well as the screenshot-based testing tool <a href="http://sikulix.com/">Sikuli</a>, which allows the execution of <strong>keyboard and mouse actions</strong> on screen areas that have been defined by previously recorded screenshots and are recognized using the OpenCV engine.</p>
</div>
<div class="paragraph">
<p>Sakuli accesses both tools via its <strong>Java API</strong> and makes it possible to <strong>use them simultaneously</strong>. For example, web tests can be done very performant with Sahi (where a screenshot-based approach would be at best the second choice), whereas "off-DOM"-content can be catched with Sikuli. Whenever a web test comes into a situation which Sahi can&#8217;t handle (e.g. a PIN dialogue for a smartcard login), use a Sikuli command. On the other hand, pure tests of fat client applications can be easily be setup by using only the Sikuli functions of Sakuli.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sakuli_components.png" alt="Components of Sakuli"></span></p>
</div>
<div class="paragraph">
<p>The integration of Sakuli in other tools can be done by different so called <strong>forwarder modules</strong>:</p>
</div>
<table id="forwarders" class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Sakuli forwarder modules</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 25%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Forwarder</th>
<th class="tableblock halign-left valign-top">Technology</th>
<th class="tableblock halign-left valign-top">Use cases</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Log-Files and screenshots<br>
- Command line output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- <a href="#continuous_integration">Continuous Integration</a> server<br>
- Locale test runs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#json-forwarder">json</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Output files in JSON format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Sakuli GUI<br>
- Interface to 3rd party systems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#sql-database">database</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- JDBC-SQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Integration in <strong>Nagios</strong> based monitoring systems as <strong>active checks</strong> with  <a href="https://labs.consol.de/de/nagios/check_mysql_health/index.html">check_mysql_health</a><br>
- Persistent storage of results<br>
- Ready for own reporting implementations<br>
- Interface to 3rd party systems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#omd-gearman">gearman</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- <a href="http://gearman.org/">Gearman</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Integration in <strong>Nagios</strong> based monitoring systems as <strong>passive checks</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#icinga2-integration">icinga2</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- <a href="https://docs.icinga.com/icinga2/latest/doc/module/icinga2/chapter/icinga2-api">Icinga2 REST API</a><br>
- JSON Data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Integration in <strong>Icinga2</strong> as <strong>passive checks</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#check_mk">check_mk</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Result spool file on check_mk agent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Integration in CheckMK through customizable spool file<br>
- preconfigured service templates</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more information see <a href="#integration_in_other_tools">Integration in other Tools</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manual"><a class="anchor" href="#manual"></a>1. Manual</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction"><a class="anchor" href="#_introduction"></a>1.1. Introduction</h3>

</div>
<div class="sect2">
<h3 id="execution-types"><a class="anchor" href="#execution-types"></a>1.2. Execution Types</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/execution-types.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/execution-types.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Sakuli supports different execution types. Each of the types have a special purpose:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Overview Sakuli Execution Types</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#native-execution">Native Execution</a><br>
(<a href="#windows">Windows</a>, <a href="#linux">Linux</a>, , MacOS)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+ Supports all end user platforms<br>
+ Installable directly on the end user client<br>
+ Easy JavaScript based API syntax<br>
+ Direct execution of test scripts without compile process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#maven-execution">Maven Execution</a><br>
(<a href="#sakuli-java-dsl">Java DSL</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+ Easy integration in maven build cycle<br>
+ Well known test structure and execution context for Java developers<br>
+ Good writing and debug support through well known Java IDEs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#containerized-execution">Containerized Execution</a><br>
(<a href="#docker-images">Docker Images</a>, <a href="#docker-compose">Docker Compose</a>, <a href="#kubernetes">Kubernetes</a>, <a href="#openshift">OpenShift</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+ Ready to use E2E environment without installation process<br>
+ Tests run in a real desktop and using a real browser or native client<br>
+ Easy integration in server environments for running headless UI tests<br>
+ Supports JavaScript and Java based tests<br>
+ Scalable environment with all advantages of the container technology</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="native-execution"><a class="anchor" href="#native-execution"></a>1.2.1. Native Execution</h4>
<div class="sect4">
<h5 id="windows"><a class="anchor" href="#windows"></a>1.2.1.1. Windows Client</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/native/windows.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/native/windows.adoc" target="_blank">edit</a></p>
</div>
<div class="sect5">
<h6 id="_installation"><a class="anchor" href="#_installation"></a>Installation</h6>
<div class="paragraph">
<p>This page describes the steps to <strong>install and test</strong> Sakuli on <strong>Windows</strong>.
If you want to <strong>update</strong> Sakuli, see the <a href="#upgrade_process">Upgrade process</a> documentation.</p>
</div>
<div class="paragraph">
<p>The default installation path of Sakuli is <code>%SAKULI_ROOT%</code>. The particular Sakuli version is referenced as <code>%SAKULI_HOME%</code> (also called the "<em>version</em>" folder) which is inside of the folder <code>%SAKULI_ROOT%</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; echo %SAKULI_ROOT%
  C:\Program Files (x86)\sakuli
&gt; echo %SAKULI_HOME%
  C:\Program Files (x86)\sakuli\sakuli-v1.1.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Values surrounded by double underscores are have to be filled individually by you (e.g. <code><em>IP_ADDRESS</em></code>).</p>
</div>
<div class="sect6">
<h7 id="_machine_requirements"><a class="anchor" href="#_machine_requirements"></a>Machine requirements</h7>
<div class="paragraph">
<p>You can run Sakuli on physical as well as on virtual Linux machines.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>OS</strong>: <strong>Microsoft Windows</strong> (version 7 and higher)</p>
</li>
<li>
<p><strong>64 Bit</strong> (recommended)</p>
</li>
<li>
<p><strong>RAM</strong>: 2GB or more</p>
</li>
<li>
<p><strong>CPU</strong>: at least two CPU cores</p>
</li>
<li>
<p><strong>Software:</strong></p>
</li>
<li>
<p>Java JRE &gt;= 1.8</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="_recommendations"><a class="anchor" href="#_recommendations"></a>Recommendations</h7>
<div class="ulist">
<ul>
<li>
<p>Set the desktop background to a homogeneous color.</p>
</li>
<li>
<p>disable any screen locking mechanisms</p>
</li>
<li>
<p>Run Sakuli with a dedicated user</p>
</li>
<li>
<p>Sakuli needs a reliable and predictable desktop environment: make sure that there are no pop-up windows of services or applications</p>
</li>
<li>
<p>If Sakuli is running within a VM, change the desktop resolution to a fixed value (e.g. 1024x768) and disable any auto-resizing mechanisms of the guest display. This ensures that the guest&#8217;s resolution does not change in case that you resize its window.</p>
</li>
<li>
<p>Ensure that now 3D effects or shadowing break your test. For Window 7 e.g. it&#8217;s recommended to use <a href="#windows-classic-theme">Windos Classic theme</a>.</p>
</li>
<li>
<p>Ensure that the client should have only <strong>ONE</strong> physical screen.</p>
</li>
<li>
<p>Other optional steps see <a href="#windows-troubleshooting">Troubleshooting</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="_sakuli_installation"><a class="anchor" href="#_sakuli_installation"></a>Sakuli installation</h7>
<div class="ulist">
<ul>
<li>
<p>Download the <strong>Sakuli Installer</strong> from <a href="http://labs.consol.de/sakuli/install">http://labs.consol.de/sakuli/install</a></p>
<div class="ulist">
<ul>
<li>
<p>current <strong>development</strong> snapshot = <code>sakuli-vX.X.X-SNAPSHOT-installer.jar</code></p>
</li>
<li>
<p>current <strong>stable</strong> version = <code>sakuli-vX.X.X-installer.jar</code> (recommended)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Double-click on the downloaded .jar file to start the installer:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/installer_1.png" alt="inst_1"></span></p>
</div>
<div class="paragraph">
<p>Read and accept the licence, choose the installation folder (any path the current user has <em>rw</em> permissions is ok) and select the packages to install:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/installer_2.png" alt="inst_2"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>install Sakuli core (command line)</p>
</li>
<li>
<p>install <a href="#sakuli-ui">Sakuli UI</a></p>
</li>
<li>
<p>install Sahi</p>
</li>
<li>
<p>set/update the environment variable <code>%SAKULI_HOME%</code> to the new version.</p>
</li>
<li>
<p>set/update environment settings which have proved as best practice for UI tests.</p>
</li>
<li>
<p>install one example test suite per OS which help you to test and understand Sakuli.</p>
</li>
<li>
<p>install Firefox Portable, which can be used exclusively for Sakuli Tests.</p>
</li>
<li>
<p>install <a href="http://sourceforge.net/projects/qres/">QRes</a>, a open source screen mode changer (Windows only)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the end you are offered to generate a headless installation file which can be executed on other hosts with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>java -jar sakuli-vX.X.X-installer.jar auto-config.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Reboot now to take the registry changes effect.</p>
</div>
</div>
<div class="sect6">
<h7 id="_test"><a class="anchor" href="#_test"></a>Test</h7>
<div class="paragraph">
<p>Now test if Sahi can start a Sahi-controlled browser.</p>
</div>
<div class="paragraph">
<p>Open the <strong>Sahi Dashboard</strong>, execute in <code>cmd.exe</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd "%SAKULI_ROOT%\sahi\userdata\bin"
start_dashboard.bat`</pre>
</div>
</div>
<div class="paragraph">
<p>It should now list all available browsers on this system.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/inst_dashboard.png" alt="dashboards"></span></p>
</div>
<div class="paragraph">
<p>Click on any browser icon: it should start and present you the start page of Sahi:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sahi_startpage.jpg" alt="sahi_start"></span></p>
</div>
<div class="paragraph">
<p>At last, test the <strong>Sahi Controller</strong> by holding the <strong>ALT key</strong> and double-clicking on any white space on the page. If you are getting a new window showing the "Sahi Controller", you&#8217;re done. Close all browser windows and Sahi.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/installer_4_w.png" alt="controller_windows"></span></p>
</div>
<div class="paragraph">
<p>You are now ready to run the <strong>first minimal Sakuli test</strong> to see if Sakuli and its components are working well together. Open a new terminal to start a test:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Windows 7</strong>: <code>sakuli run "%SAKULI_ROOT%\example_test_suites\example_windows7\"</code></p>
</li>
<li>
<p><strong>Windows 8</strong>: <code>sakuli run "%SAKULI_ROOT%\example_test_suites\example_windows8\"</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sakuli should now</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>open <strong>Firefox</strong> with the Sakuli welcome page, highlight some page elements</p>
</li>
<li>
<p>open the <strong>calculator</strong> and calculate <em>525+100=625</em></p>
</li>
<li>
<p>open an <strong>editor</strong> and write a <strong>status message</strong></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_additional_documentation"><a class="anchor" href="#_additional_documentation"></a>Additional documentation:</h6>
<div class="ulist">
<ul>
<li>
<p>If you are sitting behind a company proxy, refer to <a href="#sahi_behind_a_proxy">Sahi behind a proxy</a>.</p>
</li>
<li>
<p>Refer to <a href="#sahi-browser-configuration">Browser configuration</a> for instructions how to register other browsers.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_optional_software"><a class="anchor" href="#_optional_software"></a>Optional software</h6>
<div class="sect6">
<h7 id="_phantomjs"><a class="anchor" href="#_phantomjs"></a>PhantomJS</h7>
<div class="paragraph">
<p>Currently, <em>each</em> Sakuli test requires to start a browser, which is not very handy for pure Sikuli GUI tests (=where no browser at all is needed). For that case, use a headless browser like <a href="http://phantomjs.org">PhantomJS</a>. Refer to <a href="#sahi-browser-configuration">Browser configuration</a> for more information.</p>
</div>
<div class="paragraph">
<p>Attention: PhantomJS 2 is currently unsupported. Use version 1.9.x</p>
</div>
</div>
<div class="sect6">
<h7 id="_screenshot_tool"><a class="anchor" href="#_screenshot_tool"></a>Screenshot tool</h7>
<div class="paragraph">
<p>Use a screenshot tool which is able to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>capture areas of the screen</p>
</li>
<li>
<p>delay the creation of screenshots for x seconds (important if Sikuli must navigate through menues)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A good choice is</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.getgreenshot.org">Greenshot</a> on <strong>Windows</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Always make sure that screenshots are saved without compression. Sikuli uses a default similarity of 0.99, which internally means that "more than 99%" =&gt; 100% pixels must coincide. Decreasing similarity should only be neccessary if the pattern images are of poor quality or the region compared to always slightly differs from the pattern image.</p>
</div>
</div>
<div class="sect6">
<h7 id="_editor"><a class="anchor" href="#_editor"></a>Editor</h7>
<div class="paragraph">
<p>It is recommended to use an Editor with JavaScript support, e. g. <a href="http://notepad-plus-plus.org/">Notepad++</a>,  <a href="https://atom.io">Atom</a>, <a href="https://www.sublimetext.com">Sublime</a> or <a href="https://code.visualstudio.com/">Visual Studio Code</a></p>
</div>
<div class="paragraph">
<p>It also possible to use professional programming IDEs like <a href="https://www.jetbrains.com/idea/">IntelliJ</a>, <a href="https://netbeans.org/">Netbeans</a> or <a href="https://eclipse.org">Eclipse</a>.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_next_steps"><a class="anchor" href="#_next_steps"></a>Next steps</h6>
<div class="ulist">
<ul>
<li>
<p>Read our <a href="https://github.com/ConSol/sakuli-examples/blob/master/first-steps/first-steps.md">first-steps tutorial</a> and learn to handle Sakuli</p>
</li>
<li>
<p>Integrate Sakuli results in monitoring systems:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#omd-gearman">Gearman forwarder</a></p>
</li>
<li>
<p><a href="#omd-sql-database">Database forwarder</a></p>
</li>
<li>
<p><a href="#icinga2-integration">Icinga2 forwarder</a></p>
</li>
<li>
<p><a href="#check_mk">Check_MK</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Sakuli can also be integrated in <strong>continuous integration</strong> environments like <a href="#jenkins-integration">Jenkins</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="rdp-peculiarities"><a class="anchor" href="#rdp-peculiarities"></a>RDP peculiarities</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/native/windows-rdp-peculiarities.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/native/windows-rdp-peculiarities.adoc" target="_blank">edit</a></p>
</div>
<div class="sect6">
<h7 id="_things_to_know"><a class="anchor" href="#_things_to_know"></a>Things to know</h7>
<div class="paragraph">
<p>There are four ways to connect to and work on a Sakuli client machine:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>VNC</strong></p>
</li>
<li>
<p><strong>Console</strong> of a virtualization platform (ESX, Virtualbox, etc.)</p>
</li>
<li>
<p><strong>Remote Desktop</strong> (Windows)</p>
</li>
<li>
<p><strong>local screen</strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For case 1. and 2. there is nothing special to watch out for, except that the screen must not be locked (otherwise Sikuli will also see a locked screen). The screen content will be the same as displays on a local screen (4.).</p>
</div>
<div class="paragraph">
<p>For RDP on Windows there are some special things to know. Connecting to the Sakuli test client via RDP <strong>locks any existing local console session of that user</strong> and <strong>attaches (="moves") it to a RDP session</strong>.</p>
</div>
<div class="paragraph">
<p>Sakuli will just as well run within that RDP session. But closing/disconnecting/logging of that RDP session will not unlock the local console session again. Sakuli will see the same as a regular user: nothing but a locked screen. Read the next paragraph to learn how to avoid this.</p>
</div>
</div>
<div class="sect6">
<h7 id="__code_logoff_bat_code"><a class="anchor" href="#__code_logoff_bat_code"></a><code>LOGOFF.bat</code></h7>
<div class="paragraph">
<p>To log off a RDP session, right-click <code>%SAKULI_HOME%\bin\helper\LOGOFF.bat</code> and execute the script with administrator privileges. The script then</p>
</div>
<div class="ulist">
<ul>
<li>
<p>determines the current RDP session ID</p>
</li>
<li>
<p>redirects this session back to the local console</p>
</li>
<li>
<p>terminates the RDP session.</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="__code_check_logon_session_ps1_code"><a class="anchor" href="#__code_check_logon_session_ps1_code"></a><code>check_logon_session.ps1</code></h7>
<div class="paragraph">
<p>In <code>%SAKULI_HOME%\setup\nagios</code> you can find <strong>check_logon_session.ps1</strong> which can be used as a client-side Nagios check to ensure that the Sakuli user is always logged on, either via RDP or on the local console. Instructions for the implementation of this check can be found in the script header.</p>
</div>
<div class="paragraph">
<p>Define a service dependency of all Sakuli checks to this logon check; this will ensure that a locked session will not raise false alarms.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/userloggedin.jpg" alt="user-login"></span></p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="windows-troubleshooting"><a class="anchor" href="#windows-troubleshooting"></a>Troubleshooting</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/native/windows-troubleshooting.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/native/windows-troubleshooting.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>If you have some errors with your Windows installation, you can check the following points:</p>
</div>
<div class="sect6">
<h7 id="windows-classic-theme"><a class="anchor" href="#windows-classic-theme"></a>Change Windows theme and title bar colors</h7>
<div class="paragraph">
<p>Windows 7 comes by default with an "aero" theme, which is quite awkward for Sikuli, because there are many transparency effects which cause window elements to change their appearance dependend on the elements below. For that, change the theme to "Windows Classic".</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/w_classictheme.jpg" alt="classic"></span></p>
</div>
<div class="paragraph">
<p>Furthermore, change the colors of <strong>active</strong> and <strong>inactive</strong> title bars to <strong>non gradient</strong>:
<span class="image"><img src="images/w_titlebar.jpg" alt="titlebars"></span></p>
</div>
</div>
<div class="sect6">
<h7 id="_rdp_related_settings"><a class="anchor" href="#_rdp_related_settings"></a>RDP related settings</h7>
<div class="paragraph">
<p>The following steps have only to be done if you are accessing the Sakuli Client via RDP.</p>
</div>
<div class="paragraph">
<div class="title">Disable Clipboard Sharing</div>
<p>The "paste" function of Sakuli uses the clipboard at runtime to decrypt and paste passwords. For this reason, the clipboard exchange of the Sakuli client and the RDP client should be suppressed in the settings tab of your <strong>local Remote Desktop client</strong>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/w_clipboard.jpg" alt="clipboard"></span></p>
</div>
<div class="paragraph">
<p>This can be set globally in the registry <strong>of your local host</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>regedit</code></p>
</li>
<li>
<p><code>[ HKEY_CURRENT_USER\Software\Microsoft\Terminal Server Client ]</code></p>
</li>
<li>
<p><code>DisableDriveRedirection</code> <code>(DWORD)</code> =&gt; <code>1</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Disable the "GUI-less" mode</div>
<p>If you minimize the Remote Desktop window (the window that display the remote computer’s desktop), the operating system switches the remote session to a "GUI-less mode" which does not transfer any window data anymore. As a result, Sakuli is unable to interact with the tested application’s GUI, as the whole screen is not visible.</p>
</div>
<div class="paragraph">
<p>To disable the "GUI-less" mode <strong>on your local host</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>regedit</code></p>
</li>
<li>
<p><code>[ HKEY_CURRENT_USER\Software\Microsoft\Terminal Server Client ]</code></p>
</li>
<li>
<p><code>RemoteDesktop_SuppressWhenMinimized</code> <code>(DWORD)</code> =&gt; <code>2</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="linux"><a class="anchor" href="#linux"></a>1.2.1.2. Linux Client</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/native/linux.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/native/linux.adoc" target="_blank">edit</a></p>
</div>
<div class="sect5">
<h6 id="_installation_2"><a class="anchor" href="#_installation_2"></a>Installation</h6>
<div class="paragraph">
<p>This page describes the steps to <strong>install and test</strong> Sakuli on <strong>Ubuntu Linux 16.04 LTS</strong>.
For other distributions (CentOS, OpenSuSE, &#8230;&#8203;) they be mostly identical. If you want to <strong>update</strong> Sakuli, see the <a href="#upgrade_process">Upgrade process</a> documentation.</p>
</div>
<div class="paragraph">
<p>The default installation path of Sakuli is <code>$SAKULI_ROOT</code>. The particular Sakuli version is referenced as <code>$SAKULI_HOME</code> (also called the "<em>version</em>" folder) which is inside of the folder <code>$SAKULI_ROOT</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&gt; echo $SAKULI_ROOT
  /home/user/sakuli/
&gt; echo $SAKULI_HOME
  /home/user/sakuli/sakuli-v1.1.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Values surrounded by double underscores are have to be filled individually by you (e.g. <code><em>IP_ADDRESS</em></code>).</p>
</div>
<div class="sect6">
<h7 id="_machine_requirements_2"><a class="anchor" href="#_machine_requirements_2"></a>Machine requirements</h7>
<div class="paragraph">
<p>You can run Sakuli on physical as well as on virtual Linux machines.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Linux OS</strong> (here: Ubuntu 16.04 LTS Desktop)</p>
</li>
<li>
<p><strong>64 Bit</strong> (recommended)</p>
</li>
<li>
<p><strong>RAM</strong>: 2GB or more</p>
</li>
<li>
<p><strong>CPU</strong>: at least two CPU cores</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="_software_requirements"><a class="anchor" href="#_software_requirements"></a>Software requirements</h7>
<div class="paragraph">
<p><code>sudo apt-get install openjdk-8-jre tesseract-ocr wmctrl xdotool</code></p>
</div>
</div>
<div class="sect6">
<h7 id="_recommendations_2"><a class="anchor" href="#_recommendations_2"></a>Recommendations</h7>
<div class="ulist">
<ul>
<li>
<p>Set the desktop background to a homogeneous color.</p>
</li>
<li>
<p>disable any screen locking mechanisms</p>
</li>
<li>
<p>Run Sakuli with a dedicated user</p>
</li>
<li>
<p>Sakuli needs a reliable and predictable desktop environment: make sure that there are no pop-up windows of services or applications</p>
</li>
<li>
<p>If Sakuli is running within a VM, change the desktop resolution to a fixed value (e.g. 1024x768) and disable any auto-resizing mechanisms of the guest display. This ensures that the guest&#8217;s resolution does not change in case that you resize its window.</p>
</li>
<li>
<p>Ensure that now 3D effects or shadowing break your test. For Ubuntu e.g. it&#8217;s recommended to use <a href="#gnome-session-flashback"><code>gnome-session-flashback</code></a> theme.</p>
</li>
<li>
<p>Ensure that the client should have only <strong>ONE</strong> physical screen.</p>
</li>
<li>
<p>Other optional steps see <a href="#linux-troubleshooting">Troubleshooting</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="_sakuli_installation_2"><a class="anchor" href="#_sakuli_installation_2"></a>Sakuli installation</h7>
<div class="ulist">
<ul>
<li>
<p>Download the <strong>Sakuli Installer</strong> from <a href="http://labs.consol.de/sakuli/install">http://labs.consol.de/sakuli/install</a></p>
<div class="ulist">
<ul>
<li>
<p>current <strong>development</strong> snapshot = <code>sakuli-vX.X.X-SNAPSHOT-installer.jar</code></p>
</li>
<li>
<p>current <strong>stable</strong> version = <code>sakuli-vX.X.X-installer.jar</code> (recommended)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Execute <code>java -jar sakuli-vX.X.X-installer.jar</code> to start the installer:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/installer_1_linux.png" alt="inst_1"></span></p>
</div>
<div class="paragraph">
<p>Read and accept the licence, choose the installation folder (any path the current user has <em>rw</em> permissions is ok) and select the packages to install:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/installer_2_linux.png" alt="inst_2"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>install Sakuli core (command line)</p>
</li>
<li>
<p>install <a href="#sakuli-ui">Sakuli UI</a></p>
</li>
<li>
<p>install Sahi</p>
</li>
<li>
<p>set/update the environment variable <code>$SAKULI_HOME</code> which points to the new version.</p>
</li>
<li>
<p>set/update <code>.bashrc</code></p>
</li>
<li>
<p>install one example test suite per OS which help you to test and understand Sakuli.</p>
</li>
<li>
<p>install Firefox Portable, which can be used exclusively for Sakuli Tests</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the end you are offered to generate a headless installation file which can be executed on other hosts with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>java -jar sakuli-vX.X.X-installer.jar auto-config.xml</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_test_2"><a class="anchor" href="#_test_2"></a>Test</h7>
<div class="paragraph">
<p>Now test if Sahi can start a Sahi-controlled browser.</p>
</div>
<div class="paragraph">
<p>Open the <strong>Sahi Dashboard</strong>, execute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd $SAKULI_ROOT/sahi/userdata/bin
./start_dashboard.sh</pre>
</div>
</div>
<div class="paragraph">
<p>It should now list all available browsers on this system.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/inst_dashboard_linux.png" alt="dashboards"></span></p>
</div>
<div class="paragraph">
<p>Click on any browser icon, it should start and present you the start page of Sahi:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sahi_startpage.jpg" alt="sahi_start"></span></p>
</div>
<div class="paragraph">
<p>At last, test the <strong>Sahi Controller</strong> by holding the <strong>ALT key</strong> and double-clicking on any white space on the page. If you are getting a new window showing the "Sahi Controller", you&#8217;re done. Close all browser windows and Sahi.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/installer_4_l.png" alt="controller_linux"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
On Linux deskops the ALT key is often predefined to drag windows. In this case, open <code>$SAKULI_HOME/sahi/config/sahi.properties</code> and change the "hotkey" property:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>controller.hotkey=SHIFT</code></pre>
</div>
</div>
<div class="paragraph">
<p>You are now ready to run the <strong>first minimal Sakuli test</strong> to see if Sakuli and its components are working well together. Open a new terminal to start a test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sakuli run $SAKULI_ROOT/example_test_suites/example_ubuntu</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sakuli should now</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>open <strong>Firefox</strong> with the Sakuli welcome page, highlight some page elements</p>
</li>
<li>
<p>open the <strong>calculator</strong> and calculate <em>525+100=625</em></p>
</li>
<li>
<p>open an <strong>editor</strong> and write a <strong>status message</strong></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_additional_documentation_2"><a class="anchor" href="#_additional_documentation_2"></a>Additional documentation</h6>
<div class="ulist">
<ul>
<li>
<p>If you are sitting behind a company proxy, refer to <a href="#sahi_behind_a_proxy">Sahi behind a proxy</a>.</p>
</li>
<li>
<p>Refer to <a href="#sahi-browser-configuration">Browser configuration</a> for instructions how to register other browsers.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_optional_software_2"><a class="anchor" href="#_optional_software_2"></a>Optional software</h6>
<div class="sect6">
<h7 id="_phantomjs_2"><a class="anchor" href="#_phantomjs_2"></a>PhantomJS</h7>
<div class="paragraph">
<p>Currently, <em>each</em> Sakuli test requires to start a browser, which is not very handy for pure Sikuli GUI tests (=where no browser at all is needed). For that case, use a headless browser like <a href="http://phantomjs.org">PhantomJS</a>. Refer to <a href="#sahi-browser-configuration">Browser configuration</a> for more information.</p>
</div>
<div class="paragraph">
<p>Attention: PhantomJS 2 is currently unsupported. Use version 1.9.x</p>
</div>
</div>
<div class="sect6">
<h7 id="_screenshot_tool_2"><a class="anchor" href="#_screenshot_tool_2"></a>Screenshot tool</h7>
<div class="paragraph">
<p>Use a screenshot tool which is able to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>capture areas of the screen</p>
</li>
<li>
<p>delay the creation of screenshots for x seconds (important if Sikuli must navigate through menues)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A good choice is</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://shutter-project.org/">Shutter</a> on <strong>Linux</strong>.</p>
</li>
<li>
<p><a href="https://wiki.ubuntuusers.de/Scrot/">Scrot</a> on <strong>Linux</strong> (lightweight, cli-based).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Always make sure that screenshots are saved without compression. Sikuli uses a default similarity of 0.99, which internally means that "more than 99%" =&gt; 100% pixels must coincide. Decreasing similarity should only be neccessary if the pattern images are of poor quality or the region compared to always slightly differs from the pattern image.</p>
</div>
</div>
<div class="sect6">
<h7 id="_editor_2"><a class="anchor" href="#_editor_2"></a>Editor</h7>
<div class="paragraph">
<p>It is recommended to use an Editor with JavaScript support, e.g. <a href="https://atom.io">Atom</a>, <a href="https://www.sublimetext.com">Sublime</a>  or <a href="https://code.visualstudio.com/">Visual Studio Code</a></p>
</div>
<div class="paragraph">
<p>It also possible to use professional programming IDEs like <a href="https://www.jetbrains.com/idea/">IntelliJ</a>, <a href="https://netbeans.org/">Netbeans</a> or <a href="https://eclipse.org">Eclipse</a>.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_next_steps_2"><a class="anchor" href="#_next_steps_2"></a>Next steps</h6>
<div class="ulist">
<ul>
<li>
<p>Read our <a href="https://github.com/ConSol/sakuli-examples/blob/master/first-steps/first-steps.md">first-steps tutorial</a> and learn to handle Sakuli</p>
</li>
<li>
<p>Integrate Sakuli results in monitoring systems:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#omd-gearman">Gearman forwarder</a></p>
</li>
<li>
<p><a href="#omd-sql-database">Database forwarder</a></p>
</li>
<li>
<p><a href="#icinga2-integration">Icinga2 forwarder</a></p>
</li>
<li>
<p><a href="#check_mk">Check_MK</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Sakuli can also be integrated in <strong>continuous integration</strong> environments like <a href="#jenkins-integration">Jenkins</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_headless_checks"><a class="anchor" href="#_headless_checks"></a>Headless checks</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/native/linux-native-headless.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/native/linux-native-headless.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Running Sakuli on the user desktop is nice, but has the drawback that the session gets highjacked on each Sakuli run. Moving the mouse e.g. can have negative effects on the test execution.</p>
</div>
<div class="paragraph">
<p>For that reason we advise to run Linux based Sakuli checks in in one of the following modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in a virtual display (="headless"), which is straightforward in Linux (documented on this page)</p>
</li>
<li>
<p>in <a href="#docker-images">Docker containers</a> (more scalable)</p>
</li>
</ul>
</div>
<div class="sect6">
<h7 id="_installing_and_configuring_the_vnc_server"><a class="anchor" href="#_installing_and_configuring_the_vnc_server"></a>Installing and configuring the VNC server</h7>
<div class="paragraph">
<p>On <strong>Ubuntu</strong>, first <strong>install</strong> vnc4server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo apt-get install vnc4server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start vncserver for the first time to create a <strong>session password</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ vncserver

You will require a password to access your desktops.
Password:
Verify:

New 'sakulidemo:1 (sakuli)' desktop is sakulidemo:1

Creating default startup script __HOME__/.vnc/xstartup
Starting applications specified in __HOME__/.vnc/xstartup
Log file is __HOME__/.vnc/sakulidemo:1.log</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>.vnc/xstartup</code> controls what to start within a xvnc session. Do not touch this file on OpenSUSE; on <strong>Ubuntu</strong> you have to replace its content with the following lines (because you are using <a href="#gnome-session-flashback">Install GNOME session flashback theme</a>, aren&#8217;t you…?):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ vim .vnc/xstartup

#!/bin/sh
export XKL_XMODMAP_DISABLE=1
unset SESSION_MANAGER
unset DBUS_SESSION_BUS_ADDRESS

gnome-panel &amp;
gnome-settings-daemon &amp;
metacity &amp;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Restart the current vnc sesssion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ vncserver -kill :1 &amp;&amp; vncserver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now open a RDP client (on Ubuntu: <em>Applications - Internet - Remmina Remote Desktop Client</em>) and enter the connection data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Protocol: VNC</p>
</li>
<li>
<p>Server: localhost:5901</p>
</li>
<li>
<p>Password: <code><em>VNC_SESSION_PASSWORD</em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You should see now an empty GNOME/KDE desktop - started headless!</p>
</div>
</div>
<div class="sect6">
<h7 id="_test_3"><a class="anchor" href="#_test_3"></a>Test</h7>
<div class="paragraph">
<p>You are now ready to run the <strong>minimal Sakuli check</strong> in <strong>headless (=VNC)</strong> mode. Sakuli provides for this task a pre- and postHook script, which can be used like follow:</p>
</div>
<div class="paragraph">
<p>On the <strong>Ubuntu</strong> desktop, open a terminal window and execute</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on <strong>Ubuntu</strong>: <code>sakuli run <em>INST_DIR</em>/example_test_suites/example_ubuntu/ --vnc</code></p>
</li>
<li>
<p>on <strong>openSUSE</strong>: <code><em>SAKULI_HOME</em>/bin/sakuli.sh --run <em>INST_DIR</em>/example_test_suites/example_opensuse/ --vnc</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You should see that Sakuli</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>opens <strong>Firefox</strong></p>
</li>
<li>
<p>opens the <strong>calculator</strong> and calculates <em>525+100=625</em></p>
</li>
<li>
<p>opens an <strong>editor</strong> and writes a <strong>status message</strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/u_vnc_test.png" alt="vnc test example"></span></p>
</div>
</div>
<div class="sect6">
<h7 id="_scheduling_by_cron"><a class="anchor" href="#_scheduling_by_cron"></a>Scheduling by cron</h7>
<div class="paragraph">
<p>Add the following line to Sakuli&#8217;s crontab:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">SAKULI_HOME=__SAKULI_HOME__
DISPLAY=:1

*/2 * * * * $SAKULI_HOME/bin/sakuli run $SAKULI_HOME/../example_test_suites/example_ubuntu -preHook $SAKULI_HOME/bin/helper/vnc.sh -postHook '$SAKULI_HOME/bin/helper/vnc.sh -kill' 2&gt;&amp;1 &gt; /dev/null</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="linux-troubleshooting"><a class="anchor" href="#linux-troubleshooting"></a>Troubleshooting</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/native/linux-troubleshooting.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/native/linux-troubleshooting.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>If you have some errors with your Linux installation, you can check the following points:</p>
</div>
<div class="sect6">
<h7 id="gnome-session-flashback"><a class="anchor" href="#gnome-session-flashback"></a>Install GNOME session flashback theme</h7>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Before Ubuntu 16.04 the package name was <code>gnome-session-fallback</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sakuli can test on Unity, of course - but <a href="https://wiki.ubuntuusers.de/GNOME_Flashback">gnome-session-flashback</a> is more than sufficient and has the advantage that 3D effects and shadowing won&#8217;t break your test.</p>
</div>
<div class="paragraph">
<p>Install and set <code>gnome-seesion-flashback</code> as default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">    apt-get update
    apt-get install -y gnome-session-flashback
    echo &quot;[SeatDefaults]&quot; &gt;&gt; /etc/lightdm/lightdm.conf
    echo &quot;user-session=gnome-flashback-metacity&quot; &gt;&gt; /etc/lightdm/lightdm.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the installation, relogin/restart and ensure that the desktop environment <strong>GNOME Flashback (Metacity)</strong> is selected:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/u_theme_select.jpg" alt="fallback"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/u_flashback.jpg" alt="flashback"></span></p>
</div>
<div class="paragraph">
<p>The Ubuntu menu bar should have changed now to the "classical" one:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/u_menu.jpg" alt="menu"></span></p>
</div>
</div>
<div class="sect6">
<h7 id="_restore_gsettings_key_bindings"><a class="anchor" href="#_restore_gsettings_key_bindings"></a>Restore gsettings key bindings</h7>
<div class="paragraph">
<p>In headless checks you will encounter problems using the <code>TAB</code> key as well as <code>s</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The TAB key will switch applications (like <code>ALT + TAB</code>)</p>
</li>
<li>
<p><code>s</code> will open the applications menu</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For some reason (?), gsettings binds <code>s</code> and <code>TAB</code> to the <code>Super key</code> by default. Open a terminal as the Sakuli user and execute the following commands to restore that to the default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>gsettings set org.gnome.desktop.wm.keybindings switch-applications "['&lt;Alt&gt;Tab']"
gsettings set org.gnome.desktop.wm.keybindings panel-main-menu "['&lt;Alt&gt;F1']"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="upgrade_process"><a class="anchor" href="#upgrade_process"></a>1.2.1.3. Upgrade process</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/native/upgrade-process.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/native/upgrade-process.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Before you upgrade your current Sakuli installation, please ensure that you have read the <a href="#changelog">Change Log</a>.</p>
</div>
<div class="paragraph">
<p>Execute <code><em>SAKULI_HOME</em>/../Uninstaller/uninstaller.jar</code> to remove the current installed version. This will only affect the files in <code><em>SAKULI_HOME</em></code>. The uninstaller removes all installed files, and resets the environment configuration.</p>
</div>
<div class="paragraph">
<p>After that just install the new version.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="maven-execution"><a class="anchor" href="#maven-execution"></a>1.2.2. Maven Execution</h4>
<div class="sect4">
<h5 id="sakuli-java-dsl"><a class="anchor" href="#sakuli-java-dsl"></a>1.2.2.1. Sakuli Java DSL</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/maven/java-DSL.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/maven/java-DSL.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Sakuli provides a Java DSL for writing test cases in pure Java. The DSL is designed as fluent API and provides the exact same capabilities as the Javascript API. The Sakuli Java API enables users to write Sakuli tests in pure Java unit tests using JUnit or TestNG. The good news about that is that you are able to access any native application UI with screen related actions as easy as in JavaScript API.</p>
</div>
<div class="sect5">
<h6 id="_installation_3"><a class="anchor" href="#_installation_3"></a>Installation</h6>
<div class="sect6">
<h7 id="_preparation"><a class="anchor" href="#_preparation"></a>Preparation</h7>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that all installation packages for target OS are installed:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#linux">Linux Client</a></p>
</li>
<li>
<p><a href="#windows">Windows Client</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Install Java Development Kit version 8.</p>
</li>
<li>
<p>Install Maven (Version 3.2.5 or higher).</p>
</li>
<li>
<p>Download <code>java-example</code> directory from <a href="https://github.com/ConSol/sakuli-examples/tree/master/java-example">github.com/ConSol/sakuli-examples</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect6">
<h7 id="_project_setup_and_compilation"><a class="anchor" href="#_project_setup_and_compilation"></a>Project setup and compilation</h7>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Import <code>java-example</code> to IDE (IntelliJ or Eclipse…) as Maven project:
<strong>Example for IntelliJ:</strong></p>
</li>
<li>
<p>Choose <code>Project from Existing Sources&#8230;&#8203;</code> in File menu.</p>
</li>
<li>
<p>Choose <code>pom.xml</code> and click <code>next</code> button till the project is imported.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Try to <strong>compile</strong> the new Sakuli Maven project. If an <strong>ERROR</strong> is reported please check your <code>pom.xml</code> first. The following section has to be present in your Maven POM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;repository&gt;</span>
    <span class="tag">&lt;id&gt;</span>labs-consol-snapshots<span class="tag">&lt;/id&gt;</span>
    <span class="tag">&lt;name&gt;</span>ConSol* Labs Repository<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;url&gt;</span>http://labs.consol.de/maven/snapshots-repository<span class="tag">&lt;/url&gt;</span>
    <span class="tag">&lt;snapshots&gt;</span>
        <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span>
    <span class="tag">&lt;/snapshots&gt;</span>
    <span class="tag">&lt;releases&gt;</span>
        <span class="tag">&lt;enabled&gt;</span>false<span class="tag">&lt;/enabled&gt;</span>
    <span class="tag">&lt;/releases&gt;</span>
<span class="tag">&lt;/repository&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConSol labs Maven repository should be placed to the <strong>repositories</strong> section in your POM.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h6>
<div class="paragraph">
<p>The Sakuli Java DSL comes to you as Maven module JAR file. You can add the module to your Sakuli project as Maven dependency. Currently the Java tests have to be written with the <a href="http://testng.org">TestNG</a> unit framework, so also provide the <a href="http://testng.org">TestNG</a> Maven dependency in your project POM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;dependencies&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.sakuli<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>java-dsl<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${sakuli.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="comment">&lt;!-- needed for AbstractSakuliTest class --&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.sakuli<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>java-dsl<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${sakuli.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;type&gt;</span>test-jar<span class="tag">&lt;/type&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.testng<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>testng<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${testng.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the last step, we have to provide also some local resources for our Sakuli test setup. Therefore we use the <a href="https://maven.apache.org/plugins/maven-dependency-plugin">maven-dependency-plugin</a> to unpack all needed Sakuli resources to our local <code>project.build.outputDirectory</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;build&gt;</span>
        <span class="tag">&lt;plugins&gt;</span>
            <span class="tag">&lt;plugin&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;executions&gt;</span>
                    <span class="tag">&lt;execution&gt;</span>
                        <span class="tag">&lt;id&gt;</span>unpack<span class="tag">&lt;/id&gt;</span>
                        <span class="tag">&lt;phase&gt;</span>generate-resources<span class="tag">&lt;/phase&gt;</span>
                        <span class="tag">&lt;goals&gt;</span>
                            <span class="tag">&lt;goal&gt;</span>unpack<span class="tag">&lt;/goal&gt;</span>
                        <span class="tag">&lt;/goals&gt;</span>
                        <span class="tag">&lt;configuration&gt;</span>
                            <span class="tag">&lt;artifactItems&gt;</span>
                                <span class="tag">&lt;artifactItem&gt;</span>
                                    <span class="tag">&lt;groupId&gt;</span>org.sakuli<span class="tag">&lt;/groupId&gt;</span>
                                    <span class="tag">&lt;artifactId&gt;</span>java-dsl<span class="tag">&lt;/artifactId&gt;</span>
                                    <span class="tag">&lt;version&gt;</span>${sakuli.version}<span class="tag">&lt;/version&gt;</span>
                                    <span class="tag">&lt;type&gt;</span>jar<span class="tag">&lt;/type&gt;</span>
                                    <span class="tag">&lt;overWrite&gt;</span>true<span class="tag">&lt;/overWrite&gt;</span>
                                <span class="tag">&lt;/artifactItem&gt;</span>
                            <span class="tag">&lt;/artifactItems&gt;</span>
                            <span class="tag">&lt;outputDirectory&gt;</span>${project.build.outputDirectory}<span class="tag">&lt;/outputDirectory&gt;</span>
                        <span class="tag">&lt;/configuration&gt;</span>
                    <span class="tag">&lt;/execution&gt;</span>
                <span class="tag">&lt;/executions&gt;</span>
            <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;/plugins&gt;</span>
    <span class="tag">&lt;/build&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we are ready to write Java tests. See the following sample test which uses TestNG unit testing library in combination with Sakuli Java DSL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="directive">public</span> <span class="type">class</span> <span class="class">FirstExampleTest</span> <span class="directive">extends</span> AbstractSakuliTest {

            Environment env;

            <span class="annotation">@BeforeClass</span>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> initTC() <span class="directive">throws</span> <span class="exception">Exception</span> {
                <span class="local-variable">super</span>.initTC();
                env = <span class="keyword">new</span> Environment();
            }

            <span class="annotation">@Override</span>
            <span class="directive">protected</span> TestCaseInitParameter getTestCaseInitParameter() <span class="directive">throws</span> <span class="exception">Exception</span> {
                <span class="keyword">return</span> <span class="keyword">new</span> TestCaseInitParameter(<span class="string"><span class="delimiter">&quot;</span><span class="content">test1</span><span class="delimiter">&quot;</span></span>);
            }

            <span class="annotation">@Test</span>
            <span class="directive">public</span> <span class="type">void</span> testCitrus() <span class="directive">throws</span> <span class="exception">Exception</span> {
                browser.open();
                browser.navigateTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.citrusframework.org/</span><span class="delimiter">&quot;</span></span>);

                ElementStub heading1 = browser.paragraph(<span class="string"><span class="delimiter">&quot;</span><span class="content">Citrus Integration Testing</span><span class="delimiter">&quot;</span></span>);
                heading1.highlight();
                assertTrue(heading1.isVisible());

                ElementStub download = browser.link(<span class="string"><span class="delimiter">&quot;</span><span class="content">/Download v.*/</span><span class="delimiter">&quot;</span></span>);
                download.highlight();
                assertTrue(download.isVisible());
                download.click();

                ElementStub downloadLink = browser.cell(<span class="string"><span class="delimiter">&quot;</span><span class="content">2.6.1</span><span class="delimiter">&quot;</span></span>);
                downloadLink.highlight();
                assertTrue(downloadLink.isVisible());
            }
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>All people that are familiar with TestNG unit testing will notice that a Sakuli Java test is nothing but a normal TestNG
unit test. Sakuli just adds the end-to-end testing capabilities. The test class extends an abstract class coming from Sakuli.
This <code>AbstractSakuliTest</code> provides convenient access to the Sakuli Java DSL API.</p>
</div>
<div class="paragraph">
<p>These are methods such as <code>initTC()</code> and <code>getTestCaseInitParameter()</code> that are customizable in test classes. Just
overwrite the methods and add custom logic. In addition to that the abstract super class in Sakuli provides access to the
<code>browser</code> field that represents the Sahi web browser capabilities. This browser object is used in the test cases to trigger
Sahi related actions such as opening a website and highlighting links or buttons.</p>
</div>
<div class="paragraph">
<p>In the example above we open a website <strong><a href="http://www.citrusframework.org/" class="bare">http://www.citrusframework.org/</a></strong> and assert the content on that page. In the example above we open a website <strong><a href="http://www.citrusframework.org/" class="bare">http://www.citrusframework.org/</a></strong> and assert the content on that page.</p>
</div>
<div class="paragraph">
<p>Now lets add some testing logic that works with content other than HTML dom related content. We add a test step that puts
focus to the web browser task bar. In detail we click into the browser search input field, fill in a word and perform the search.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="keyword">new</span> <span class="predefined-type">Region</span>().find(<span class="string"><span class="delimiter">&quot;</span><span class="content">search</span><span class="delimiter">&quot;</span></span>).click().type(<span class="string"><span class="delimiter">&quot;</span><span class="content">Citrus</span><span class="delimiter">&quot;</span></span>);
        env.sleep(<span class="integer">1</span>);
        <span class="keyword">new</span> <span class="predefined-type">Region</span>().takeScreenshot(<span class="string"><span class="delimiter">&quot;</span><span class="content">test.png</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>region</code> object provides access to Sakuli screen related actions such as finding a component on the screen. We can click that region
and fill in some characters (e.g. in the search input field). After that we sleep some time to give the search operation some
time to perform its actions. As a last step we take a screenshot of the result page and the test is finished.</p>
</div>
<div class="paragraph">
<p>This little example demonstrates the basic usage of the Sakuli Java API. We write normal Java unit tests with TestNG and
add Sakuli specific actions on HTML dom content in a browser or any native application operations by screen related access.</p>
</div>
<div class="paragraph">
<p>Next we will setup a complete sample project for Sakuli Java.</p>
</div>
</div>
<div class="sect5">
<h6 id="_sakuli_java_example"><a class="anchor" href="#_sakuli_java_example"></a>Sakuli Java Example</h6>
<div class="paragraph">
<p>The next section describes how to get started with the Sakuli Java DSL by example. The Java example is a fully runnable Java
sample test case. So at the end of this chapter you should be able to start writing Sakuli test in pure Java.</p>
</div>
<div class="paragraph">
<p>An example how to use Java DSL and setup Maven you will find at:
<strong><a href="https://github.com/ConSol/sakuli-examples/tree/master/java-example">github.com/ConSol/sakuli-examples</a></strong></p>
</div>
<div class="paragraph">
<p>After this is done please execute the Maven <strong>compile</strong> phase.</p>
</div>
<div class="sect6">
<h7 id="_test_execute"><a class="anchor" href="#_test_execute"></a>Test execute</h7>
<div class="paragraph">
<p>Once compilation has been <strong>SUCCESS</strong> try to execute <strong>test</strong> phase as a next step.</p>
</div>
</div>
<div class="sect6">
<h7 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h7>
<div class="paragraph">
<p>For customized browser detection create your own <code>browser_types.xml</code> file. This file should be located in <code>main/resources/sahi/userdata/config</code> package in <code>src</code> folder.
The content of this file looks like follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;browserTypes&gt;</span>
        <span class="tag">&lt;browserType&gt;</span>
            <span class="tag">&lt;name&gt;</span>firefox<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;displayName&gt;</span>Firefox<span class="tag">&lt;/displayName&gt;</span>
            <span class="tag">&lt;icon&gt;</span>firefox.png<span class="tag">&lt;/icon&gt;</span>
            <span class="tag">&lt;path&gt;</span>$ProgramFiles (x86)\Mozilla Firefox\firefox.exe<span class="tag">&lt;/path&gt;</span>
            <span class="tag">&lt;options&gt;</span>-profile &quot;$userDir/browser/ff/profiles/sahi$threadNo&quot; -no-remote<span class="tag">&lt;/options&gt;</span>
            <span class="tag">&lt;processName&gt;</span>firefox.exe<span class="tag">&lt;/processName&gt;</span>
            <span class="tag">&lt;capacity&gt;</span>5<span class="tag">&lt;/capacity&gt;</span>
        <span class="tag">&lt;/browserType&gt;</span>

        <span class="tag">&lt;browserType&gt;</span>
            <span class="tag">&lt;name&gt;</span>ie<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;displayName&gt;</span>IE<span class="tag">&lt;/displayName&gt;</span>
            <span class="tag">&lt;icon&gt;</span>ie.png<span class="tag">&lt;/icon&gt;</span>
            <span class="tag">&lt;path&gt;</span>$ProgramFiles\Internet Explorer\iexplore.exe<span class="tag">&lt;/path&gt;</span>
            <span class="tag">&lt;options&gt;</span>-noframemerging<span class="tag">&lt;/options&gt;</span>
            <span class="tag">&lt;processName&gt;</span>iexplore.exe<span class="tag">&lt;/processName&gt;</span>
            <span class="tag">&lt;useSystemProxy&gt;</span>true<span class="tag">&lt;/useSystemProxy&gt;</span>
            <span class="tag">&lt;capacity&gt;</span>5<span class="tag">&lt;/capacity&gt;</span>
        <span class="tag">&lt;/browserType&gt;</span>

        <span class="tag">&lt;browserType&gt;</span>
            <span class="tag">&lt;name&gt;</span>chrome<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;displayName&gt;</span>Chrome<span class="tag">&lt;/displayName&gt;</span>
            <span class="tag">&lt;icon&gt;</span>chrome.png<span class="tag">&lt;/icon&gt;</span>
            <span class="tag">&lt;path&gt;</span>C:\Program Files (x86)\Google\Chrome\Application\chrome.exe<span class="tag">&lt;/path&gt;</span>
            <span class="tag">&lt;options&gt;</span>--incognito --user-data-dir=$userDir\browser\chrome\profiles\sahi$threadNo --proxy-server=localhost:9999 --disable-popup-blocking<span class="tag">&lt;/options&gt;</span>
            <span class="tag">&lt;processName&gt;</span>chrome.exe<span class="tag">&lt;/processName&gt;</span>
            <span class="tag">&lt;capacity&gt;</span>5<span class="tag">&lt;/capacity&gt;</span>
        <span class="tag">&lt;/browserType&gt;</span>

        <span class="tag">&lt;browserType&gt;</span>
            <span class="tag">&lt;name&gt;</span>safari<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;displayName&gt;</span>Safari<span class="tag">&lt;/displayName&gt;</span>
            <span class="tag">&lt;icon&gt;</span>safari.png<span class="tag">&lt;/icon&gt;</span>
            <span class="tag">&lt;path&gt;</span>$ProgramFiles (x86)\Safari\Safari.exe<span class="tag">&lt;/path&gt;</span>
            <span class="tag">&lt;options&gt;</span> <span class="tag">&lt;/options&gt;</span>
            <span class="tag">&lt;processName&gt;</span>safari.exe<span class="tag">&lt;/processName&gt;</span>
            <span class="tag">&lt;useSystemProxy&gt;</span>true<span class="tag">&lt;/useSystemProxy&gt;</span>
            <span class="tag">&lt;capacity&gt;</span>1<span class="tag">&lt;/capacity&gt;</span>
        <span class="tag">&lt;/browserType&gt;</span>

        <span class="tag">&lt;browserType&gt;</span>
            <span class="tag">&lt;name&gt;</span>opera<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;displayName&gt;</span>Opera<span class="tag">&lt;/displayName&gt;</span>
            <span class="tag">&lt;icon&gt;</span>opera.png<span class="tag">&lt;/icon&gt;</span>
            <span class="tag">&lt;path&gt;</span>$ProgramFiles (x86)\Opera\opera.exe<span class="tag">&lt;/path&gt;</span>
            <span class="tag">&lt;options&gt;</span> <span class="tag">&lt;/options&gt;</span>
            <span class="tag">&lt;processName&gt;</span>opera.exe<span class="tag">&lt;/processName&gt;</span>
            <span class="tag">&lt;useSystemProxy&gt;</span>true<span class="tag">&lt;/useSystemProxy&gt;</span>
            <span class="tag">&lt;capacity&gt;</span>1<span class="tag">&lt;/capacity&gt;</span>
        <span class="tag">&lt;/browserType&gt;</span>

    <span class="tag">&lt;/browserTypes&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If needed change the &lt;path&gt; for your own locations of each browser!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now you can execute <strong>test</strong> phase and enjoy the successful execution of the test.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="java-dsl-https"><a class="anchor" href="#java-dsl-https"></a>HTTPS-Sites</h6>
<div class="paragraph">
<p>As workaround for issue <a href="https://github.com/ConSol/sakuli/issues/131">#131</a> you can follow the instructions of <a href="#sahi-https">HTTPS support in Sahi</a> and copy afterwards the files from <code>java-example/target/classes/sahi/userdata/certs</code> to <code>java-example/src/main/resources/sahi/userdata/certs</code>. This will copy the trusted certificates when building the project and allows a clean run. Also see <a href="#sahi-https-automatic-certificate-usage">Automatic HTTPS Certificate Usage</a> which files have to been copied for running the tests on different host.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="containerized-execution"><a class="anchor" href="#containerized-execution"></a>1.2.3. Containerized Execution</h4>
<div class="sect4">
<h5 id="docker-images"><a class="anchor" href="#docker-images"></a>1.2.3.1. Sakuli Docker Images</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/containerized/docker-images.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/containerized/docker-images.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Docker allows you to run a Sakuli test in an isolated environment, called "container", which is always started off from the same base image. This ensures that tests always run under equal conditions.</p>
</div>
<div class="sect5">
<h6 id="docker-image-os-types"><a class="anchor" href="#docker-image-os-types"></a>Image OS types</h6>
<div class="paragraph">
<p>The repository&#8217;s subfolder <a href="https://github.com/ConSol/sakuli/tree/master/docker"><code>./docker</code></a> contains all source files Sakuli docker images are made of. Currently we provide images on <a href="https://hub.docker.com/search/?isAutomated=0&amp;isOfficial=0&amp;page=1&amp;pullCount=0&amp;q=sakuli-&amp;starCount=0">DockerHub - Sakuli Images</a> for:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Docker image</th>
<th class="tableblock halign-left valign-top">OS</th>
<th class="tableblock halign-left valign-top">UI</th>
<th class="tableblock halign-left valign-top">Test execution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consol/sakuli-centos-xfce</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CentOS 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xfce4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests in JavaScript (Rhino Engine)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consol/sakuli-centos-xfce-java</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CentOS 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xfce4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java 8, Maven, TestNG-Test</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consol/sakuli-ubuntu-xfce</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ubuntu 16.04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xfce4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests in JavaScript (Rhino Engine)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consol/sakuli-ubuntu-xfce-java</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ubuntu 16.04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xfce4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java 8, Maven, TestNG-Test</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consol/sakuli-centos-icewm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CentOS 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IceWM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests in JavaScript (Rhino Engine)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consol/sakuli-centos-icewm-java</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CentOS 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IceWM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java 8, Maven, TestNG-Test</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consol/sakuli-ubuntu-icewm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ubuntu 16.04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IceWM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests in JavaScript (Rhino Engine)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>consol/sakuli-ubuntu-icewm-java</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ubuntu 16.04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IceWm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java 8, Maven, TestNG-Test</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="docker-image-tags"><a class="anchor" href="#docker-image-tags"></a>Image tags</h6>
<div class="paragraph">
<p>The build process on DockerHub is triggered by Github hooks; that means that you are always getting the current version for the two branches</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>master</strong> -&gt; image tag "<strong>latest</strong>": contains the latest stable release of Sakuli</p>
</li>
<li>
<p><strong>dev</strong> -&gt; image tag "<strong>dev</strong>": contains the latest snapshot version of Sakuli</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="docker-image-architecture"><a class="anchor" href="#docker-image-architecture"></a>Architecture of Sakuli Containers</h6>
<div class="paragraph">
<p>Each Sakuli docker image is installed with the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Desktop environment (<a href="http://www.xfce.org"><strong>Xfce4</strong></a>)</p>
</li>
<li>
<p>VNC-Server (default VNC port <code>5901</code>)</p>
</li>
<li>
<p><a href="https://github.com/kanaka/noVNC"><strong>noVNC</strong></a> - HTML5 VNC client (default http port <code>6901</code>)</p>
</li>
<li>
<p>Java JRE 8</p>
</li>
<li>
<p>Browsers:</p>
<div class="ulist">
<ul>
<li>
<p>Mozilla Firefox + Java Plugin</p>
</li>
<li>
<p>Google Chrome (Java-Plugin is no longer supported)</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://sahi.co.in"><strong>Sahi OS 5</strong></a></p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli"><strong>Sakuli</strong></a> in the latest stable version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since version <code>1.1.0</code> all containers run as non-root user.
The running containers are accessible with VNC (default password: <code>sakuli</code>) by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>VNC viewer</strong>: <code>DOCKER_HOST:5901</code></p>
</li>
<li>
<p><strong>noVNC HTML5 full client</strong>: link: <a href="http://localhost:6901/vnc.html" class="bare">http://localhost:6901/vnc.html</a></p>
</li>
<li>
<p><strong>noVNC HTML5 lite client</strong>: link: <a href="http://localhost:6901/?password=sakuli" class="bare">http://localhost:6901/?password=sakuli</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="docker-images-get-images"><a class="anchor" href="#docker-images-get-images"></a>Get Sakuli Docker Images</h6>
<div class="paragraph">
<p>The following example command pulls the CentOS7 image from <a href="https://hub.docker.com/r/consol/sakuli-centos-xfce/">DockerHub</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ docker pull consol/sakuli-centos-xfce</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can build this image from the sources:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ git clone https://github.com/ConSol/sakuli.git
~$ docker build -t consol/sakuli-centos-xfce docker/sakuli-centos-xfce .</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Start/test a Sakuli container</div>
<p>Once you have pulled/built the image, you can start a container on top of it which binds port <code>5901/tcp</code> and <code>6901/tcp</code> to localhost (on native docker installations; $DOCKER_IP on boot2docker):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># default tag &quot;latest&quot; = Sakuli stable
~$ docker run -it -p 5901:5901 -p 6901:6901 consol/sakuli-centos-xfce
# tag &quot;dev&quot; = Sakuli Snapshot version of dev branch
~$ docker run -it -p 5901:5901 -p 6901:6901 consol/sakuli-centos-xfce:dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>The container will execute a small headless self-test and exit afterwards. Read on to learn how to execute your own JavaScript or Java based tests within this containers.</p>
</div>
</div>
<div class="sect5">
<h6 id="docker-javascript-based-test"><a class="anchor" href="#docker-javascript-based-test"></a>Run JavaScript based Test</h6>
<div class="paragraph">
<p>There are three important lines in the <code>Dockerfile</code> of each Sakuli image which define what has to be done on a container start:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Dockerfile">ENV SAKULI_TEST_SUITE $SAKULI_ROOT/test
ENTRYPOINT [&quot;/dockerstartup/startup.sh&quot;]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ENTRYPOINT</code> is the command which is executed once the container is started with <code>docker run</code>.</p>
</li>
<li>
<p><code>ENV SAKULI_TEST_SUITE</code> is set to the path of a test suite which has to run when the container starts. By default, this is set to the built-in folder <code>/headless/sakuli/test</code> which contains already a small example.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is more than one way to integrate a custom testsuite in a container, discussed in the following.</p>
</div>
<div class="paragraph">
<p>Assume you want to run a suite called <code>suite_1</code> located on your host at the path <code>/home/myuser/my-sakuli-testsuites</code> - use one of the following ways:</p>
</div>
<div class="sect6">
<h7 id="docker-run-command"><a class="anchor" href="#docker-run-command"></a>docker run command</h7>
<div class="paragraph">
<p>Mount the suite folder on your host into the container and override <code>CMD</code> from Dockerfile (=argument for <code>ENTRYPOINT</code>) with custom parameters for the Sakuli starter <code>sakuli</code>. In this way you can also give further parameters to Sakuli e.g. to use another browser (<code>-browser chrome</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># running tests in chrome
~$ docker run -it -p 5901:5901 -p 6901:6901 consol/sakuli-centos-xfce run /headless/sakuli/test -browser chrome</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get all possible command line parameters call <code>docker run consol/sakuli-ubuntu-xfce -help</code>.</p>
</div>
<div class="paragraph">
<p>CMD can be overwritten in two ways:</p>
</div>
<div class="listingblock">
<div class="title">1) Using the command line</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ docker run -it -p 5901:5901 -p 6901:6901 -v &quot;/home/myuser/my-sakuli-testsuites:/my-sakuli-testsuites&quot; consol/sakuli-centos-xfce 'run /my-sakuli-testsuites/suite_1'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will</p>
</div>
<div class="ulist">
<ul>
<li>
<p>mount the test suites folder to <code>/my-sakuli-testsuites</code> within the container</p>
</li>
<li>
<p>execute the suite <code>suite_1</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">2) Using docker-compose</div>
<p>See <a href="#docker-compose-run-command">docker run command</a>.</p>
</div>
</div>
<div class="sect6">
<h7 id="docker-environmen-variable"><a class="anchor" href="#docker-environmen-variable"></a>Environment variable <code>SAKULI_TEST_SUITE</code></h7>
<div class="paragraph">
<p>Mount a folder on your host into the container and overwrite the environment variable <code>SAKULI_TEST_SUITE</code>.</p>
</div>
<div class="listingblock">
<div class="title">1) Using the command line</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ docker run -it -p 5901:5901 -p 6901:6901   \\
     -v &quot;/home/myuser/my-sakuli-testsuites:/my-sakuli-testsuites&quot;   \\
     -e &quot;SAKULI_TEST_SUITE=/my-sakuli-testsuites/suite_1&quot;   \\
     consol/sakuli-ubuntu-xfce</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">2) Using docker-compose</div>
<p>See <a href="#docker-compose-environmen-variable">Environment variable SAKULI_TEST_SUITE</a>.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="docker-java-based-test"><a class="anchor" href="#docker-java-based-test"></a>Run Java based test</h6>
<div class="paragraph">
<p>Also for Sakuli test writen in Java and executed through <a href="https://maven.apache.org">Maven</a>, we provide to preconfigured docker images: <a href="https://hub.docker.com/search/?isAutomated=0&amp;isOfficial=0&amp;page=1&amp;pullCount=0&amp;q=sakuli-java&amp;starCount=0">consol/sakuli-xxx-xxx-java</a>. For more information about how to write a Java based Sakuli test see <a href="#sakuli-java-dsl">Sakuli Java DSL</a>. Now take a look at the important lines in the <em>Dockerfile</em> which define how the container will start:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Dockerfile">ENV SAKULI_TEST_SUITE /opt/maven
WORKDIR $SAKULI_TEST_SUITE
ENTRYPOINT [&quot;/root/scripts/start_hook.sh&quot;]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ENV SAKULI_TEST_SUITE</code> is set to the path of a test suite which has to run when the container starts. By default, this is set to <code>/opt/maven</code> which contains already a small example.</p>
</li>
<li>
<p><code>WORKDIR</code> is set to the path, where the maven build will be executed. By default, this is set to the built-in example folder <code>/opt/maven</code>.</p>
</li>
<li>
<p><code>ENTRYPOINT</code> is the script which is executed once the container is started with <code>docker run</code>. It starts the vnc environment and executes by default <code>mvn clean test</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Assume you want to run the Sakuli end-2-end test from your Maven project located at the path <code>/home/myuser/my-sakuli-maven-project</code> you can executed the Maven build in the inside of the Sakuli container like follow:</p>
</div>
<div class="listingblock">
<div class="title">1) Using the command line</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ docker run -it -p 5901:5901 -p 6901:6901 -v /home/myuser/my-sakuli-maven-project:/opt/maven consol/sakuli-ubuntu-xfce-java</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will</p>
</div>
<div class="ulist">
<ul>
<li>
<p>mount the test suites folder to <code>/home/myuser/my-sakuli-maven-project</code> within the container</p>
</li>
<li>
<p>execute the maven build with default command <code>mvn clean test</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to for example also build youre maven artifacts over <code>mvn install</code> overwrite the default command like follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ docker run -it -p 5901:5901 -p 6901:6901 -v /home/myuser/my-sakuli-maven-project:/opt/maven consol/sakuli-ubuntu-xfce-java mvn clean install</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">2) Using docker-compose</div>
<p>See <a href="#docker-compose-java-based-test">Run Java based test</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="docker-extend-a-image"><a class="anchor" href="#docker-extend-a-image"></a>Extend a Sakuli Image with your own software</h6>
<div class="paragraph">
<p>Since <code>1.1.0</code> the Sakuli image run as non-root user per default, so that mean, if you want to extend the image and install software, you have to switch in the <code>Dockerfile</code> back to the <code>root</code> user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">## Custom Dockerfile
FROM consol/sakuli-centos-xfce:v1.1.0

ENV REFRESHED_AT 2018-03-27
ENV TZ=Europe/Berlin

## Install a PDF viewer
USER 0
RUN yum install -y libsane-hpaio http://get.code-industry.net/public/master-pdf-editor-4.0.30_qt5.x86_64.rpm \
    &amp;&amp; yum clean all
## switch back to default user
USER 1000</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_change_user_of_running_sakuli_container"><a class="anchor" href="#_change_user_of_running_sakuli_container"></a>Change User of running Sakuli Container</h6>
<div class="paragraph">
<p>Per default, since version <code>1.2.0</code> all container processes will executed with user id <code>1000</code>. You can change the user id like follow:</p>
</div>
<div class="paragraph">
<div class="title">Using root (user id <code>0</code>)</div>
<p>Add the <code>--user</code> flag to your docker run command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>~$ docker run -it --user 0 -p 6911:6901 consol/sakuli-ubuntu-xfce</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Using user and group id of host system</div>
<p>Add the <code>--user</code> flag to your docker run command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>~$ docker run -it -p 6911:6901 --user $(id -u):$(id -g) consol/sakuli-ubuntu-xfce</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="docker-vnc-env-variables"><a class="anchor" href="#docker-vnc-env-variables"></a>Override VNC environment variables</h6>
<div class="paragraph">
<p>The following VNC environment variables can be overwritten at the <code>docker run</code> phase to customize your desktop environment inside the container:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VNC_COL_DEPTH</code>, default: <code>24</code></p>
</li>
<li>
<p><code>VNC_RESOLUTION</code>, default: <code>1280x1024</code></p>
</li>
<li>
<p><code>VNC_PW</code>, default: <code>sakuli</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the password for VNC could be set like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ docker run -it -p 5901:5901 -p 6901:6901 -e &quot;VNC_PW=my-new-password&quot;  \\
     consol/sakuli-ubuntu-xfce</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_create_screenhots_for_sakuli_tests"><a class="anchor" href="#_create_screenhots_for_sakuli_tests"></a>Create Screenhots for Sakuli tests</h6>
<div class="paragraph">
<p>Due to the fact, that your application under test is running in the container specific UI environment, it&#8217;s also recommend to create the screenhot snippets for the <a href="#sakuli-testdefintion">Sakuli Testdefinition</a> in the inside of the container. This prevent some issues with recognizing images because of bad image compression, see <a href="#image-recognition-problem">Sikuli does not recognize images</a>.</p>
</div>
<div class="sect6">
<h7 id="_use_code_takescreenshot_code_method"><a class="anchor" href="#_use_code_takescreenshot_code_method"></a>Use <code>takeScreenshot</code> method</h7>
<div class="paragraph">
<p>To get a new screenshot of some application window, you can modify you current test case and add for example the bellow code snippets of the method <a href="#Region.takeScreenshot">Region.takeScreenshot(filename)</a>:</p>
</div>
<div id="source" class="listingblock">
<div class="content">
<pre>//entire screen:
env.takeScreenshot("/tmp/my-screenshot.png");

//specific region
new RegionRectangle(0,0,100,100).takeScreenshot("/tmp/my-screenshot.png");

//extended region of an existing one
new Region().find("calculator-logo.png").grow(200,200).takeScreenshot("/tmp/my-screenshot.png");</pre>
</div>
</div>
<div class="paragraph">
<p>After the test suite run, you can copy out the created screenshot from docker container, if needed crop it with some image manipulating tool, and add it to our test suite.</p>
</div>
<div id="source" class="listingblock">
<div class="content">
<pre>~$ docker cp &lt;containter-id&gt;:/tmp/my-scrot-screenshot.png $(pwd)/my-testsuite/
~$ ls -la my-testsuite/</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_use_code_scrot_code_tool"><a class="anchor" href="#_use_code_scrot_code_tool"></a>Use <code>scrot</code> tool</h7>
<div class="paragraph">
<p>Before using <strong><a href="https://wiki.ubuntuusers.de/Scrot/">Scrot</a></strong> prepare your container UI like you will needed for the screenshot via VNC <code><a href="http://&lt;dockerhost&gt;:&lt;mapped-port&gt;/?password=sakuli" class="bare">http://&lt;dockerhost&gt;:&lt;mapped-port&gt;/?password=sakuli</a></code>. If you wan&#8217;t to stop the sakuli test execution on a particular point, just use the <a href="#Environment.sleep">Environment.sleep(seconds)</a> method:</p>
</div>
<div id="source" class="listingblock">
<div class="content">
<pre>    new Application("/usr/bin/gnome-calculator").open();
    env.sleep(Number.MAX_VALUE);</pre>
</div>
</div>
<div class="paragraph">
<p>The test case will stop at the above defined position. Then you can login to the container via <code>docker exec</code> and create a new screenshot with the <code>scrot &lt;filename&gt;</code> command. If you use the <code>scrot -s</code> flag you can select a rectangle, over the VNC control page <code><a href="http://&lt;docker-host&gt;:&lt;mapped-port&gt;/?password=sakuli" class="bare">http://&lt;docker-host&gt;:&lt;mapped-port&gt;/?password=sakuli</a></code>.</p>
</div>
<div id="source" class="listingblock">
<div class="content">
<pre>~$ docker exec -it &lt;container-id&gt; bash
~$ scrot -s /tmp/my-scrot-screenshot.png
~$ ls -la /tmp/*.png
-rw-rw-rw- 1 default root 35329 Aug 29 15:28 /tmp/my-scrot-screenshot.png</pre>
</div>
</div>
<div class="paragraph">
<p>Now you can copy out the created screenshot from docker container and add it to our test suite.</p>
</div>
<div id="source" class="listingblock">
<div class="content">
<pre>~$ docker cp &lt;containter-id&gt;:/tmp/my-scrot-screenshot.png $(pwd)/my-testsuite/</pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_view_only_vnc"><a class="anchor" href="#_view_only_vnc"></a>View only VNC</h6>
<div class="paragraph">
<p>To prevent unwanted control over the VNC connection, it&#8217;s possible to set environment variable <code>VNC_VIEW_ONLY=true</code>. If set the docker startup script will create a random cryptic password for the control connection and use the value of <code>VNC_PW</code> for the view only connection.</p>
</div>
<div id="source" class="listingblock">
<div class="content">
<pre>~$ docker run -it -p 6901:6901 -e VNC_VIEW_ONLY=true  consol/sakuli-ubuntu-xfce</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="docker-https-sahi"><a class="anchor" href="#docker-https-sahi"></a>Writing HTTPS Sahi web tests</h6>
<div class="paragraph">
<p>Depending on the Sahi proxy, Sakuli will break the HTTPS connections between the website and test engine. Due to that case it is necessary to import the URL specific self-signed certificates like described at <a href="#sahi-https">HTTPS support in Sahi</a>. In a containerized environment we need to prepare the browser before the tests starts with the expected certificates like described at <a href="#sahi-https-automatic-certificate-usage">Automatic HTTPS Certificate Usage</a>. For example if you use the Firefox browser you can do the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start your preferred Sakuli docker image with <code>docker run -it -p 6901:6901 consol/sakuli-ubuntu-xfce bash</code> to enter the container and connect into it by VNC <a href="http://localhost:6901/?password=sakuli" class="bare">http://localhost:6901/?password=sakuli</a></p>
</li>
<li>
<p>Start Sahi dashboard:</p>
<div class="literalblock">
<div class="content">
<pre>~$ cd $SAKULI_ROOT/sahi/userdata/bin &amp;&amp; ./start_dashboard.sh</pre>
</div>
</div>
</li>
<li>
<p>Create the firefox certificates for <a href="https://labs.consol.de" class="bare">https://labs.consol.de</a> like described at <a href="#sahi-https-accept-self-signed">Sahi HTTPS - Accept self-signed certificates</a></p>
</li>
<li>
<p>Now copy the following created files to a folder at your dockerhost:</p>
<div class="ulist">
<ul>
<li>
<p>Sahi fake certificates</p>
<div class="literalblock">
<div class="content">
<pre>~$ mkdir -p ssl_files
~$ export CONTAINER_ID=&lt;your-docker-container-id&gt;
~$ docker cp $CONTAINER_ID:/headless/sakuli/sahi/userdata/certs ssl_files/sahi_certs</pre>
</div>
</div>
</li>
<li>
<p>Firefox certificate store</p>
<div class="literalblock">
<div class="content">
<pre>~$ mkdir -p ssl_files/ff_profile
~$ docker cp $CONTAINER_ID:/headless/sakuli/sahi/userdata/browser/ff/profiles/sahi0/cert8.db ssl_files/ff_profile/
~$ docker cp $CONTAINER_ID:/headless/sakuli/sahi/userdata/browser/ff/profiles/sahi0/key3.db  ssl_files/ff_profile/
~$ docker cp $CONTAINER_ID:/headless/sakuli/sahi/userdata/browser/ff/profiles/sahi0/cert_override.txt ssl_files/ff_profile/</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>After this you should have the following structure:</p>
<div class="literalblock">
<div class="content">
<pre>~$ tree ssl_files
ssl_files
├── ff_profile
│   ├── cert8.db
│   ├── cert_override.txt
│   └── key3.db
└── sahi_certs
    ├── labs_consol_de
    ├── sahi_example_com
    ├── shavar_services_mozilla_com
    └── tiles_services_mozilla_com
2 directories, 7 files</pre>
</div>
</div>
</li>
<li>
<p>Update the permissions to ensure that the files can be read by container user:</p>
<div class="literalblock">
<div class="content">
<pre>~$ chmod a+rw ssl_files/</pre>
</div>
</div>
</li>
<li>
<p>At least you have just to add the files to the correct place in Docker image <code>Dockerfile</code>:</p>
<div class="literalblock">
<div class="content">
<pre>FROM consol/sakuli-ubuntu-xfce
### INSTALL sahi https certificats
COPY ssl_files/ff_profile $SAKULI_ROOT/sahi/config/ff_profile_template
COPY ssl_files/sahi_certs $SAKULI_ROOT/sahi/userdata/certs</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="docker-images-known-issues"><a class="anchor" href="#docker-images-known-issues"></a>Known Issues</h6>
<div class="sect6">
<h7 id="docker-images-known-issues-chromium-crash"><a class="anchor" href="#docker-images-known-issues-chromium-crash"></a>Chromium crashes</h7>
<div class="paragraph">
<p>According to <a href="https://github.com/ConSol/docker-headless-vnc-container">ConSol/docker-headless-vnc-container</a> issue <a href="https://github.com/ConSol/docker-headless-vnc-container/issues/53">Chromium crashes with high VNC_RESOLUTION #53</a> there is a problem when you use some graphic/work intensive websites in the Docker container (especially with high resolutions e.g. <code>1920x1080</code>). It can happen that Chromium crashes without any specific reason. The problem there is the too small <code>/dev/shm</code> size in the container. Currently there is no other way, as define this size on startup via <code>--shm-size</code> option, see <a href="https://github.com/ConSol/docker-headless-vnc-container/issues/53#issuecomment-347265977">ConSol/docker-headless-vnc-container #53 - Solution</a>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>docker run --shm-size=256m -it -p 6901:6901 -e VNC_RESOLUTION=1920x1080 consol/sakuli-centos-xfce run &lt;your-test-suite&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="docker-further-information"><a class="anchor" href="#docker-further-information"></a>Further Information</h6>
<div class="paragraph">
<p>Further information about the usage of Sakuli docker containers can be found at:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#openshift">OpenShift</a></p>
</li>
<li>
<p><a href="#kubernetes">Kubernetes</a></p>
</li>
<li>
<p><a href="https://github.com/ConSol/omd-labs-docker">Containerized OMD</a></p>
</li>
<li>
<p>Publications:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://jaxenter.de/sakuli-testing-monitoring-container-54374">JAXenter: End-2-End-Testing und -Monitoring im Container-Zeitalter</a></p>
</li>
<li>
<p><a href="https://www.informatik-aktuell.de/entwicklung/methoden/graphical-user-interface-gui-in-containern-testen.html">Informatik Aktuell: Software-Test im Container: So können Sie Graphical User Interfaces mit Docker und Sakuli testen</a></p>
</li>
<li>
<p><a href="https://labs.consol.de/sakuli/development/2016/10/14/sakuli-java-dsl.html">Containerized UI-Tests in Java with Sakuli and Docker</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Presentations:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://speakerdeck.com/toschneck/containerized-end-2-end-testing-containerdays-2016-in-hamburg">Containerized End-2-End-Testing - ContainerDays 2016 Hamburg</a></p>
</li>
<li>
<p><a href="https://rawgit.com/toschneck/presentation/sakuli-testautomation-day/index.html#/">Containerized End-2-End-Testing - ConSol CM Testing</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Example projects on GitHub:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ConSol/sakuli-examples">ConSol/sakuli-examples</a></p>
</li>
<li>
<p><a href="https://github.com/toschneck/sakuli-example-bakery-testing">toschneck/sakuli-example-bakery-testing</a></p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli-example-testautomation-day">ConSol/sakuli-example-testautomation-day</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="docker-compose"><a class="anchor" href="#docker-compose"></a>1.2.3.2. Docker Compose</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/containerized/docker-compose.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/containerized/docker-compose.adoc" target="_blank">edit</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Assume you want to run a suite called <code>suite_1</code> located on your host at the path <code>/home/myuser/my-sakuli-testsuites</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Like in all docker containers you can overwrite all environment variables in a <code>docker-compose.yml</code> like for example the <code>VNC_PW</code> (<a href="#docker-vnc-env-variables">Override VNC environment variables</a>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A more elegant way as using the <code>docker run</code> command to parameterize your container startup, is to pack all into a <a href="https://docs.docker.com/compose/">Docker Compose</a> file. You can create <code>docker-compose.yml</code> to integrate a custom testsuite in a container in the following ways:</p>
</div>
<div class="sect5">
<h6 id="docker-compose-javascripte-based-test"><a class="anchor" href="#docker-compose-javascripte-based-test"></a>Run JavaScript based test</h6>
<div class="sect6">
<h7 id="docker-compose-run-command"><a class="anchor" href="#docker-compose-run-command"></a>docker run command</h7>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
To have the correct working directory, place the <code>docker-compose.yml</code> under <code>/home/myuser/my-sakuli-testsuites</code>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">sakuli-example-ubuntu</span>:
  <span class="key">image</span>: <span class="string"><span class="content">consol/sakuli-centos-xfce</span></span>
  <span class="key">ports</span>:
  - <span class="string"><span class="content">5901:5901</span></span>
  - <span class="string"><span class="content">6901:6901</span></span>
  <span class="key">volumes</span>:
  - <span class="string"><span class="content">.:/my-sakuli-testsuites</span></span>
  <span class="key">command</span>: <span class="string"><span class="content">run /my-sakuli-testsuites/suite_1</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When executed in the same directory as <code>docker-compose.yml</code>, a simple <code>docker-compose up</code> will bring up all containers.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Intentionally, <code>docker-compose</code> is made to bring up environments with <em>multiple</em> containers which are linked together, but even with one container it eases the parameter handling.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>docker-compose up --force-recreate</code> removes all currently stopped and running containers before it starts the containers, which defined in the <code>docker-compose.yml</code>. Otherwise, if a normal <code>docker-compose up</code> will called again, the test execution will reattach the instance and the start the test execution again in the same container instance.
</td>
</tr>
</table>
</div>
</div>
<div class="sect6">
<h7 id="docker-compose-environmen-variable"><a class="anchor" href="#docker-compose-environmen-variable"></a>Environment variable SAKULI_TEST_SUITE</h7>
<div class="paragraph">
<p>Similar to <a href="#docker-compose-run-command">docker run command</a>, the file <code>docker-compose.yml</code> would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">sakuli-example-ubuntu</span>:
  <span class="key">image</span>: <span class="string"><span class="content">consol/sakuli-ubuntu-xfce</span></span>
  <span class="key">ports</span>:
  - <span class="string"><span class="content">5901:5901</span></span>
  - <span class="string"><span class="content">6901:6901</span></span>
  <span class="key">volumes</span>:
  - <span class="string"><span class="content">.:/my-sakuli-testsuites</span></span>
  <span class="key">environment</span>:
  - <span class="string"><span class="content">SAKULI_TEST_SUITE=/my-sakuli-testsuites/suite_1</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="docker-compose-java-based-test"><a class="anchor" href="#docker-compose-java-based-test"></a>Run Java based test</h6>
<div class="paragraph">
<p>Similar to the usage of <a href="#docker-java-based-test">Run Java based test</a>, you can to pack all parameters into a <a href="https://docs.docker.com/compose/">Docker Compose</a> file. Create <code>docker-compose.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">sakuli-example-ubuntu</span>:
  <span class="key">image</span>: <span class="string"><span class="content">consol/sakuli-ubuntu-xfce-java</span></span>
  <span class="key">ports</span>:
  - <span class="string"><span class="content">5901:5901</span></span>
  - <span class="string"><span class="content">6901:6901</span></span>
  <span class="key">volumes</span>:
  - <span class="string"><span class="content">.:/opt/maven</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When executed in the same directory as <code>docker-compose.yml</code>, a simple <code>docker-compose up</code> will bring up all containers.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Intentionally, <code>docker-compose</code> is made to bring up environments with <em>multiple</em> containers which are linked together, but even with one container it eases the parameter handling.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>docker-compose up --force-recreate</code> removes all currently stopped and running containers before it starts the containers, which defined in the <code>docker-compose.yml</code>. Otherwise, if a normal <code>docker-compose up</code> will called again, the test execution will reattach the instance and the start the test execution again in the same container instance.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Like above you can for example also override the default mvn command and use a additional persistent volume for caching the maven dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">version</span>: <span class="string"><span class="content">'2'</span></span>

<span class="key">services</span>:
  <span class="key">sakuli_java_test</span>:
    <span class="key">image</span>: <span class="string"><span class="content">consol/sakuli-ubuntu-xfce-java</span></span>
    <span class="key">volumes</span>:
    - <span class="string"><span class="content">/home/myuser/my-sakuli-maven-project:/opt/maven</span></span>
    - <span class="string"><span class="content">data:/root/.m2</span></span>
    <span class="key">network_mode</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bridge</span><span class="delimiter">&quot;</span></span>
    <span class="key">ports</span>:
    - <span class="string"><span class="content">5911:5901</span></span>
    - <span class="string"><span class="content">6911:6901</span></span>
    <span class="key">command</span>: <span class="string"><span class="content">mvn clean install</span></span>
    <span class="comment"># to keep container running and login via `docker exec -it javaexample_sakuli_java_test_1 bash`</span>
    <span class="comment"># command: --tail-log</span>

<span class="key">volumes</span>:
  <span class="key">data</span>:
    <span class="key">driver</span>: <span class="string"><span class="content">local</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="kubernetes"><a class="anchor" href="#kubernetes"></a>1.2.3.3. Kubernetes</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/containerized/kubernetes.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/containerized/kubernetes.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>The following section describes how to use <a href="https://www.openshift.com/">Kubernetes</a> for Sakuli E2E tests and monitoring. First go the folder of the Kubernetes configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>cd &lt;project-path&gt;/docker/kubernetes</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will find the kubernetes config example in:
<code><a href="https://github.com/ConSol/sakuli/blob/dev/docker/kubernetes/kubernetes.sakuli.example.pod.run.yaml" target="_blank">docker/kubernetes/kubernetes.sakuli.example.pod.run.yaml</a></code></p>
</div>
<div class="sect5">
<h6 id="kubernetes-start-pod"><a class="anchor" href="#kubernetes-start-pod"></a>Start execution pod</h6>
<div class="paragraph">
<p>To execute a Sakuli E2E testing container in the kubernetes cluster create a pod:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl create -f kubernetes.sakuli.example.pod.run.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates the following components in the Kubernetes cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a new namespace <code>sakuli</code></p>
</li>
<li>
<p>a pod with the Sakuli container running</p>
</li>
<li>
<p>a service to make the container ports <code>6901</code> and <code>5901</code> accessible</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now view the running pods on the Kubernetes dashboard:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>http://&lt;kubernets-cluster-ip&gt;:30000/#!/pod?namespace=sakuli</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/k8s_pods.png" alt="kubernetes container details"></span></p>
</div>
<div class="paragraph">
<p>or get a list of all running pods in the <code>sakuli</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl get pod --namespace=sakuli --show-all</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also take a look at the log output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl logs --namespace=sakuli test-sakuli-kub</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to watch the test execution you can connect to the container on the external HTTP port <code>32001</code> of the service <code>test-sakuli-kub</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>http://&lt;kubernetes-cluster-ip&gt;:32001/?password=sakuli&amp;view_only=true</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/os_container_webvnc.png" alt="kubernetes container via webvnc"></span></p>
</div>
</div>
<div class="sect5">
<h6 id="kubernetes-job-config"><a class="anchor" href="#kubernetes-job-config"></a>Job Config</h6>
<div class="paragraph">
<p>The Kubernetes <a href="https://kubernetes.io/docs/api-reference/v1.5/#job-v1">Job</a> object checks exit code of executed job. By default, the Sakuli container will return the value of the sakuli test execution (<code>0</code> ok, <code>1-6</code> warning to critical state codes). To prevent that the job will be rescheduled you can set the environment variable <code>KUBERNETES_RUN_MODE</code> to <code>job</code> and the container will return <code>0</code> for all "normal" sakuli executions. Like in this example:</p>
</div>
<div class="listingblock">
<div class="title">sakuli.job.run.yaml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml">        <span class="comment"># ...</span>
        <span class="key">containers</span>:
        - <span class="string"><span class="content">name: sakuli-job-pod</span></span>
          <span class="key">image</span>: <span class="string"><span class="content">consol/sakuli-ubuntu-xfce</span></span>
          <span class="key">imagePullPolicy</span>: <span class="string"><span class="content">Always</span></span>
          <span class="key">env</span>:
            - <span class="string"><span class="content">name: KUBERNETES_RUN_MODE</span></span>
              <span class="key">value</span>: <span class="string"><span class="content">job</span></span>
          <span class="key">args</span>:
       <span class="comment"># ...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As indicator that the environment variable is set, the output will contain:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="commandline">===========  SAKULI Testsuite &quot;example_xfce&quot; execution FINISHED - ERRORS ======================

ERROR [2017-06-12 17:21:56.959] - ERROR:
CASE &quot;case1&quot;: Can't find &quot;[id=not-valid, path=/headless/sakuli/test/case1/not-valid.png ]&quot; inR[0,0 1280x1024]@S(0)waitFor function in 5 sec.

SAKULI_RETURN_VAL: 6
KUBERNETES_RUN_MODE=job =&gt; return exit code 0
EXIT_CODE: 0</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="kubernetes-delete-pod"><a class="anchor" href="#kubernetes-delete-pod"></a>Delete execution pod</h6>
<div class="paragraph">
<p>Delete the Sakuli pod with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>kubectl delete -f kubernetes.sakuli.example.pod.run.yaml</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="openshift"><a class="anchor" href="#openshift"></a>1.2.3.4. OpenShift</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/execution/containerized/openshift.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/execution/containerized/openshift.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>The following section describes how to use <a href="https://www.openshift.com/">OpenShift</a> for Sakuli E2E testing and monitoring.
The following content uses as example the image <code>consol/sakuli-ubuntu-xfce</code> of the Dockerfile <code><a href="https://github.com/ConSol/sakuli/blob/dev/docker/Dockerfile.sakuli.ubuntu.xfce" target="_blank">Dockerfile.sakuli.ubuntu.xfce</a></code>.</p>
</div>
<div class="paragraph">
<p>First you have to create your OpenShift project on the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>cd openshift
oc new-project my-project</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can use the provided templates from <code><a href="https://github.com/ConSol/sakuli/blob/dev/docker/openshift" target="_blank">docker/openshift</a></code>.</p>
</div>
<div class="sect5">
<h6 id="openshift-run-image"><a class="anchor" href="#openshift-run-image"></a>Run image from Dockerhub</h6>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>cd openshift
oc new-project my-project</code></pre>
</div>
</div>
<div class="paragraph">
<p>As soon as you are logged in to OpenShift and have selected your project, you can simply run the image by using the configuration <code><a href="https://github.com/ConSol/sakuli/blob/dev/docker/openshift/openshift.sakuli.example.pod.run.yaml" target="_blank">openshift.sakuli.example.pod.run.yaml</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.example.pod.run.yaml -v E2E_TEST_NAME=single-pod | oc create -f -</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the deployment you will see the new deployed service on the OpenShift management UI :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>https://__YOUR-OS-MANAGEMENT-URL__/console/project/my-project/overview`</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/os_run_only.png" alt="openshift management consol run-only service"></span></p>
</div>
<div class="paragraph">
<p>Watch the test execution within the container with this URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>http://my-run-only-pod-my-project.__YOUR-OS-URL__/?password=sakuli`</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/os_container_webvnc.png" alt="openshift container via webvnc"></span></p>
</div>
<div class="paragraph">
<p>If you want to use another Sakuli image (here: Ubuntu) just use the <code>IMAGE</code> var:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.example.pod.run.yaml -v E2E_TEST_NAME=single-pod -v IMAGE=consol/sakuli-ubuntu-icewm | oc create -f -</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_build_run_your_own_image"><a class="anchor" href="#_build_run_your_own_image"></a>Build &amp; run your own image</h6>
<div class="paragraph">
<p>If you want to build the image in your own infrastructure just use the configuration <code><a href="https://github.com/ConSol/sakuli/blob/dev/docker/openshift/openshift.sakuli.example.image.build.yaml" target="_blank">openshift.sakuli.example.image.build.yaml</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.example.image.build.yaml -v IMAGE=sakuli-oc-image | oc create -f -</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can build a custom Docker image in a specific branch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.example.image.build.yaml \
    -v IMAGE=sakuli-oc-image-icewm \
    -v SOURCE_REPOSITORY_REF=dev \
    -v SOURCE_DOCKERFILE=Dockerfile.sakuli.ubuntu.icewm \
    | oc create -f -</code></pre>
</div>
</div>
<div class="sect6">
<h7 id="_use_images_from_oc_docker_registry"><a class="anchor" href="#_use_images_from_oc_docker_registry"></a>Use images from oc docker registry</h7>
<div class="paragraph">
<p>To use an already builded image from the internal OpenShift registry you have to specify the image in the pattern <code>&lt;registry-ip&gt;/&lt;your-project&gt;/&lt;image-name&gt;[:&lt;tag&gt;]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.example.pod.run.yaml -v IMAGE=10.0.0.X:5000/my-project/sakuli-oc-image,E2E_TEST_NAME=oc-image-test-2 | oc create -f -</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_run_git_based_tests"><a class="anchor" href="#_run_git_based_tests"></a>Run git based tests</h6>
<div class="sect6">
<h7 id="_git_based_test_definitions_on_volume_mounts"><a class="anchor" href="#_git_based_test_definitions_on_volume_mounts"></a>Git based test definitions on volume mounts</h7>
<div class="paragraph">
<p>An effective way to execute your own Sakuli tests is that you mount the testsuite into the container. For this you can use the template <code>openshift.sakuli.gitvolume.pod.run.yaml</code>. The template will checkout the git repository and mount it as a read-only volume into the container where Sakuli will execute it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.gitvolume.pod.run.yaml \
    -v GIT_TEST_SUITE_REPO=https://github.com/ConSol/sakuli-examples \
    -v GIT_TEST_SUITE_PATH=docker-xfce/part_01/example_xfce \
    | oc create -f -</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If something went wrong, you maybe have to enable this volume type in the cluster - see next section.
</td>
</tr>
</table>
</div>
</div>
<div class="sect6">
<h7 id="_enable_gitrepo_volumes"><a class="anchor" href="#_enable_gitrepo_volumes"></a>Enable gitRepo volumes:</h7>
<div class="paragraph">
<p>Login as administrator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc login -u system:admin</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit the security :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc edit securitycontextconstraints/restricted</code></pre>
</div>
</div>
<div class="paragraph">
<p>add <code>gitRepo</code> to <code>volumes</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>volumes:
- configMap
- downwardAPI
- emptyDir
- persistentVolumeClaim
- secret
- gitRepo</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_job_config"><a class="anchor" href="#_job_config"></a>Job Config</h6>
<div class="paragraph">
<p>Currently OpenShift (Version 3.5) have no different behaviour as Kubernetes itself, so take a look at <a href="#kubernetes-job-config">Job Config</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="openshift-s2i"><a class="anchor" href="#openshift-s2i"></a>OpenShift source to image (S2I)</h6>
<div class="paragraph">
<p>It&#8217;s possible to use all the features of Sakuli combined with the power of
<a href="https://docs.openshift.org/latest/architecture/core_concepts/builds_and_image_streams.html#source-build">OpenShift S2I</a>.
This empowers you to create S2I base images configured as you desire. The only thing you have to do is to add your test
suite to the runnable sakuli test environment by configuration. Please find an example
<a href="https://github.com/ConSol/sakuli/blob/dev/docker/openshift/openshift.sakuli.s2i.image.build.yaml" target="_blank">S2I build config template openshift.sakuli.s2i.image.build.yaml</a>
in our template section. This template will provide you a build config and a image stream containing the Sakuli S2I
image, so that you can easily build up the Sakuli test container for your suites. In addition, we provide a
<a href="https://github.com/ConSol/sakuli/blob/dev/docker/openshift/openshift.sakuli.s2i.build.yaml" target="_blank">Sakuli test container template openshift.sakuli.s2i.build.yaml</a>
to create ready to run Sakuli container, based on Sakuli S2I, using the previously defined S2I image stream, running the
configured suite.</p>
</div>
<div class="sect6">
<h7 id="_advantages_of_sakuli_s2i"><a class="anchor" href="#_advantages_of_sakuli_s2i"></a>Advantages of Sakuli S2I</h7>
<div class="paragraph">
<p>Beside the general advantages of OpenShift S2I, Sakuli S2I adds additional ones in terms of test automation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Keep the test suites close to your applications code and reference the test suits in the build config.</p>
</li>
<li>
<p>If the tests change, you just have to start a new build of your Sakuli test container.</p>
</li>
<li>
<p>Reduces CI/CD pipeline processing time by just updating the suite in the sakuli container environment.</p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="_modify_the_base_image"><a class="anchor" href="#_modify_the_base_image"></a>Modify the base image</h7>
<div class="paragraph">
<p>The
<a href="docker/openshift/openshift.sakuli.s2i.build.yaml">Sakuli test container template</a>
provides the possibility to exchange the base image of your Sakuli test environment, so that all available
<a href="#docker-image-os-types">Image OS types</a> can be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">oc process -f openshift.sakuli.s2i.build.yaml -p &quot;BASE_IMAGE=consol/sakuli-ubuntu-xfce&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In terms that you have designed your own Sakuli base image, you&#8217;re also able to define the Source where the image
should be taken from.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">oc process -f openshift.sakuli.s2i.build.yaml -p &quot;BASE_IMAGE=my-sakuli-ubuntu-openbox&quot; -p &quot;BASE_IMAGE_KIND=ImageStream&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The values available in the <code>BASE_IMAGE_KIND</code> correlate to the values of the <code>dockerStrategy.from.kind</code> definition.</p>
</div>
</div>
<div class="sect6">
<h7 id="_example_workflow"><a class="anchor" href="#_example_workflow"></a>Example workflow</h7>
<div class="paragraph">
<p>Setup your Sakuli-S2I image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.s2i.image.build.yaml -p "IMAGE=sakuli-ubuntu-xfce-s2i" -p "BASE_IMAGE=consol/sakuli-ubuntu-xfce:dev" | oc apply -f -</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add the test suite of your choice to the S2I image</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.s2i.build.yaml -p "IMAGE=test-xfce" -p "BASE_IMAGE=sakuli-ubuntu-xfce-s2i" -p "TESTSUITE_REPOSITORY_URL=https://github.com/ConSol/sakuli.git" -p "TESTSUITE_CONTEXT_DIR=example_test_suites/example_xfce" | oc apply -f -</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run your test container <code>test-xfce</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc run test-xfce --image=&lt;your-docker-registry-ip&gt;:5000/&lt;your-project&gt;/test-xfce --restart=OnFailure</code></pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_other_useful_commands"><a class="anchor" href="#_other_useful_commands"></a>Other useful commands</h6>
<div class="sect6">
<h7 id="_delete_specific_application_or_e2e_test"><a class="anchor" href="#_delete_specific_application_or_e2e_test"></a>Delete specific application or E2E test</h7>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc process -f openshift.sakuli.example.pod.run.yaml -v E2E_TEST_NAME=single-job | oc delete --grace-period=5 -f -</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_delete_all_running_pods_and_configsŷ"><a class="anchor" href="#_delete_all_running_pods_and_configsŷ"></a>Delete all running pods and configsŷ</h7>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc delete dc --all &amp;&amp; oc delete routes --all &amp;&amp; oc delete pods --all &amp;&amp; oc delete services --all &amp;&amp; oc delete jobs --all</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sakuli-ui"><a class="anchor" href="#sakuli-ui"></a>1.3. Sakuli UI</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/ui/sakuli-ui-intro.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/ui/sakuli-ui-intro.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p><strong>since:</strong> <a href="#version-1.2.0"><a href="http://consol.github.io/sakuli/v1.2.0/index.html"><strong>Version 1.2.0</strong></a></a></p>
</div>
<div class="paragraph">
<p>The <strong>Sakuli UI</strong> is an easy to use web application to manage, develop and execute your Sakuli test suites. It&#8217;s already included in <a href="#download">Sakuli Installer</a> and can be started in different ways:</p>
</div>
<div class="sect3">
<h4 id="sakuli-ui-local"><a class="anchor" href="#sakuli-ui-local"></a>1.3.1. Local execution</h4>
<div class="paragraph">
<p>If you have chosen the option "Sakuli UI" in the <a href="#windows">Windows</a>/<a href="#linux">Linux</a> installation process you can use Sakuli CLI to start the UI in a specific <code>&lt;root-context-path&gt;</code>, which specifies the root search point for Sakuli test suites in the filesystem. For example your <code>SAKULI_ROOT</code> folder:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the UI: <code>sakuli ui &lt;root-context-path&gt;</code></p>
<div class="literalblock">
<div class="content">
<pre>sakuli ui $SAKULI_ROOT</pre>
</div>
</div>
</li>
<li>
<p>Then open the URL: <a href="http://localhost:8080" class="bare">http://localhost:8080</a></p>
</li>
<li>
<p>Login: default user <code>admin</code>, default password <code>sakuli</code> <span class="image"><img src="images/ui/ui-login.png" alt="sakuli login mask"></span></p>
</li>
<li>
<p>Open your test project, e.g. <code>example_test_suites</code> <span class="image"><img src="images/ui/ui-project-select.png" alt="select sakuli project"></span></p>
</li>
<li>
<p>Select your test suite e.g. <code>sakuki_xfce</code>, configure the <a href="#docker-images">Docker image</a> e.g. <code>consol/sakuli-ubuntu-xfce:dev</code> and press <em>Run sakuli container</em> <span class="image"><img src="images/ui/ui-project-run.png" alt="run project in docker container"></span></p>
</li>
<li>
<p>During the test execution the UI will show a web vnc view where you can watch running the test <span class="image"><img src="images/ui/ui-project-run-vnc.png" alt="web vnc view of the sakuli container"></span></p>
</li>
<li>
<p>After test has been executed a summarizing report will show up <span class="image"><img src="images/ui/ui-project-report.png" alt="sakuli test report"></span></p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you want to change e.g. the default password see <a href="#sakuli-ui-configuration">Sakuli UI Configuration</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="sakuli-ui-containerized"><a class="anchor" href="#sakuli-ui-containerized"></a>1.3.2. Containerized execution</h4>
<div class="paragraph">
<p><strong>Docker Image:</strong> <a href="https://hub.docker.com/r/consol/sakuli-ui"><code>consol/sakuli-ui</code></a></p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to start the Sakuli UI completely container-based without installing anything before. Therefore the <a href="http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci">docker-in-docker</a> approach will be used and you have to specify the following volume mappings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Docker socket:</strong>  Socket of the Docker daemon, which is needed to enable the Sakuli UI container to start new containers by itself. Under linux normally: <code>/var/run/docker.sock</code></p>
<div class="literalblock">
<div class="content">
<pre>--volume /var/run/docker.sock:/var/run/docker.sock</pre>
</div>
</div>
</li>
<li>
<p><strong>Root context path of the host:</strong> Specifies the root search point for all Sakuli test suites in the mounted filesystem. For example folder: <code>$HOME/sakuli-tests</code></p>
<div class="literalblock">
<div class="content">
<pre>--volume $HOME/sakuli-tests:/opt/sakuli-ui-root</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Ensure that the container can <strong>read and write</strong> into the mounted volume! Maybe <a href="#sakuli-ui-containerized-uid">use a different container user id</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To start the Sakuli UI container just execute this <code>docker run</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"> docker run -it -p 8080:8080 \
    --volume /var/run/docker.sock:/var/run/docker.sock \
    --volume $HOME/sakuli-tests:/opt/sakuli-ui-root \
    consol/sakuli-ui</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you wan&#8217;t to use your current folder as <code>&lt;root-context-path&gt;</code>, use <code>$(pwd)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">docker run -it -p 8080:8080 \
    --volume /var/run/docker.sock:/var/run/docker.sock \
    --volume $(pwd):/opt/sakuli-ui-root \
    consol/sakuli-ui</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the container startup  you can login via the URL: <a href="http://localhost:8080" class="bare">http://localhost:8080</a>, default user <code>admin</code>, default password <code>sakuli</code> <span class="image"><img src="images/ui/ui-login.png" alt="sakuli login mask"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are running the Docker daemon on remote machine or boot-to-docker replace <code>localhost</code> with <code>hostname</code> of the Docker daemon!
</td>
</tr>
</table>
</div>
<div id="sakuli-ui-containerized-configuration" class="paragraph">
<div class="title">Change Sakuli UI configuration</div>
<p>If you wan&#8217;t change the UI configuration through the <a href="#sakuli-ui-configuration">Sakuli UI Properties</a>, just add it to the <code>docker run</code> command as argument <code>-Dproperty-key=property-value</code>. For e.g. to change the password execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">docker run -it -p 8080:8080 \
    --volume /var/run/docker.sock:/var/run/docker.sock \
    --volume $(pwd):/opt/sakuli-ui-root \
    consol/sakuli-ui \
    -Dsecurity.default-password=my-new-password</code></pre>
</div>
</div>
<div id="sakuli-ui-containerized-uid" class="paragraph">
<div class="title">Use different container user</div>
<p>By default the container run with user id <code>1000</code>. If the local user of the host system is a different one (execute: <code>id -u</code>) you may have to change the user id:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">docker run -it -p 8080:8080 \
    --volume /var/run/docker.sock:/var/run/docker.sock \
    --volume $(pwd):/opt/sakuli-ui-root \
    --user $(id -u) \
    consol/sakuli-ui</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Usage of docker-compose for test execution</div>
<p>If you use the docker-compose option in the Sakuli UI to execute your test suite, you can&#8217;t mount the volumes like in an normal docker environment. Through the <a href="http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci">docker-in-docker</a> approach just mount the volumes from the Sakuli UI container it-self and they will be mounted at same path in sub-containers:</p>
</div>
<div class="listingblock">
<div class="title">docker-compose.yaml (of test suite)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="comment"># Run test in Ubuntu/Firefox and mounted volumes by docker-in-docker</span>
<span class="key">sakuli_test_ubuntu_firefox</span>:
  <span class="key">image</span>: <span class="string"><span class="content">consol/sakuli-ubuntu-xfce</span></span>
<span class="comment"># REMOVE for docker-in-docker</span>
<span class="comment">#   volumes:</span>
<span class="comment">#   - .:/opt/test</span>
<span class="comment">#</span>
<span class="comment"># USE this for docker-in-docker!</span>
  <span class="key">volumes_from</span>: <i class="conum" data-value="1"></i><b>(1)</b>
    - <span class="string"><span class="content">$HOSTNAME </span></span><i class="conum" data-value="2"></i><b>(2)</b>
  <span class="key">ports</span>:
  - <span class="string"><span class="content">5911:5901</span></span>
  - <span class="string"><span class="content">6911:6901</span></span>
  <span class="key">user</span>: <span class="string"><span class="content">'1000'</span></span>
  <span class="key">command</span>: <span class="string"><span class="content">run /opt/sakuli-ui-root/example_xfce </span></span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Through <code>volumes_from</code> the <code>&lt;root-context-path&gt;</code> will be mounted to same path in sub-containers</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>$HOSTNAME</code> is equal to the docker-container-id (<code>docker ps -q</code>) in the inside of a container</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="sakuli-ui-configuration"><a class="anchor" href="#sakuli-ui-configuration"></a>1.3.3. Sakuli UI Configuration</h4>
<div class="paragraph">
<p>To configure the Sakuli UI for your custom needs you can set following properties through the CLI</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sakuli ui &lt;root-context-path&gt; -D property-key=property-value</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For containerized execution see <a href="#sakuli-ui-containerized-configuration">containerized UI configuration</a>.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Sakuli UI Properties</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>app.authentication.enabled=true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en/disable sakuli UI basic authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.default-username=admin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set username for web login</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.default-password=sakuli</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set password for web login</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>app.execution.local.enabled=true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en/disable Sakuli <a href="#native-execution">Native Execution</a> mode (use local <code>sakuli &#8230;&#8203;</code> command)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>app.execution.dockercontainer.enabled=true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en/disable Sakuli execution mode for default <a href="#docker-images">Sakuli Docker Images</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>app.execution.dockerfile.enabled=true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en/disable Sakuli execution mode for <a href="#docker-extend-a-image">custom Dockerfiles</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>app.execution.dockercompose.enabled=true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en/disable Sakuli execution mode for <a href="#docker-compose">Docker Compose</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docker.userid=1000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set linux user id which will be used to start the Sakuli container. Use your user system id (<code>$ id -u</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logging.level.org.sweetest=INFO</code>
<code>logging.level.org.apache=INFO</code>
<code>logging.level.org.eclipse=INFO</code>
<code>logging.level.jndi=INFO</code>
<code>logging.level.org.thymeleaf=WARN</code>
<code>logging.level.org.springframework=INFO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change default log levels of Sakuli UI libraries</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="sakuli-testdefintion"><a class="anchor" href="#sakuli-testdefintion"></a>1.4. Sakuli Testdefinition</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/testdefinition.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/testdefinition.adoc" target="_blank">edit</a></p>
</div>
<div class="sect3">
<h4 id="sakuli-api"><a class="anchor" href="#sakuli-api"></a>1.4.1. Sakuli API</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/sakuli-api.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Sakuli provides methods of three different types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JS/Java methods of <strong><a href="http://sahi.co.in/w/all-apis">Sahi</a></strong>, which can be used 100% <em>natively</em></p>
</li>
<li>
<p>JS/Java methods which encapsulate a subset of the <strong>Sikuli</strong> Java API</p>
</li>
<li>
<p>JS/Java methods of <strong>Sakuli</strong> framework itself (testcase stuff, exception handling, …)</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All classes and methods are implemented identical for Java and JavaScript
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>For the detailed documentation see:</strong></p>
</div>
<div class="sect5">
<h6 id="sakuli-api-index"><a class="anchor" href="#sakuli-api-index"></a>Index</h6>
<div class="paragraph">
<p><strong>Namespaces</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Sahi-API">Sahi-API</a></p>
</li>
<li>
<p><a href="#TestCase">TestCase</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#TestCase.addImagePaths">TestCase.addImagePaths(imagePaths)</a></p>
</li>
<li>
<p><a href="#TestCase.endOfStep">TestCase.endOfStep(stepName, optWarningTime, optCriticalTime, optForward)</a></p>
</li>
<li>
<p><a href="#TestCase.handleException">TestCase.handleException(e)</a></p>
</li>
<li>
<p><a href="#TestCase.saveResult">TestCase.saveResult(optForward)</a></p>
</li>
<li>
<p><a href="#TestCase.getID">TestCase.getID()</a></p>
</li>
<li>
<p><a href="#TestCase.getLastURL">TestCase.getLastURL()</a></p>
</li>
<li>
<p><a href="#TestCase.getTestCaseFolderPath">TestCase.getTestCaseFolderPath()</a></p>
</li>
<li>
<p><a href="#TestCase.getTestSuiteFolderPath">TestCase.getTestSuiteFolderPath()</a></p>
</li>
<li>
<p><a href="#TestCase.throwException">TestCase.throwException(message, screenshot)</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#Application">Application</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#Application.open">Application.open()</a></p>
</li>
<li>
<p><a href="#Application.focus">Application.focus()</a></p>
</li>
<li>
<p><a href="#Application.focusWindow">Application.focusWindow(windowNumber)</a></p>
</li>
<li>
<p><a href="#Application.close">Application.close(optSilent)</a></p>
</li>
<li>
<p><a href="#Application.kill">Application.kill(optSilent)</a></p>
</li>
<li>
<p><a href="#Application.setSleepTime">Application.setSleepTime(seconds)</a></p>
</li>
<li>
<p><a href="#Application.getRegion">Application.getRegion()</a></p>
</li>
<li>
<p><a href="#Application.getRegionForWindow">Application.getRegionForWindow(windowNumber)</a></p>
</li>
<li>
<p><a href="#Application.getName">Application.getName()</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#Environment">Environment</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#Environment.setSimilarity">Environment.setSimilarity(similarity)</a></p>
</li>
<li>
<p><a href="#Environment.resetSimilarity">Environment.resetSimilarity()</a></p>
</li>
<li>
<p><a href="#Environment.getRegionFromFocusedWindow">Environment.getRegionFromFocusedWindow()</a></p>
</li>
<li>
<p><a href="#Environment.takeScreenshot">Environment.takeScreenshot(filename)</a></p>
</li>
<li>
<p><a href="#Environment.takeScreenshotWithTimestamp">Environment.takeScreenshotWithTimestamp(filenamePostfix, optFolderPath, optFormat)</a></p>
</li>
<li>
<p><a href="#Environment.sleep">Environment.sleep(seconds)</a></p>
</li>
<li>
<p><a href="#Environment.sleepMs">Environment.sleepMs(milliseconds)</a></p>
</li>
<li>
<p><a href="#Environment.getClipboard">Environment.getClipboard()</a></p>
</li>
<li>
<p><a href="#Environment.setClipboard">Environment.setClipboard(text)</a></p>
</li>
<li>
<p><a href="#Environment.pasteClipboard">Environment.pasteClipboard()</a></p>
</li>
<li>
<p><a href="#Environment.copyIntoClipboard">Environment.copyIntoClipboard()</a></p>
</li>
<li>
<p><a href="#Environment.cleanClipboard">Environment.cleanClipboard()</a></p>
</li>
<li>
<p><a href="#Environment.paste">Environment.paste(text)</a></p>
</li>
<li>
<p><a href="#Environment.pasteMasked">Environment.pasteMasked(text)</a></p>
</li>
<li>
<p><a href="#Environment.pasteAndDecrypt">Environment.pasteAndDecrypt(text)</a></p>
</li>
<li>
<p><a href="#Environment.type">Environment.type(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Environment.typeMasked">Environment.typeMasked(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Environment.typeAndDecrypt">Environment.typeAndDecrypt(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Environment.decryptSecret">Environment.decryptSecret(secret)</a></p>
</li>
<li>
<p><a href="#Environment.keyDown">Environment.keyDown(keys)</a></p>
</li>
<li>
<p><a href="#Environment.keyUp">Environment.keyUp(keys)</a></p>
</li>
<li>
<p><a href="#Environment.write">Environment.write(text)</a></p>
</li>
<li>
<p><a href="#Environment.mouseWheelDown">Environment.mouseWheelDown(steps)</a></p>
</li>
<li>
<p><a href="#Environment.mouseWheelUp">Environment.mouseWheelUp(steps)</a></p>
</li>
<li>
<p><a href="#Environment.isWindows">Environment.isWindows()</a></p>
</li>
<li>
<p><a href="#Environment.isLinux">Environment.isLinux()</a></p>
</li>
<li>
<p><a href="#Environment.getOsIdentifier">Environment.getOsIdentifier()</a></p>
</li>
<li>
<p><a href="#Environment.runCommand">Environment.runCommand(command, optThrowException)</a></p>
</li>
<li>
<p><a href="#Environment.getEnv">Environment.getEnv(key)</a></p>
</li>
<li>
<p><a href="#Environment.getProperty">Environment.getProperty(key)</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#Key">Key</a></p>
</li>
<li>
<p><a href="#Logger">Logger</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#Logger.logError">Logger.logError(message)</a></p>
</li>
<li>
<p><a href="#Logger.logWarning">Logger.logWarning(message)</a></p>
</li>
<li>
<p><a href="#Logger.logInfo">Logger.logInfo(message)</a></p>
</li>
<li>
<p><a href="#Logger.logDebug">Logger.logDebug(message)</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#MouseButton">MouseButton</a></p>
</li>
<li>
<p><a href="#Region">Region</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#Region.find">Region.find(imageName)</a></p>
</li>
<li>
<p><a href="#Region.findRegion">Region.findRegion()</a></p>
</li>
<li>
<p><a href="#Region.exists">Region.exists(imageName, optWaitSeconds)</a></p>
</li>
<li>
<p><a href="#Region.click">Region.click()</a></p>
</li>
<li>
<p><a href="#Region.doubleClick">Region.doubleClick()</a></p>
</li>
<li>
<p><a href="#Region.rightClick">Region.rightClick()</a></p>
</li>
<li>
<p><a href="#Region.mouseMove">Region.mouseMove()</a></p>
</li>
<li>
<p><a href="#Region.mouseDown">Region.mouseDown(mouseButton)</a></p>
</li>
<li>
<p><a href="#Region.mouseUp">Region.mouseUp(mouseButton)</a></p>
</li>
<li>
<p><a href="#Region.dragAndDropTo">Region.dragAndDropTo(targetRegion)</a></p>
</li>
<li>
<p><a href="#Region.waitForImage">Region.waitForImage(imageName, seconds)</a></p>
</li>
<li>
<p><a href="#Region.paste">Region.paste(text)</a></p>
</li>
<li>
<p><a href="#Region.pasteMasked">Region.pasteMasked(text)</a></p>
</li>
<li>
<p><a href="#Region.pasteAndDecrypt">Region.pasteAndDecrypt(text)</a></p>
</li>
<li>
<p><a href="#Region.type">Region.type(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Region.typeMasked">Region.typeMasked(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Region.typeAndDecrypt">Region.typeAndDecrypt(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Region.keyDown">Region.keyDown(keys)</a></p>
</li>
<li>
<p><a href="#Region.keyUp">Region.keyUp(keys)</a></p>
</li>
<li>
<p><a href="#Region.write">Region.write(text)</a></p>
</li>
<li>
<p><a href="#Region.deleteChars">Region.deleteChars(amountOfChars)</a></p>
</li>
<li>
<p><a href="#Region.mouseWheelDown">Region.mouseWheelDown(steps)</a></p>
</li>
<li>
<p><a href="#Region.mouseWheelUp">Region.mouseWheelUp(steps)</a></p>
</li>
<li>
<p><a href="#Region.move">Region.move(offsetX, offsetY)</a></p>
</li>
<li>
<p><a href="#Region.grow">Region.grow(range)</a></p>
</li>
<li>
<p><a href="#Region.grow">Region.grow(width, height)</a></p>
</li>
<li>
<p><a href="#Region.above">Region.above(range)</a></p>
</li>
<li>
<p><a href="#Region.below">Region.below(range)</a></p>
</li>
<li>
<p><a href="#Region.left">Region.left(range)</a></p>
</li>
<li>
<p><a href="#Region.right">Region.right(range)</a></p>
</li>
<li>
<p><a href="#Region.setH">Region.setH(height)</a></p>
</li>
<li>
<p><a href="#Region.getH">Region.getH()</a></p>
</li>
<li>
<p><a href="#Region.setW">Region.setW(width)</a></p>
</li>
<li>
<p><a href="#Region.getW">Region.getW()</a></p>
</li>
<li>
<p><a href="#Region.setX">Region.setX(x)</a></p>
</li>
<li>
<p><a href="#Region.getX">Region.getX()</a></p>
</li>
<li>
<p><a href="#Region.setY">Region.setY(y)</a></p>
</li>
<li>
<p><a href="#Region.getY">Region.getY()</a></p>
</li>
<li>
<p><a href="#Region.highlight">Region.highlight(seconds)</a></p>
</li>
<li>
<p><a href="#Region.takeScreenshot">Region.takeScreenshot(filename)</a></p>
</li>
<li>
<p><a href="#Region.takeScreenshotWithTimestamp">Region.takeScreenshotWithTimestamp(filenamePostfix, optFolderPath, optFormat)</a></p>
</li>
<li>
<p><a href="#Region.sleep">Region.sleep(seconds)</a></p>
</li>
<li>
<p><a href="#Region.sleepMs">Region.sleepMs(milliseconds)</a></p>
</li>
<li>
<p><a href="#Region.extractText">Region.extractText()</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#RegionRectangle">RegionRectangle</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Sahi-API"><a class="anchor" href="#Sahi-API"></a>1.4.1.2. Sahi-API</h5>
<div class="paragraph">
<p><strong>All Sahi-API</strong> functions are natively usable in Sakuli. For a complete documentation, see
<a href="http://sahi.co.in/w/all-apis">Sahi-API</a>.</p>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Sahi-API">Sahi-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="TestCase"><a class="anchor" href="#TestCase"></a>1.4.1.3. TestCase</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api-testcase.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/sakuli-api-testcase.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>TestCase - initializes the Sakuli object and sets the warning and critical time for this test case.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>optCaseId <code>String</code> - optional ID to set the testcase ID to some specifc value. Default is the folder name.</p>
</li>
<li>
<p>optWarningTime <code>number</code> - threshold in seconds. If the threshold is not set or is set to 0,
the execution time will never exceed, so the state will be always OK!</p>
</li>
<li>
<p>optCriticalTime <code>number</code> - threshold in seconds. If the threshold is not set or is set to 0,
the execution time will never exceed, so the state will be always OK!</p>
</li>
<li>
<p>optImagePathArray <code>Array.&lt;String&gt;</code> - (optional) Path or Array of Paths to the folder containing the image patterns
for these test cases.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - an initialized Sakuli object.
<strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="comment">//new syntax since v1.2.0</span>
<span class="keyword">var</span> testCase = <span class="keyword">new</span> TestCase([<span class="string"><span class="delimiter">&quot;</span><span class="content">own-case-id</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>, <span class="integer">30</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">path-to/image-folder-name</span><span class="delimiter">&quot;</span></span>]);

<span class="comment">//old syntax &amp;lt; v1.2.0</span>
<span class="keyword">var</span> testCase = <span class="keyword">new</span> TestCase(<span class="integer">20</span>, <span class="integer">30</span>, [<span class="string"><span class="delimiter">&quot;</span><span class="content">path-to/image-folder-name</span><span class="delimiter">&quot;</span></span>]);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#TestCase">TestCase</a></p>
</li>
<li>
<p><a href="#TestCase.addImagePaths">TestCase.addImagePaths(imagePaths)</a></p>
</li>
<li>
<p><a href="#TestCase.endOfStep">TestCase.endOfStep(stepName, optWarningTime, optCriticalTime, optForward)</a></p>
</li>
<li>
<p><a href="#TestCase.handleException">TestCase.handleException(e)</a></p>
</li>
<li>
<p><a href="#TestCase.saveResult">TestCase.saveResult(optForward)</a></p>
</li>
<li>
<p><a href="#TestCase.getID">TestCase.getID()</a></p>
</li>
<li>
<p><a href="#TestCase.getLastURL">TestCase.getLastURL()</a></p>
</li>
<li>
<p><a href="#TestCase.getTestCaseFolderPath">TestCase.getTestCaseFolderPath()</a></p>
</li>
<li>
<p><a href="#TestCase.getTestSuiteFolderPath">TestCase.getTestSuiteFolderPath()</a></p>
</li>
<li>
<p><a href="#TestCase.throwException">TestCase.throwException(message, screenshot)</a></p>
</li>
</ul>
</div>
<div id="TestCase.addImagePaths" class="paragraph">
<div class="title">TestCase.addImagePaths(imagePaths)</div>
<p>Adds the additional paths to the current image library of the TestCase.
If a relative path is assigned, the current testcase folder will be used as current directory.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>imagePaths <code>string</code> - one or more path strings</p>
</li>
</ul>
</div>
<div id="TestCase.endOfStep" class="paragraph">
<div class="title">TestCase.endOfStep(stepName, optWarningTime, optCriticalTime, optForward)</div>
<p>A step allows to sub-divide a case to measure logical units, such as "login", "load report" etc. in its
particular runtime. When a case starts, Sakuli starts a "step" timer. It gets read out, stored with the
step name, and the timer will set to <code>0</code> each time endOfStep() is called.
If the step runtime exceeds the step warning resp. critical threshold (second resp. third parameter, both of them are optional), the step is saved with state "WARNING" resp. "CRITICAL".</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>stepName <code>String</code></p>
</li>
<li>
<p>optWarningTime <code>number</code> - (optional) threshold in seconds, default = 0. If the threshold is set to 0,
the execution time will never exceed, so the state will be always OK!</p>
</li>
<li>
<p>optCriticalTime <code>number</code> - (optional) threshold in seconds, default = 0. If the threshold is set to 0,
the execution time will never exceed, so the state will be always OK!</p>
</li>
<li>
<p>optForward <code>boolean</code> - (optional) indicate whether the result of the test step shall be immediately
processed by the enabled forwarders. This means before the test suite has been executed to
the end. If not specified in another way, this option is disabled! Default: <code>false</code></p>
</li>
</ul>
</div>
<div id="TestCase.handleException" class="paragraph">
<div class="title">TestCase.handleException(e)</div>
<p>Handles any Exception or Error. The handleException function calls the Java backend and stores the Exception
for further processing.</p>
</div>
<div class="paragraph">
<p>Use it at the end of a catch-block.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>e <code>Error</code> - any Exception or Error</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">try</span> {
  ... <span class="keyword">do</span> something
} <span class="keyword">catch</span> (e) {
    sakuli.handleException(e);
}</code></pre>
</div>
</div>
<div id="TestCase.saveResult" class="paragraph">
<div class="title">TestCase.saveResult(optForward)</div>
<p>Saves the results of the current test case for further processing.</p>
</div>
<div class="paragraph">
<p>Should be called in finally-block of the test case:</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>optForward <code>boolean</code> - indicate whether the result of the test case shall be immediately processed by the enabled forwarders. This means before the test suite has been executed to the end. If not specified in another way, this option is disabled! Default: <code>false</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">try</span> {
    ... <span class="keyword">do</span> something
} <span class="keyword">catch</span> (e) {
    sakuli.handleException(e);
} <span class="keyword">finally</span> {
    sakuli.saveResult();
}</code></pre>
</div>
</div>
<div id="TestCase.getID" class="paragraph">
<div class="title">TestCase.getID()</div>
<p>Returns the <strong>current</strong> id of this test case.</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <code>String</code> - id</p>
</div>
<div id="TestCase.getLastURL" class="paragraph">
<div class="title">TestCase.getLastURL()</div>
<p>Updates and returns the URL of the last visited URL</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <code>String</code> - last visited URL</p>
</div>
<div id="TestCase.getTestCaseFolderPath" class="paragraph">
<div class="title">TestCase.getTestCaseFolderPath()</div>
<p><strong>Returns</strong>: <code>String</code> - the folder path of the current testcase.</p>
</div>
<div id="TestCase.getTestSuiteFolderPath" class="paragraph">
<div class="title">TestCase.getTestSuiteFolderPath()</div>
<p><strong>Returns</strong>: <code>String</code> - the folder path of the current testcase.</p>
</div>
<div id="TestCase.throwException" class="paragraph">
<div class="title">TestCase.throwException(message, screenshot)</div>
<p>Creates a new test case based exception with an optional screenshot at the calling time.
Will be called from sakuli.js or in side of 'org.sakuli.javaDSL.AbstractSakuliTest'.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>message <code>String</code> - error message</p>
</li>
<li>
<p>screenshot <code>Boolean</code> - enable / disable screenshot functionality</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Application"><a class="anchor" href="#Application"></a>1.4.1.4. Application</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api-application.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/sakuli-api-application.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Application Class - Represents an application.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>applicationNameOrPath <code>String</code> - Path to the application file. Example: <code>C:\Windows\system32\notepad.exe</code></p>
</li>
<li>
<p>optResumeOnException <code>Boolean</code> - Determines whether to ignore exceptions from this class. If this parameter is
undefined, it will be false.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <a href="#Application">Application</a> - an initialized object.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="comment">//windows</span>
<span class="keyword">var</span> editor = <span class="keyword">new</span> Application(<span class="string"><span class="delimiter">&quot;</span><span class="content">notepad.exe</span><span class="delimiter">&quot;</span></span>);
<span class="comment">//linux</span>
<span class="keyword">var</span> editor = <span class="keyword">new</span> Application(<span class="string"><span class="delimiter">&quot;</span><span class="content">gedit</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Application">Application</a></p>
</li>
<li>
<p><a href="#Application.open">Application.open()</a></p>
</li>
<li>
<p><a href="#Application.focus">Application.focus()</a></p>
</li>
<li>
<p><a href="#Application.focusWindow">Application.focusWindow(windowNumber)</a></p>
</li>
<li>
<p><a href="#Application.close">Application.close(optSilent)</a></p>
</li>
<li>
<p><a href="#Application.kill">Application.kill(optSilent)</a></p>
</li>
<li>
<p><a href="#Application.setSleepTime">Application.setSleepTime(seconds)</a></p>
</li>
<li>
<p><a href="#Application.getRegion">Application.getRegion()</a></p>
</li>
<li>
<p><a href="#Application.getRegionForWindow">Application.getRegionForWindow(windowNumber)</a></p>
</li>
<li>
<p><a href="#Application.getName">Application.getName()</a></p>
</li>
</ul>
</div>
<div id="Application.open" class="paragraph">
<div class="title">Application.open()</div>
<p>Opens the created application.
For application with a long load time you may need to change the default sleep time with setSleepTime(…).</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Application object.</p>
</div>
<div id="Application.focus" class="paragraph">
<div class="title">Application.focus()</div>
<p>Focuses the current application, if the application is in the background.</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Application object.</p>
</div>
<div id="Application.focusWindow" class="paragraph">
<div class="title">Application.focusWindow(windowNumber)</div>
<p>Focuses a specific window of the application.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>windowNumber <code>number</code> - identifies the window</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Application object.</p>
</div>
<div id="Application.close" class="paragraph">
<div class="title">Application.close(optSilent)</div>
<p>Closes the already existing application.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>optSilent <code>boolean</code> - (optional) if true, no exception will be thrown on errors and stop the test execution.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Application object.</p>
</div>
<div id="Application.kill" class="paragraph">
<div class="title">Application.kill(optSilent)</div>
<p>Kill the already existing application hardly.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>optSilent <code>boolean</code> - (optional) if true, no exception will be thrown on errors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Application object.</p>
</div>
<div id="Application.setSleepTime" class="paragraph">
<div class="title">Application.setSleepTime(seconds)</div>
<p>Sets the sleep time in seconds of the application actions to handle with long loading times.
The default sleep time is set to 1 seconds.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>seconds <code>number</code> - sleep time in seconds</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Application object.</p>
</div>
<div id="Application.getRegion" class="paragraph">
<div class="title">Application.getRegion()</div>
<p>Creates and returns a Region object from the application.</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a Region object.</p>
</div>
<div id="Application.getRegionForWindow" class="paragraph">
<div class="title">Application.getRegionForWindow(windowNumber)</div>
<p>Creates and returns a Region object from a specific window of the application.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>windowNumber <code>number</code> - identifies the window</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a Region object.</p>
</div>
<div id="Application.getName" class="paragraph">
<div class="title">Application.getName()</div>
<p><strong>Returns</strong>: - the name of the current application.</p>
</div>
</div>
<div class="sect4">
<h5 id="Environment"><a class="anchor" href="#Environment"></a>1.4.1.5. Environment</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api-environment.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/sakuli-api-environment.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Environment - Represents the environment of the current test host.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>optResumeOnException <code>Boolean</code> - (optional) if this parameter is undefined, it will be false.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Environment">Environment</a></p>
</li>
<li>
<p><a href="#Environment.setSimilarity">Environment.setSimilarity(similarity)</a></p>
</li>
<li>
<p><a href="#Environment.resetSimilarity">Environment.resetSimilarity()</a></p>
</li>
<li>
<p><a href="#Environment.getRegionFromFocusedWindow">Environment.getRegionFromFocusedWindow()</a></p>
</li>
<li>
<p><a href="#Environment.takeScreenshot">Environment.takeScreenshot(filename)</a></p>
</li>
<li>
<p><a href="#Environment.takeScreenshotWithTimestamp">Environment.takeScreenshotWithTimestamp(filenamePostfix, optFolderPath, optFormat)</a></p>
</li>
<li>
<p><a href="#Environment.sleep">Environment.sleep(seconds)</a></p>
</li>
<li>
<p><a href="#Environment.sleepMs">Environment.sleepMs(milliseconds)</a></p>
</li>
<li>
<p><a href="#Environment.getClipboard">Environment.getClipboard()</a></p>
</li>
<li>
<p><a href="#Environment.setClipboard">Environment.setClipboard(text)</a></p>
</li>
<li>
<p><a href="#Environment.pasteClipboard">Environment.pasteClipboard()</a></p>
</li>
<li>
<p><a href="#Environment.copyIntoClipboard">Environment.copyIntoClipboard()</a></p>
</li>
<li>
<p><a href="#Environment.cleanClipboard">Environment.cleanClipboard()</a></p>
</li>
<li>
<p><a href="#Environment.paste">Environment.paste(text)</a></p>
</li>
<li>
<p><a href="#Environment.pasteMasked">Environment.pasteMasked(text)</a></p>
</li>
<li>
<p><a href="#Environment.pasteAndDecrypt">Environment.pasteAndDecrypt(text)</a></p>
</li>
<li>
<p><a href="#Environment.type">Environment.type(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Environment.typeMasked">Environment.typeMasked(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Environment.typeAndDecrypt">Environment.typeAndDecrypt(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Environment.decryptSecret">Environment.decryptSecret(secret)</a></p>
</li>
<li>
<p><a href="#Environment.keyDown">Environment.keyDown(keys)</a></p>
</li>
<li>
<p><a href="#Environment.keyUp">Environment.keyUp(keys)</a></p>
</li>
<li>
<p><a href="#Environment.write">Environment.write(text)</a></p>
</li>
<li>
<p><a href="#Environment.mouseWheelDown">Environment.mouseWheelDown(steps)</a></p>
</li>
<li>
<p><a href="#Environment.mouseWheelUp">Environment.mouseWheelUp(steps)</a></p>
</li>
<li>
<p><a href="#Environment.isWindows">Environment.isWindows()</a></p>
</li>
<li>
<p><a href="#Environment.isLinux">Environment.isLinux()</a></p>
</li>
<li>
<p><a href="#Environment.getOsIdentifier">Environment.getOsIdentifier()</a></p>
</li>
<li>
<p><a href="#Environment.runCommand">Environment.runCommand(command, optThrowException)</a></p>
</li>
<li>
<p><a href="#Environment.getEnv">Environment.getEnv(key)</a></p>
</li>
<li>
<p><a href="#Environment.getProperty">Environment.getProperty(key)</a></p>
</li>
</ul>
</div>
<div id="Environment.setSimilarity" class="paragraph">
<div class="title">Environment.setSimilarity(similarity)</div>
<p>Set a new default similarity for the screen capturing methods.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>similarity <code>number</code> - value between 0 and 1, default = 0.8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.resetSimilarity" class="paragraph">
<div class="title">Environment.resetSimilarity()</div>
<p>Resets the current similarity of the screen capturing methods to the original default value of 0.8.</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this <a href="#Environment">Environment</a> or NULL on errors.</p>
</div>
<div id="Environment.getRegionFromFocusedWindow" class="paragraph">
<div class="title">Environment.getRegionFromFocusedWindow()</div>
<p>Get a Region object from the current focused window</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a Region object from the current focused window
 or NULL on errors.</p>
</div>
<div id="Environment.takeScreenshot" class="paragraph">
<div class="title">Environment.takeScreenshot(filename)</div>
<p>Takes a screenshot of the current screen and saves it to the assigned path. If there ist just a file name, the
screenshot will be saved in your current testcase folder.
Supported formats: <code>jpg</code> and <code>png</code></p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>filename <code>String</code> - <code>pathname/filename.format</code> or just <code>filename.format</code> for example <code>test.png</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <code>Path</code> - to the created screenshot OR null on errors
<strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">environment.takeScreenshot(<span class="string"><span class="delimiter">&quot;</span><span class="content">test.png</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div id="Environment.takeScreenshotWithTimestamp" class="paragraph">
<div class="title">Environment.takeScreenshotWithTimestamp(filenamePostfix, optFolderPath, optFormat)</div>
<p>Takes a screenshot of the current screen and add the current timestamp in the file name like e.g.:</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>filenamePostfix <code>String</code> - postfix for the final filename
Default: screenshot</p>
</li>
<li>
<p>optFolderPath <code>String</code> - optional FolderPath, where to save the screenshot.
If null or empty: testcase folder will be used</p>
</li>
<li>
<p>optFormat <code>string</code> - optional format, for the screenshot (currently supported: jpg and png)
If null or empty use property <code>sakuli.screenshot.format</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <code>Path</code> - to the created screenshot OR null on errors
<strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">env.takeScreenshotWithTimestamp(<span class="string"><span class="delimiter">&quot;</span><span class="content">my-screenshot</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>saved under: <code>mytestsuite/testcase1/2017_08_03_14_06_13_255_my_screenshot.png</code></p>
</div>
<div id="Environment.sleep" class="paragraph">
<div class="title">Environment.sleep(seconds)</div>
<p>Blocks the current testcase execution for x seconds</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>seconds <code>number</code> - to sleep</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.sleepMs" class="paragraph">
<div class="title">Environment.sleepMs(milliseconds)</div>
<p>Blocks the current testcase execution for x milliseconds</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>milliseconds <code>number</code> - to sleep</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.getClipboard" class="paragraph">
<div class="title">Environment.getClipboard()</div>
<p><strong>Returns</strong>: - the current content of the clipboard as String or NULL on errors</p>
</div>
<div id="Environment.setClipboard" class="paragraph">
<div class="title">Environment.setClipboard(text)</div>
<p>sets the String parameter to the system clipboard</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - text as string</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment.</p>
</div>
<div id="Environment.pasteClipboard" class="paragraph">
<div class="title">Environment.pasteClipboard()</div>
<p>pastes the current clipboard content into the focused area.
Will do the same as "CTRL + V".</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment.</p>
</div>
<div id="Environment.copyIntoClipboard" class="paragraph">
<div class="title">Environment.copyIntoClipboard()</div>
<p>copy the current selected item or text to the clipboard.
Will do the same as "CTRL + C".</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment.</p>
</div>
<div id="Environment.cleanClipboard" class="paragraph">
<div class="title">Environment.cleanClipboard()</div>
<p>Clean the content of the clipboard.</p>
</div>
<div id="Environment.paste" class="paragraph">
<div class="title">Environment.paste(text)</div>
<p>pastes the text at the current position of the focus/carret &lt;br/&gt;using the
clipboard and ctrl/cmd-v (paste keyboard shortcut)</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - a string, which might contain unicode characters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.pasteMasked" class="paragraph">
<div class="title">Environment.pasteMasked(text)</div>
<p>makes a masked paste(String) without any logging.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - a string, which might contain unicode characters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.pasteAndDecrypt" class="paragraph">
<div class="title">Environment.pasteAndDecrypt(text)</div>
<p>combines pasteMasked(String) and decryptSecret(String).</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - encrypted secret</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.type" class="paragraph">
<div class="title">Environment.type(text, optModifiers)</div>
<p>Enters the given text one character/key after another using keyDown/keyUp.
&lt;p/&gt;
About the usable Key constants see documentation of Key.
The function could also type UTF-8 unicode characters, if the OS supports it.
The text is entered at the current position of the focus.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - containing characters and/or Key constants</p>
</li>
<li>
<p>optModifiers <code>String</code> - (optional) an String with only Key constants.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.typeMasked" class="paragraph">
<div class="title">Environment.typeMasked(text, optModifiers)</div>
<p>Enters the given text one character/key after another using keyDown/keyUp.
The entered text will be masked at the logging.
&lt;p/&gt;
About the usable Key constants see documentation of Key.
The function could also type UTF-8 unicode characters, if the OS supports it.
The text is entered at the current position of the focus.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - containing characters and/or Key constants</p>
</li>
<li>
<p>optModifiers <code>String</code> - (optional) an String with only Key constants.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.typeAndDecrypt" class="paragraph">
<div class="title">Environment.typeAndDecrypt(text, optModifiers)</div>
<p>Decrypt and enters the given text one character/key after another using keyDown/keyUp.
The entered text will be masked at the logging. For the details of the decryption see decryptSecret(String).
&lt;p/&gt;
About the usable Key constants see documentation of Key.
The function could also type UTF-8 unicode characters, if the OS supports it.
The text is entered at the current position of the focus.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - containing characters and/or Key constants</p>
</li>
<li>
<p>optModifiers <code>String</code> - (optional) an String with only Key constants.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.decryptSecret" class="paragraph">
<div class="title">Environment.decryptSecret(secret)</div>
<p>Decrypt a encrypted secret and returns the value at runtime.
The decryption will only work like described at <a href="https://github.com/ConSol/sakuli/blob/master/docs/manual/testdefinition/advanced-topics/sakuli-encryption.adoc" class="bare">https://github.com/ConSol/sakuli/blob/master/docs/manual/testdefinition/advanced-topics/sakuli-encryption.adoc</a> .
There will be no logging with the decrypted secret during this step.
&lt;p/&gt;
To create a encrypted secret see "sakuli-manual.md".</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>secret <code>String</code> - encrypted secret as String</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - decrypted String</p>
</div>
<div id="Environment.keyDown" class="paragraph">
<div class="title">Environment.keyDown(keys)</div>
<p>Press and hold the given keys including modifier keys &lt;br/&gt;
use the key constants defined in class Key, &lt;br/&gt;
which only provides a subset of a US-QWERTY PC keyboard layout &lt;br/&gt;
might be mixed with simple characters&lt;br/&gt;
use + to concatenate Key constants</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>keys <code>String</code> - valid keys</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.keyUp" class="paragraph">
<div class="title">Environment.keyUp(keys)</div>
<p>release the given keys (see Environment.keyDown(…)).</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>keys <code>String</code> - valid keys</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.write" class="paragraph">
<div class="title">Environment.write(text)</div>
<p>Compact alternative for type() with more options</p>
</div>
<div class="ulist">
<ul>
<li>
<p>special keys and options are coded as #XN. or #X+ or #X- where X is a reference for a special key and N is an optional repeat factor<br>
A modifier key as #X. modifies the next following key the trailing . ends the special key, the + (press and hold) or - (release) does the same, but signals press-and-hold or release additionally.<br>
except #W / #w all special keys are not case-sensitive<br>
a #wn. inserts a wait of n millisecs or n secs if n less than 60<br>
a #Wn. sets the type delay for the following keys (must be &gt; 60 and denotes millisecs)</p>
</li>
<li>
<p>otherwise taken as normal wait<br>
<strong>Example:</strong> wait 2 secs then type CMD/CTRL - N then wait 1 sec then type DOWN 3 times<br>
<strong>Windows/Linux:</strong> write("#w2.#C.n#W1.#d3.")<br>
<strong>Mac:</strong> write("#w2.#M.n#W1.#D3.")<br>
for more details about the special key codes and examples consult the sikuliX docs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - a coded text interpreted as a series of key actions (press/hold/release)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Environment or NULL on errors.</p>
</div>
<div id="Environment.mouseWheelDown" class="paragraph">
<div class="title">Environment.mouseWheelDown(steps)</div>
<p>move the mouse pointer to the given target location and move the
wheel the given steps down.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>steps <code>number</code> - the number of steps</p>
</li>
</ul>
</div>
<div id="Environment.mouseWheelUp" class="paragraph">
<div class="title">Environment.mouseWheelUp(steps)</div>
<p>move the mouse pointer to the given target location and move the
wheel the given steps up.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>steps <code>number</code> - the number of steps</p>
</li>
</ul>
</div>
<div id="Environment.isWindows" class="paragraph">
<div class="title">Environment.isWindows()</div>
<p><strong>Returns</strong>: <code>boolean</code> - true, if the OS is any instance of an Windows based OS</p>
</div>
<div id="Environment.isLinux" class="paragraph">
<div class="title">Environment.isLinux()</div>
<p><strong>Returns</strong>: <code>boolean</code> - true, if the OS is any instance of an Linux based OS</p>
</div>
<div id="Environment.getOsIdentifier" class="paragraph">
<div class="title">Environment.getOsIdentifier()</div>
<p><strong>Returns</strong>: <code>string</code> - identifier of the current OS</p>
</div>
<div id="Environment.runCommand" class="paragraph">
<div class="title">Environment.runCommand(command, optThrowException)</div>
<p>Runs the assigned command on the host and returns the result. <strong>Attention:</strong> this is OS depended feature! So be
aware which os you are running, maybe us to check <code>Environment#isLinux()</code> or <code>Environment#isWindows()</code>.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>command <code>string</code> - OS depended command as <code>String</code></p>
</li>
<li>
<p>optThrowException <code>boolean</code> - defines if an exception should be thrown, if the exit code != 0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the result as <code>CommandLineResult</code> object, you can use the methods <code>result.getOutput()</code> and <code>result.getExitCode()</code></p>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">var</span> app;
<span class="keyword">if</span>(environmen.runCommand(<span class="string"><span class="delimiter">'</span><span class="content">uname --machine</span><span class="delimiter">'</span></span>) == <span class="string"><span class="delimiter">'</span><span class="content">x86_64</span><span class="delimiter">'</span></span>){
    <span class="comment">//open app from other path</span>
    app = <span class="keyword">new</span> Application(<span class="string"><span class="delimiter">'</span><span class="content">/lib64/appname</span><span class="delimiter">'</span></span>);
} <span class="keyword">else</span> {
    app = <span class="keyword">new</span> Application(<span class="string"><span class="delimiter">'</span><span class="content">/lib/appname</span><span class="delimiter">'</span></span>);
}</code></pre>
</div>
</div>
<div id="Environment.getEnv" class="paragraph">
<div class="title">Environment.getEnv(key)</div>
<p>Reads out the environment variable with the assigned key</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>key <code>string</code> - of environment variable</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <code>string</code> - value or <code>null</code></p>
</div>
<div id="Environment.getProperty" class="paragraph">
<div class="title">Environment.getProperty(key)</div>
<p>Reads out the property value with the assigned key</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>key <code>string</code> - of property</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <code>string</code> - value or <code>null</code></p>
</div>
</div>
<div class="sect4">
<h5 id="Key"><a class="anchor" href="#Key"></a>1.4.1.6. Key</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api-key.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/sakuli-api-key.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>All non-character keys are represented by <em>Key</em> constants which can be used in type functions.</p>
</div>
<div class="paragraph">
<p>The following <a href="#Key">Key</a> values are available:</p>
</div>
<div class="paragraph">
<p><code>SPACE</code>, <code>ENTER</code>, <code>BACKSPACE</code>, <code>TAB</code>, <code>ESC</code>, <code>UP</code>, <code>RIGHT</code>, <code>DOWN</code>, <code>LEFT</code>, <code>PAGE_UP</code>, <code>PAGE_DOWN</code>, <code>DELETE</code>, <code>END</code>,
<code>HOME</code>, <code>INSERT</code>, <code>F1</code>, <code>F2</code>, <code>F3</code>, <code>F4</code>, <code>F5</code>, <code>F6</code>, <code>F7</code>, <code>F8</code>, <code>F9</code>, <code>F10</code>, <code>F11</code>, <code>F12</code>, <code>F13</code>, <code>F14</code>, <code>F15</code>,
<code>SHIFT</code>, <code>CTRL</code>, <code>ALT</code>, <code>ALTGR</code>, <code>META</code>, <code>CMD</code>, <code>WIN</code>, <code>PRINTSCREEN</code>, <code>SCROLL_LOCK</code>, <code>PAUSE</code>, <code>CAPS_LOCK</code>, <code>NUM0</code>,
<code>NUM1</code>, <code>NUM2</code>, <code>NUM3</code>, <code>NUM4</code>, <code>NUM5</code>, <code>NUM6</code>, <code>NUM7</code>, <code>NUM8</code>, <code>NUM9</code>, <code>SEPARATOR</code>, <code>NUM_LOCK</code>, <code>ADD</code>, <code>MINUS</code>,
<code>MULTIPLY</code>, <code>DIVIDE</code>, <code>DECIMAL</code>, <code>CONTEXT</code></p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="paragraph">
<p>Press <code>F1</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">env.type(Key.F1);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Close a window by typing the shortcut <code>ALT + F4</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="comment">// the second parameter is the held (=&quot;modifier&quot;) key</span>
env.type(Key.F4, Key.ALT);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open the file manager on Windows with shortcut <code>WIN + e</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">env.type(<span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>, Key.META)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Do something application specific with shortcut <code>CTRL + ALT + b</code> (CTRL + ALT = ALTGR):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">env.type(<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>, Key.ALTGR)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Closing an window over typing the short cut <code>ALT + F4</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">env.type(Key.F4, Key.ALT);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Using <code>Key.ALTGR</code> on Unix:</strong></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To enable the key command <code>ALTGR</code> on unix systems please bind it to <code>CTRL + ALT</code>. For more information
see <a href="http://unix.stackexchange.com/questions/157834/how-to-bind-altgr-to-ctrl-alt">stackexchange.com - how-to-bind-altgr-to-ctrl-alt</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Key">Key</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Logger"><a class="anchor" href="#Logger"></a>1.4.1.7. Logger</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api-logger.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/sakuli-api-logger.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Logger - Logging functions to do 'debug, 'info', 'warning' and 'error' log entries.</p>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Logger">Logger</a></p>
</li>
<li>
<p><a href="#Logger.logError">Logger.logError(message)</a></p>
</li>
<li>
<p><a href="#Logger.logWarning">Logger.logWarning(message)</a></p>
</li>
<li>
<p><a href="#Logger.logInfo">Logger.logInfo(message)</a></p>
</li>
<li>
<p><a href="#Logger.logDebug">Logger.logDebug(message)</a></p>
</li>
</ul>
</div>
<div id="Logger.logError" class="paragraph">
<div class="title">Logger.logError(message)</div>
<p>make a error-log over Java backend into the log file.
This won&#8217;t stop the execution of the test case.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>message <code>String</code> - as a String</p>
</li>
</ul>
</div>
<div id="Logger.logWarning" class="paragraph">
<div class="title">Logger.logWarning(message)</div>
<p>make a debug-log over Java backend into the log file.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>message <code>String</code> - as a String</p>
</li>
</ul>
</div>
<div id="Logger.logInfo" class="paragraph">
<div class="title">Logger.logInfo(message)</div>
<p>make a info-log over Java backend into the log file.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>message <code>String</code> - as a String</p>
</li>
</ul>
</div>
<div id="Logger.logDebug" class="paragraph">
<div class="title">Logger.logDebug(message)</div>
<p>make a debug-log over Java backend into the log file.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>message <code>String</code> - as a String</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="MouseButton"><a class="anchor" href="#MouseButton"></a>1.4.1.8. MouseButton</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api-mouse-button.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/sakuli-api-mouse-button.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>MouseButton - representing the possible mouse action button.</p>
</div>
<div class="paragraph">
<p>The following <strong>MouseButton</strong> values are possible:</p>
</div>
<div class="paragraph">
<p><code>LEFT</code>, <code>RIGHT</code>, <code>MIDDLE</code></p>
</div>
<div class="paragraph">
<p><strong>Example</strong>
Press and release the right mouse button for 3 seconds on a specified region:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">var</span> region = <span class="keyword">new</span> Region().find(<span class="string"><span class="delimiter">&quot;</span><span class="content">your-pattern.png</span><span class="delimiter">&quot;</span></span>);
region.mouseDown(MouseButton.RIGHT).sleep(<span class="integer">3</span>).mouseUp(MouseButton.RIGHT);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#MouseButton">MouseButton</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Region"><a class="anchor" href="#Region"></a>1.4.1.9. Region</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api-region.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/sakuli-api-region.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Region - Represents a region as a part of or the hole screen.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>optResumeOnException <code>Boolean</code> - if true, the test execution won&#8217;t stop on an occurring error. Default: false.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">var</span> screen = <span class="keyword">new</span> Region();   <span class="comment">//represents the hole screen`</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Region">Region</a></p>
</li>
<li>
<p><a href="#Region.find">Region.find(imageName)</a></p>
</li>
<li>
<p><a href="#Region.findRegion">Region.findRegion()</a></p>
</li>
<li>
<p><a href="#Region.exists">Region.exists(imageName, optWaitSeconds)</a></p>
</li>
<li>
<p><a href="#Region.click">Region.click()</a></p>
</li>
<li>
<p><a href="#Region.doubleClick">Region.doubleClick()</a></p>
</li>
<li>
<p><a href="#Region.rightClick">Region.rightClick()</a></p>
</li>
<li>
<p><a href="#Region.mouseMove">Region.mouseMove()</a></p>
</li>
<li>
<p><a href="#Region.mouseDown">Region.mouseDown(mouseButton)</a></p>
</li>
<li>
<p><a href="#Region.mouseUp">Region.mouseUp(mouseButton)</a></p>
</li>
<li>
<p><a href="#Region.dragAndDropTo">Region.dragAndDropTo(targetRegion)</a></p>
</li>
<li>
<p><a href="#Region.waitForImage">Region.waitForImage(imageName, seconds)</a></p>
</li>
<li>
<p><a href="#Region.paste">Region.paste(text)</a></p>
</li>
<li>
<p><a href="#Region.pasteMasked">Region.pasteMasked(text)</a></p>
</li>
<li>
<p><a href="#Region.pasteAndDecrypt">Region.pasteAndDecrypt(text)</a></p>
</li>
<li>
<p><a href="#Region.type">Region.type(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Region.typeMasked">Region.typeMasked(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Region.typeAndDecrypt">Region.typeAndDecrypt(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Region.keyDown">Region.keyDown(keys)</a></p>
</li>
<li>
<p><a href="#Region.keyUp">Region.keyUp(keys)</a></p>
</li>
<li>
<p><a href="#Region.write">Region.write(text)</a></p>
</li>
<li>
<p><a href="#Region.deleteChars">Region.deleteChars(amountOfChars)</a></p>
</li>
<li>
<p><a href="#Region.mouseWheelDown">Region.mouseWheelDown(steps)</a></p>
</li>
<li>
<p><a href="#Region.mouseWheelUp">Region.mouseWheelUp(steps)</a></p>
</li>
<li>
<p><a href="#Region.move">Region.move(offsetX, offsetY)</a></p>
</li>
<li>
<p><a href="#Region.grow">Region.grow(range)</a></p>
</li>
<li>
<p><a href="#Region.grow">Region.grow(width, height)</a></p>
</li>
<li>
<p><a href="#Region.above">Region.above(range)</a></p>
</li>
<li>
<p><a href="#Region.below">Region.below(range)</a></p>
</li>
<li>
<p><a href="#Region.left">Region.left(range)</a></p>
</li>
<li>
<p><a href="#Region.right">Region.right(range)</a></p>
</li>
<li>
<p><a href="#Region.setH">Region.setH(height)</a></p>
</li>
<li>
<p><a href="#Region.getH">Region.getH()</a></p>
</li>
<li>
<p><a href="#Region.setW">Region.setW(width)</a></p>
</li>
<li>
<p><a href="#Region.getW">Region.getW()</a></p>
</li>
<li>
<p><a href="#Region.setX">Region.setX(x)</a></p>
</li>
<li>
<p><a href="#Region.getX">Region.getX()</a></p>
</li>
<li>
<p><a href="#Region.setY">Region.setY(y)</a></p>
</li>
<li>
<p><a href="#Region.getY">Region.getY()</a></p>
</li>
<li>
<p><a href="#Region.highlight">Region.highlight(seconds)</a></p>
</li>
<li>
<p><a href="#Region.takeScreenshot">Region.takeScreenshot(filename)</a></p>
</li>
<li>
<p><a href="#Region.takeScreenshotWithTimestamp">Region.takeScreenshotWithTimestamp(filenamePostfix, optFolderPath, optFormat)</a></p>
</li>
<li>
<p><a href="#Region.sleep">Region.sleep(seconds)</a></p>
</li>
<li>
<p><a href="#Region.sleepMs">Region.sleepMs(milliseconds)</a></p>
</li>
<li>
<p><a href="#Region.extractText">Region.extractText()</a></p>
</li>
</ul>
</div>
<div id="Region.find" class="paragraph">
<div class="title">Region.find(imageName)</div>
<p>Finds an image inside this region immediately.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>imageName <code>String</code> - name of the preloaded picture
(if not set, the find operation will take place on the predefined region object.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the found Region or if the target can&#8217;t be found null.</p>
</div>
<div id="Region.findRegion" class="paragraph">
<div class="title">Region.findRegion()</div>
<p>Finds a target in this Region immediately;</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the found Region or if the target can&#8217;t be found null.</p>
</div>
<div id="Region.exists" class="paragraph">
<div class="title">Region.exists(imageName, optWaitSeconds)</div>
<p>Check whether the give pattern is visible on the screen.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>imageName <code>String</code> - if set, the function search inside the given region for the image</p>
</li>
<li>
<p>optWaitSeconds <code>number</code> - if set, the function search for x seconds for the pattern.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or null</p>
</div>
<div id="Region.click" class="paragraph">
<div class="title">Region.click()</div>
<p>makes a mouse click on the center of the Region.</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the Region or NULL on errors.</p>
</div>
<div id="Region.doubleClick" class="paragraph">
<div class="title">Region.doubleClick()</div>
<p>makes a double click on the center of the Region.</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the Region or NULL on errors.</p>
</div>
<div id="Region.rightClick" class="paragraph">
<div class="title">Region.rightClick()</div>
<p>makes a right click on the center of the Region.</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the Region or NULL on errors.</p>
</div>
<div id="Region.mouseMove" class="paragraph">
<div class="title">Region.mouseMove()</div>
<p>Move the mouse pointer to the center of the <a href="#Region">Region</a> and "hovers" it.</p>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the <a href="#Region">Region</a> or NULL on errors.</p>
</div>
<div id="Region.mouseDown" class="paragraph">
<div class="title">Region.mouseDown(mouseButton)</div>
<p>Low-level mouse action to press the assigned <a href="#MouseButton">MouseButton</a> on the current position.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>mouseButton - on of <a href="#MouseButton">MouseButton</a> values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the <a href="#Region">Region</a> or NULL on errors.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>
Press and release the right mouse button for 3 seconds on a specified region:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">var</span> region = <span class="keyword">new</span> Region().find(<span class="string"><span class="delimiter">&quot;</span><span class="content">your-pattern.png</span><span class="delimiter">&quot;</span></span>);
region.mouseDown(MouseButton.RIGHT).sleep(<span class="integer">3</span>).mouseUp(MouseButton.RIGHT);</code></pre>
</div>
</div>
<div id="Region.mouseUp" class="paragraph">
<div class="title">Region.mouseUp(mouseButton)</div>
<p>Low-level mouse action to release the assigned <a href="#MouseButton">MouseButton</a>.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>mouseButton - on of <a href="#MouseButton">MouseButton</a> values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the <a href="#Region">Region</a> or NULL on errors.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="paragraph">
<p>Press and release the right mouse button for 3 seconds on a specified region:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">var</span> region = <span class="keyword">new</span> Region().find(<span class="string"><span class="delimiter">&quot;</span><span class="content">your-pattern.png</span><span class="delimiter">&quot;</span></span>);
region.mouseDown(MouseButton.RIGHT).sleep(<span class="integer">3</span>).mouseUp(MouseButton.RIGHT);</code></pre>
</div>
</div>
<div id="Region.dragAndDropTo" class="paragraph">
<div class="title">Region.dragAndDropTo(targetRegion)</div>
<p>Drag from region&#8217;s current position and drop at given targetRegion and using the left mouse.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>targetRegion &lt;code&gt;<a href="#Region">Region</a>&lt;/code&gt; - target where to drop</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - the Region or NULL on failure</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>
move the bubble button 20px to the right:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">var</span> bubble = screen.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">bubble.png</span><span class="delimiter">&quot;</span></span>);
bubble.dragAndDropTo(bubble.right(<span class="integer">20</span>));</code></pre>
</div>
</div>
<div id="Region.waitForImage" class="paragraph">
<div class="title">Region.waitForImage(imageName, seconds)</div>
<p>Blocks and waits until a target which is specified by the optImageName is found in the hole
Screen within a given time period in seconds.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>imageName <code>String</code> - name of the image pattern</p>
</li>
<li>
<p>seconds <code>number</code> - the maximum time to waitFor in seconds</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a Region object representing the region occupied by the found target,
 or null if the target can not be found within the given time.</p>
</div>
<div id="Region.paste" class="paragraph">
<div class="title">Region.paste(text)</div>
<p>pastes the text at the current position of the focus/carret &lt;br/&gt;using the
clipboard and ctrl/cmd-v (paste keyboard shortcut)</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - as a string, which might contain unicode characters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.pasteMasked" class="paragraph">
<div class="title">Region.pasteMasked(text)</div>
<p>makes a masked paste(String) without any logging.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - a string, which might contain unicode characters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.pasteAndDecrypt" class="paragraph">
<div class="title">Region.pasteAndDecrypt(text)</div>
<p>combines pasteMasked(String) and decryptSecret(String).</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - encrypted secret</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.type" class="paragraph">
<div class="title">Region.type(text, optModifiers)</div>
<p>Enters the given text one character/key after another using keyDown/keyUp.
&lt;p/&gt;
About the usable Key constants see documentation of Key.
The function could also type UTF-8 unicode characters, if the OS supports it.
The text is entered at the current position of the focus.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - containing characters and/or Key constants</p>
</li>
<li>
<p>optModifiers <code>String</code> - (optional) an String with only Key constants.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.typeMasked" class="paragraph">
<div class="title">Region.typeMasked(text, optModifiers)</div>
<p>Enters the given text one character/key after another using keyDown/keyUp.
The entered text will be masked at the logging.
&lt;p/&gt;
About the usable Key constants see documentation of Key.
The function could also type UTF-8 unicode characters, if the OS supports it.
The text is entered at the current position of the focus.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - containing characters and/or Key constants</p>
</li>
<li>
<p>optModifiers <code>String</code> - (optional) an String with only Key constants.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.typeAndDecrypt" class="paragraph">
<div class="title">Region.typeAndDecrypt(text, optModifiers)</div>
<p>Decrypt and enters the given text one character/key after another using keyDown/keyUp.
The entered text will be masked at the logging. For the details of the decryption see decryptSecret(String).
&lt;p/&gt;
About the usable Key constants see documentation of Key.
The function could also type UTF-8 unicode characters, if the OS supports it.
The text is entered at the current position of the focus.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - containing characters and/or Key constants</p>
</li>
<li>
<p>optModifiers <code>String</code> - (optional) an String with only Key constants.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.keyDown" class="paragraph">
<div class="title">Region.keyDown(keys)</div>
<p>Press and hold the given keys including modifier keys &lt;br/&gt;
use the key constants defined in class Key, &lt;br/&gt;
which only provides a subset of a US-QWERTY PC keyboard layout &lt;br/&gt;
might be mixed with simple characters&lt;br/&gt;
use + to concatenate Key constants</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>keys <code>String</code> - valid keys</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.keyUp" class="paragraph">
<div class="title">Region.keyUp(keys)</div>
<p>release the given keys (see Region.keyDown(…)).</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>keys <code>String</code> - valid keys</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.write" class="paragraph">
<div class="title">Region.write(text)</div>
<p>Compact alternative for type() with more options</p>
</div>
<div class="ulist">
<ul>
<li>
<p>special keys and options are coded as #XN. or #X+ or #X- where X is a reference for a special key and N is an optional repeat factor<br>
A modifier key as #X. modifies the next following key the trailing . ends the special key, the + (press and hold) or - (release) does the same, but signals press-and-hold or release additionally.<br>
except #W / #w all special keys are not case-sensitive<br>
a #wn. inserts a wait of n millisecs or n secs if n less than 60<br>
a #Wn. sets the type delay for the following keys (must be &gt; 60 and denotes millisecs)</p>
</li>
<li>
<p>otherwise taken as normal wait<br>
<strong>Example:</strong> wait 2 secs then type CMD/CTRL - N then wait 1 sec then type DOWN 3 times<br>
<strong>Windows/Linux:</strong> write("#w2.#C.n#W1.#d3.")<br>
<strong>Mac:</strong> write("#w2.#M.n#W1.#D3.")<br>
for more details about the special key codes and examples consult the sikuliX docs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>text <code>String</code> - a coded text interpreted as a series of key actions (press/hold/release)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.deleteChars" class="paragraph">
<div class="title">Region.deleteChars(amountOfChars)</div>
<p>delete a amount of chars in a field</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>amountOfChars <code>number</code> - number of chars to delete</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or null on errors</p>
</div>
<div id="Region.mouseWheelDown" class="paragraph">
<div class="title">Region.mouseWheelDown(steps)</div>
<p>move the mouse pointer to the given target location and move the
wheel the given steps down.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>steps <code>number</code> - the number of steps</p>
</li>
</ul>
</div>
<div id="Region.mouseWheelUp" class="paragraph">
<div class="title">Region.mouseWheelUp(steps)</div>
<p>move the mouse pointer to the given target location and move the
wheel the given steps up.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>steps <code>number</code> - the number of steps</p>
</li>
</ul>
</div>
<div id="Region.move" class="paragraph">
<div class="title">Region.move(offsetX, offsetY)</div>
<p>Set a offset to a specific Region and returns the new Region object.
The offset function will move the Region&#8217;s rectangle x pixels to the right and y pixels down.
The size of the rectangle will be the same.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>offsetX <code>number</code> - x-value for the offset action</p>
</li>
<li>
<p>offsetY <code>number</code> - y-value for the offset action</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a Region with the new coordinates</p>
</div>
<div id="Region.grow" class="paragraph">
<div class="title">Region.grow(range)</div>
<p>create a region enlarged range pixels on each side</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>range <code>number</code> - of pixels</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a new Region</p>
</div>
<div id="Region.grow" class="paragraph">
<div class="title">Region.grow(width, height)</div>
<p>create a region with enlarged range pixels</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>width <code>number</code> - in pixels to grow in both directions</p>
</li>
<li>
<p>height <code>number</code> - in pixels to grow in both directions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a new Region</p>
</div>
<div id="Region.above" class="paragraph">
<div class="title">Region.above(range)</div>
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>range <code>number</code> - of pixels</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a new Region that is defined above the current region’s top border
with a height of range number of pixels.</p>
</div>
<div id="Region.below" class="paragraph">
<div class="title">Region.below(range)</div>
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>range <code>number</code> - of pixels</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a new Region that is defined below the current region’s bottom border
with a height of range number of pixels.</p>
</div>
<div id="Region.left" class="paragraph">
<div class="title">Region.left(range)</div>
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>range <code>number</code> - of pixels</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a new Region that is defined on the left the current region’s left border
with a width of range number of pixels.</p>
</div>
<div id="Region.right" class="paragraph">
<div class="title">Region.right(range)</div>
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>range <code>number</code> - of pixels</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - a new Region that is defined on the right the current region’s right border
with a width of range number of pixels.</p>
</div>
<div id="Region.setH" class="paragraph">
<div class="title">Region.setH(height)</div>
<p>set the height, based form the upper left corner downsides</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>height <code>number</code> - in pixels</p>
</li>
</ul>
</div>
<div id="Region.getH" class="paragraph">
<div class="title">Region.getH()</div>
<p><strong>Returns</strong>: - height as int value</p>
</div>
<div id="Region.setW" class="paragraph">
<div class="title">Region.setW(width)</div>
<p>set the width, based form the upper left corner to the right</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>width <code>number</code></p>
</li>
</ul>
</div>
<div id="Region.getW" class="paragraph">
<div class="title">Region.getW()</div>
<p><strong>Returns</strong>: - width as int value</p>
</div>
<div id="Region.setX" class="paragraph">
<div class="title">Region.setX(x)</div>
<p>set the X coordinate of the upper left corner.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>x <code>number</code></p>
</li>
</ul>
</div>
<div id="Region.getX" class="paragraph">
<div class="title">Region.getX()</div>
<p><strong>Returns</strong>: - width as int value</p>
</div>
<div id="Region.setY" class="paragraph">
<div class="title">Region.setY(y)</div>
<p>set the Y coordinate of the upper left corner.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>y <code>number</code></p>
</li>
</ul>
</div>
<div id="Region.getY" class="paragraph">
<div class="title">Region.getY()</div>
<p><strong>Returns</strong>: - Y coordinate of the upper left corner</p>
</div>
<div id="Region.highlight" class="paragraph">
<div class="title">Region.highlight(seconds)</div>
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>seconds <code>number</code> - highlights this Region for x seconds
or the default time</p>
</li>
</ul>
</div>
<div id="Region.takeScreenshot" class="paragraph">
<div class="title">Region.takeScreenshot(filename)</div>
<p>Takes a screenshot of this <a href="#Region">Region</a> and saves it to the assigned path. If there ist just a file name, the
screenshot will be saved in your current testcase folder.
Supported formats: <code>jpg</code> and <code>png</code></p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>filename <code>String</code> - <code>pathname/filename.format</code> or just <code>filename.format</code> for example <code>test.png</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <code>Path</code> - to the created screenshot OR null on errors
<strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">region.takeScreenshot(<span class="string"><span class="delimiter">&quot;</span><span class="content">test.png</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div id="Region.takeScreenshotWithTimestamp" class="paragraph">
<div class="title">Region.takeScreenshotWithTimestamp(filenamePostfix, optFolderPath, optFormat)</div>
<p>Takes a screenshot of this <a href="#Region">Region</a> and add the current timestamp in the file name like e.g.:</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>filenamePostfix <code>String</code> - postfix for the final filename
Default: screenshot</p>
</li>
<li>
<p>optFolderPath <code>String</code> - optional FolderPath, where to save the screenshot.
If null or empty: testcase folder will be used</p>
</li>
<li>
<p>optFormat <code>string</code> - optional format, for the screenshot (currently supported: jpg and png)
If null or empty use property <code>sakuli.screenshot.format</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: <code>Path</code> - to the created screenshot OR null on errors
<strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">region.takeScreenshotWithTimestamp(<span class="string"><span class="delimiter">&quot;</span><span class="content">my-screenshot</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>saved under: <code>mytestsuite/testcase1/2017_08_03_14_06_13_255_my_screenshot.png</code></p>
</div>
<div id="Region.sleep" class="paragraph">
<div class="title">Region.sleep(seconds)</div>
<p>Blocks the current testcase execution for x seconds</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>seconds <code>number</code> - to sleep</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.sleepMs" class="paragraph">
<div class="title">Region.sleepMs(milliseconds)</div>
<p>Blocks the current testcase execution for x milliseconds</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>milliseconds <code>number</code> - to sleep</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Returns</strong>: - this Region or NULL on errors.</p>
</div>
<div id="Region.extractText" class="paragraph">
<div class="title">Region.extractText()</div>
<p><strong>Returns</strong>: - from this region a extracted Text as String</p>
</div>
<div class="sect5">
<h6 id="RegionRectangle"><a class="anchor" href="#RegionRectangle"></a>RegionRectangle</h6>
<div class="paragraph">
<p>RegionRectangle (extends <a href="#Region">Region</a>) - Represents a region specified by the x and y coordinates, width and
height as a part of the screen.</p>
</div>
<div class="paragraph">
<p><strong>Params</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>x <code>number</code> - – x position of a rectangle on the screen.</p>
</li>
<li>
<p>y <code>number</code> - – y position of a rectangle on the screen.</p>
</li>
<li>
<p>w <code>number</code> - – width of a rectangle in pixel.</p>
</li>
<li>
<p>h <code>number</code> - – height of a rectangle in pixel.</p>
</li>
<li>
<p>optResumeOnException <code>Boolean</code> - (optional) if true, the test execution won&#8217;t stop on an occurring error.
Default: false.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="keyword">var</span> notepadRegion = <span class="keyword">new</span> RegionRectangle(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">100</span>,<span class="integer">100</span>);
<span class="comment">//represents a region which start at x=0, y=o (left upper corner) and have a size of 100px * 100px.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Members</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#RegionRectangle">RegionRectangle</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_additional_topics"><a class="anchor" href="#_additional_topics"></a>1.4.2. Additional Topics</h4>
<div class="paragraph">
<p>This page contains different topics regarding the configuration of both <strong>Sakuli</strong> and its components: <strong>Sahi</strong> and <strong>Sikuli</strong>.</p>
</div>
<div class="sect4">
<h5 id="property-loading-mechanism"><a class="anchor" href="#property-loading-mechanism"></a>1.4.2.1. Property loading mechanism</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sakuli-property-loading.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sakuli-property-loading.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p><strong>Sakuli properties</strong> are predefined in <code><em>SAKULI_HOME</em>/config/sakuli-default.properties</code>; these values should/can be <strong>overwritten</strong> in the following order (last match wins):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>as a <strong>global testsuite property</strong> in <code>test-suites-folder/sakuli.properties</code>
-&gt; valid for <strong>all test suites</strong> within this folder</p>
</li>
<li>
<p>as a <strong>testsuite property</strong> in <code>test-suites-folder/test-suite/testsuite.properties</code>
-&gt; valid for the <strong>test suite</strong> itself and <strong>all test cases</strong> within it</p>
</li>
<li>
<p>as a <strong>Java VM option</strong> as option of the Sakuli starter, like <code>sakuli run -D log.level.sakuli=DEBUG</code>,
-&gt; valid for only one test run</p>
</li>
<li>
<p>as a <strong>environment variable</strong>  matching the property key in dashed uppercase writing, e.g. <code>LOG_LEVEL_SAKULI=DEBUG</code>  -&gt; overwrites property <code>log.level.sakuli</code> as long as environment variable is defined</p>
</li>
<li>
<p>as a <strong>explicit starter option</strong> (if present) of the Sakuli CLI, e.g. <code>sakuli run test -browser chrome</code>
-&gt; valid for only one test run</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We do not recommend to change any values in <code><em>SAKULI_HOME</em>/config/sakuli-default.properties</code> as a new version of Sakuli will have its own default property file and would overwrite the existing one; your changes would not be preserved.</p>
</div>
<div class="sect5">
<h6 id="sakuli-default-properties"><a class="anchor" href="#sakuli-default-properties"></a>Property Reference</h6>
<div class="paragraph">
<p>The file <code>sakuli-default.properties</code> contains all possible configuration possibilities and default values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">#
# Sakuli - Testing and Monitoring-Tool for Websites and common UIs.
#
# Copyright 2013 - 2015 the original author or authors.
#
# Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# @formatter:off

#####################################################################################
#######################################################################################
# All properties defined here are DEFAULT and should NOT be CHANGED.
#
# To define a specific behaviour to your test, it is possible to overwrite all properties of the Sakuli default
# properties 'sakuli-default.properties'.
# For a short guideline how the property replacement mechanism in Sakuli works and how properties should be
# overwritten, please refer to https://github.com/ConSol/sakuli/blob/master/docs/manual/testdefinition/advanced-topics/sakuli-property-loading.adoc
#######################################################################################
#######################################################################################



#######################################################################################
# TEST-SUITE-META-PROPERTIES
#
# These properties describes the set of configuration for a test suite.
#######################################################################################

# The test suite ID is an unique ID, which identifies the same test suite
# over all executions and configuration changes.
# The 'testsuite.id' MUST be defined in the 'testsuite.properties'
testsuite.id=

#######################################################################################
# OPTIONAL-PROPERTIES for the test suite
#
# If this properties haven NOT been set, the test suite will be configured with the
# default values.
#######################################################################################

# Descriptive name for the current test suite
# DEFAULT: value of 'testsuite.id'
testsuite.name=

# The warning runtime threshold (seconds) estimates the execution time of the complete
# test suite. If the warning time is exceeded, the test suite will get the state
# 'WARNING'.
# If the threshold is set to 0, the execution time will never exceed, so the state will be always OK!
# DEFAULT:0
testsuite.warningTime=0

# The critical runtime threshold (seconds) estimates the execution time of the complete
# test suite. If the critical time is exceeded, the test suite will get the state
# 'CRITICAL'.
# If the threshold is set to 0, the execution time will never exceed, so the state will be always OK!
# DEFAULT:0
testsuite.criticalTime=0

# Defines the browser in witch the test suite should be executed
# values are corresponding to the file
# &lt;sahi-installtion-folder&gt;/userdata/config/browser_types.
#
# DEFAULT: firefox
testsuite.browser=firefox




#######################################################################################
# SAKULI-ACTION-PROPERTIES
#
# Common settings
#######################################################################################


# Similarity is taken as a &quot;higher-than&quot; value, that means for a match candidate region that more than
#'sakuli.region.similarity.default' percent of the region's pixels must coincide. Decreasing this value should only be
# necessary if the pattern images are of poor quality or the screen always differs slightly from the pattern images
# (e.g. compression of remote sessions like vnc).
#
# DEFAULT: true
sakuli.environment.similarity.default=0.99

# If true, the test suite takes screenshots when an error occurs during the execution.
#
# DEFAULT: true
sakuli.screenshot.onError=true

### If true, every region gets highlighted automatically
# en-/disable
#
# DEFAULT: false
sakuli.autoHighlight.enabled=false

# Auto highlight duration (float)
#
# DEFAULT: 1.1f
sakuli.highlight.seconds=1.1f

### Sikuli Action Delays
#
#set the default type and click delay in seconds;
sikuli.typeDelay=0.00
sikuli.clickDelay=0.2
#######################################################################################
# ENCRYPTION-PROPERTIES
#
# Defines the properties how to en-/decrypt secrets
# For more information see:
# https://github.com/ConSol/sakuli/blob/master/docs/manual/testdefinition/advanced-topics/sakuli-encryption.adoc
#######################################################################################
### Encryption Mode
# Available modes are currently:
# * &quot;environment&quot; using the environment variable `SAKULI_ENCRYPTION_KEY` (or if not present the property
#   `sakuli.encryption.key`) as master key for encryption (default)
# * &quot;interface&quot; using the host ethernet interface MAC address to encrypt a secret.
#
sakuli.encryption.mode=environment
### Encryption environment Settings (sakuli.encryption.mode=environment)
# Overwrite this property or us the environment var `SAKULI_ENCRYPTION_KEY` as master key for en- and decryption
#
### Encryption environment Settings (sakuli.encryption.mode=environment_key)
# Overwrite this property or us the environment var `SAKULI_ENCRYPTION_KEY` as master key for en- and decryption
#
sakuli.encryption.key=
#
#
### Encryption Interface Settings (sakuli.encryption.mode=interface)
# If this property is enabled, Sakuli will choose automatically the first ethernet interface for encryption.
# To use a specific interface set it to 'false'
#
# DEFAULT:true
sakuli.encryption.interface.autodetect=true
#
# Defines a specific network interface which should be used for the encryption functions.
# Therefore set the property 'sakuli.encryption.interface.autodetect=false'.
#
# Example: sakuli.encryption.interface=eth0
sakuli.encryption.interface=

#######################################################################################
# FORWARDER-PROPERTIES
#
# Defines the properties for all forwarders. Currently supported: JDBC, Gearman/mod-gearman, Icinga, CheckMK.
#######################################################################################

# Set the default folder, where the Twig templates for the different forwarders are placed
# (e.g. the Check_MK templates are placed in a subdirectory check_mk).
# For more information about twig templates, please refer to http://jtwig.org/
sakuli.forwarder.template.folder=${sakuli.home.folder}/config/templates

##### GEARMAN - FORWARDER
# Send results to a gearman-enabled monitoring system, using the parameters below in your 'sakuli.properties' to activate the forwarder.
# For more information see https://github.com/ConSol/sakuli/blob/master/docs/forwarder-gearman.md
#
## Gearman server settings:
# DEFAULT: false
sakuli.forwarder.gearman.enabled=false
sakuli.forwarder.gearman.server.host=changeme
# DEFAULT: 4730
sakuli.forwarder.gearman.server.port=4730
# Nagios host where all Sakuli services are defined on. If necessary, overwrite this value per test suite.
sakuli.forwarder.gearman.nagios.hostname=changeme
#
#
### OPTIONAL GEARMAN PROPERTIES:
# DEFAULT: check_results
sakuli.forwarder.gearman.server.queue=check_results
#
## Encryption:
# For serverside configuration see https://labs.consol.de/de/nagios/mod-gearman/index.html.
sakuli.forwarder.gearman.encryption=true
# ATTENTION: change the secret for production use!!!
sakuli.forwarder.gearman.secret.key=sakuli_secret
#
## Result caching:
# Caches results when gearman server is temporarily not available.
sakuli.forwarder.gearman.cache.enabled=true
# Time in milliseconds to wait between result job submit (used when processing cached results)
sakuli.forwarder.gearman.job.interval=1000
#
## Nagios service options:
# check_command gets appended to the perfdata string and will be used as PNP template name (check_sakuli = default)
sakuli.forwarder.gearman.nagios.check_command=check_sakuli
# optional service description forwarded to nagios check result. DEFAULT: testsuite.id
sakuli.forwarder.gearman.nagios.service_description=${testsuite.id}
#
## Result template:
# Output message template strings. Change only if needed.
sakuli.forwarder.gearman.nagios.template.suite.summary={{state_short}} Sakuli suite &quot;{{id}}&quot; {{suite_summary}}. (Last suite run: {{stop_date}})
sakuli.forwarder.gearman.nagios.template.suite.summary.maxLength=200
sakuli.forwarder.gearman.nagios.template.suite.table={{state_short}} Sakuli suite &quot;{{id}}&quot; {{suite_summary}}. (Last suite run: {{stop_date}}){{error_screenshot}}
sakuli.forwarder.gearman.nagios.template.case.ok={{state_short}} case &quot;{{id}}&quot; ran in {{duration}}s - {{state_description}}
sakuli.forwarder.gearman.nagios.template.case.warning={{state_short}} case &quot;{{id}}&quot; over runtime ({{duration}}s/warn at {{warning_threshold}}s){{step_information}}
sakuli.forwarder.gearman.nagios.template.case.warningInStep={{state_short}} case &quot;{{id}}&quot; over runtime ({{duration}}s/warn at {{warning_threshold}}s){{step_information}}
sakuli.forwarder.gearman.nagios.template.case.critical={{state_short}} case &quot;{{id}}&quot; over runtime ({{duration}}s/crit at {{critical_threshold}}s){{step_information}}
sakuli.forwarder.gearman.nagios.template.case.error={{state_short}} case &quot;{{id}}&quot; {{state_description}}: {{error_message}}{{error_screenshot}}
## Screenshot dimensions in Gearman output
sakuli.forwarder.gearman.nagios.template.screenshotDivWidth=640px


##### ICINGA2 - FORWARDER
# Send results to a Icinga2 monitoring system, using the parameters below in your 'sakuli.properties' to activate the forwarder.
# For more information see https://github.com/ConSol/sakuli/blob/master/docs/forwarder/icinga2.md
#
# DEFAULT: false
sakuli.forwarder.icinga2.enabled=false
## Icinga API settings
sakuli.forwarder.icinga2.api.host=changeme
sakuli.forwarder.icinga2.api.port=5665
sakuli.forwarder.icinga2.api.username=icinga-api-user
sakuli.forwarder.icinga2.api.password=icinga-api-password
# Icinga host with sakuli services
sakuli.forwarder.icinga2.hostname=changeme
#
### OPTIONAL ICINGA2 PROPERTIES:
# Icinga service description. DEFAULT: testsuite.id
sakuli.forwarder.icinga2.service_description=${testsuite.id}
# REST-URL where to send the Icinga2 results
sakuli.forwarder.icinga2.api.url=https://${sakuli.forwarder.icinga2.api.host}:${sakuli.forwarder.icinga2.api.port}/v1/actions/process-check-result?service=${sakuli.forwarder.icinga2.hostname}!${sakuli.forwarder.icinga2.service_description}
#
## Result template:
#Icinga 'plugin_output' template strings. Change only if needed.
sakuli.forwarder.icinga2.template.suite.summary={{state_short}} Sakuli suite &quot;{{id}}&quot; {{suite_summary}}. (Last suite run: {{stop_date}})
sakuli.forwarder.icinga2.template.suite.summary.maxLength=200
sakuli.forwarder.icinga2.template.case.ok={{state_short}} case &quot;{{id}}&quot; ran in {{duration}}s - {{state_description}}
sakuli.forwarder.icinga2.template.case.warning={{state_short}} case &quot;{{id}}&quot; over runtime ({{duration}}s/warn at {{warning_threshold}}s){{step_information}}
sakuli.forwarder.icinga2.template.case.warningInStep={{state_short}} case &quot;{{id}}&quot; over runtime ({{duration}}s/warn at {{warning_threshold}}s){{step_information}}
sakuli.forwarder.icinga2.template.case.critical={{state_short}} case &quot;{{id}}&quot; over runtime ({{duration}}s/crit at {{critical_threshold}}s){{step_information}}
sakuli.forwarder.icinga2.template.case.error={{state_short}} case &quot;{{id}}&quot; {{state_description}}: {{error_message}}


##### DATABASE - FORWARDER
# Save results into database, using the DB connection parameters below (must be uncommented).
# For more information see https://github.com/ConSol/sakuli/blob/master/docs/receivers/database.md

# DEFAULT: false
sakuli.forwarder.database.enabled=false
## database host
sakuli.forwarder.database.host=changeme
## database port:
sakuli.forwarder.database.port=3306
## database name
sakuli.forwarder.database=sakuli
## database username
sakuli.forwarder.database.user=sakuli
## database password
sakuli.forwarder.database.password=sakuli
## JDBC-Driver
sakuli.forwarder.database.jdbc.driverClass=com.mysql.jdbc.Driver
## pattern for JDBC database connection URL
sakuli.forwarder.database.jdbc.url=jdbc:mysql://${sakuli.forwarder.database.host}:${sakuli.forwarder.database.port}/${sakuli.forwarder.database}


##### CheckMK - FORWARDER
# Send results to a CheckMK-enabled monitoring system, using the parameters below in your 'sakuli.properties' to activate the forwarder.
# For more information see https://github.com/ConSol/sakuli/blob/master/docs/forwarder-checkmk.md
#
## DEFAULT: false
sakuli.forwarder.check_mk.enabled=false
#
### OPTIONAL CheckMK PROPERTIES:
#
# spool dir, default /var/lib/check_mk_agent/spool (Linux) / (installation_path)\spool (Windows)
sakuli.forwarder.check_mk.spooldir=/var/lib/check_mk_agent/spool
#  Max result age. Prepend this number on the file name, e.g. 600_sakuli_suite_XYZ
sakuli.forwarder.check_mk.freshness=600
# Prefix of the file name for CheckMK
sakuli.forwarder.check_mk.spoolfile_prefix=sakuli_suite_
# optional service description forwarded to the output check result, when not set, testsuite.id is used
sakuli.forwarder.check_mk.service_description=${testsuite.id}


##### JSON - FORWARDER
# Save results into a json file. The JSON forwarder is enabled per default.

# DEFAULT: true
sakuli.forwarder.json.enabled=true
## folder where to save the json file on the test execution host
sakuli.forwarder.json.dir=${sakuli.log.folder}/_json


###############################
# LOGGING &amp; ERROR-SCREENSHOT PROPERTIES
# Common logging settings for Sakuli.
# (log verbosity can be set in 'sakuli-log-config.xml')
###############################

### Specific Logging properties for different logging levels
#
### log levels for the different components - levels `DEBUG - INFO - WARN - ERROR`
#logging level for Sakuli output
log.level.sakuli=INFO
#logging level for Sikuli output
log.level.sikuli=WARN
#logging level for Sahi output
log.level.sahi=WARN
#logging level for the Spring framework (only used internally)
log.level.spring=WARN
#logging level for all other **Java classes and libraries**
log.level.root=INFO

# If you use the argument 'resumeOnException=true' in methods like `new Region(&quot;username&quot;,true)`
# to continue the test even the method fails, you can control how Sakuli treats such exceptions by
# settings the property `suppressResumedExceptions`:
#   true  = the exception will be logged and appear in the test result
#   false = the exception will NEITHER be logged NOR appear in the test result.
#
# Example:
#              // create region &quot;foo&quot;
#              var foo = new Region(&quot;bar.png&quot;,true);
#              // if &quot;image&quot; is not found, the script will resume
#              var baz = foo.find(&quot;image&quot;);
#              // throw your &quot;own&quot; exception.
#              // If you do not, and suppressResumedExceptions=true, the exception will be suppressed.
#              if (baz == null){
#                  throw &quot;Sorry, I could not find image 'image'.&quot;;
#              }
#
# DEFAULT: false
sakuli.exception.suppressResumedExceptions=false

# Log pattern
#
# Log pattern for development with java classes:
# sakuli.log.pattern=%-5level %d{YYYY-MM-dd HH:mm:ss.SSS} [%thread]  %logger{36} - %msg%n

# default log pattern
sakuli.log.pattern= %-5level [%d{YYYY-MM-dd HH:mm:ss.SSS}] - %msg%n

# log file folder
sakuli.log.folder=${sakuli.testsuite.folder}/_logs

# Deletes all files that are older than the defined days in the folder `sakuli.log.folder`
#
# DEFAULT: 14 days
sakuli.log.maxAge=14

# folder for screenshot files (if activated)
sakuli.screenshot.dir=${sakuli.log.folder}/_screenshots

# screenshot file format (Possible values: jpg, png)
sakuli.screenshot.format=png
### URLs for documentation links
sahi.doc.base.url=http://sahipro.com/docs/all-topics.html?q=
sakuli.doc.base.url=http://consol.github.io/sakuli/latest/index.html#

#######################################################################################
# SAHI-SCRIPT-RUNNER-PROPERTIES
#
# Defines properties of the application component &quot;Sahi&quot;.
#######################################################################################
### Internal Sahi-Proxy configuration
# sahi proxy port
#(internal proxy for the test execution)
sahi.proxy.port=9999
# Sahi installation folder
sahi.proxy.homePath=${sakuli.home.folder}/../sahi
# Sahi config folder
sahi.proxy.configurationPath=${sahi.proxy.homePath}/userdata

# number of max. attempts to connect to a site before aborting
sahi.proxy.maxConnectTries=25
# wait time in seconds between retry attempts
sahi.proxy.reconnectSeconds=1
# amount of firefox profiles
ff.profiles.max_number=1
#### Sahi customisations done by Sakuli only
#
# Sahi delays on Sikuli input (put on helmet!)
#
# Sikuli keyboard events (type/paste) on a Sahi-controlled browser instance can get lost if
# they are executed at the same time when Sahi internal status requests are sent from the
# browser JS to the Sahi proxy (default: 100ms = 10x per sec.).
# For this reason, Sakuli can temporarily stop the browser JS with the Sahi proxy when a Sikuli
# keyboard action has to be executed on the browser window.
#
# &quot;delayPerKey&quot; is the amount of time the browser JS keeps silent for one key event; for e.g. a
# word with 8 characters, this is &quot;8 x delayPerKey&quot; (in ms).
#
# &quot;delayBeforeInput&quot; is the time Sakuli must wait before starting the keystrokes. Within this time
# the browser JS updates its sync interval from default (100ms) to e.g. &quot;8 x delayPerKey&quot;.
#
# After the key events are done, Sakuli resets Sahi's sync interval back to the default value.
# This setting is not needed if key events are executed on a Window which is not contolled by Sahi.
#
# (gets only enabled if delayPerKey is set)
sahi.proxy.onSikuliInput.delayBeforeInput=500
sahi.proxy.onSikuliInput.delayPerKey=
#
# Dis/Enable if Sahi should remove the authorization header.
# See: http://consol.github.io/sakuli/latest/index.html#sahi-authorization-headers
# (Default by Sahi OS: true)
sahi.proxy.removeAuthorizationHeader.enabled=true


### HTTP/HTTPS proxy Settings
### Set a company proxy Sahi should use
# external HTTP proxy
ext.http.proxy.enable=false
ext.http.proxy.host=proxy.server.com
ext.http.proxy.port=8080
ext.http.proxy.auth.enable=false
ext.http.proxy.auth.name=user
ext.http.proxy.auth.password=password
# external HTTPS proxy
ext.https.proxy.enable=false
ext.https.proxy.host=proxy.server.com
ext.https.proxy.port=8080
ext.https.proxy.auth.enable=false
ext.https.proxy.auth.name=user
ext.https.proxy.auth.password=password
# There is only one bypass list for both secure and insecure.
ext.http.both.proxy.bypass_hosts=localhost|127.0.0.1|*.internaldomain.com|www.verisign.com
### SSL-Certificate settings (experimental)
# Uncomment the following lines to use a client certificate.
# If there is no password, do not uncomment the password line.
# keystore type can be JKS, PKCS12 etc.
# For more information see http://community.sahipro.com/forums/discussion/1167/sahi-allowing-certificates
#
#ssl.client.keystore.type=JKS
#ssl.client.cert.path=${sakuli.testsuite.folder}/sakuli_keystore
#ssl.client.cert.password=sakuli
### more logging options for Sahi:
# log folder for sahi HTML report
logs.dir=${sakuli.log.folder}
# handlers to create in the root logger
# (all loggers are children of the root logger)
handlers = java.util.logging.ConsoleHandler, java.util.logging.FileHandler

# default logging level for new ConsoleHandler instances
java.util.logging.ConsoleHandler.level = ALL

# default logging level for new FileHandler instances
java.util.logging.FileHandler.level = ALL

# default formatter for new ConsoleHandler instances
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter

java.util.logging.FileHandler.limit=102400
java.util.logging.FileHandler.count=10
java.util.logging.FileHandler.pattern=%t/sahi%g.log</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exception_handling"><a class="anchor" href="#_exception_handling"></a>1.4.2.2. Exception handling</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sakuli-exception-handling.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sakuli-exception-handling.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Some objects (<strong>Region, Application, Environment</strong>) allow on their creation to specify the optional boolean argument <code>resumeOnException</code>, which controls whether the script should resume on an exception which is related to the object or one of its method (default: false).</p>
</div>
<div class="paragraph">
<p>Setting this to <em>true</em> can be useful if you want to raise a custom exception or no exception at all.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Property values of <code>sakuli.exception.suppressResumedExceptions</code></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Impact</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the exception will be logged and appear in the test result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the exception will NEITHER be logged NOR appear in the test result.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="comment">// create region &quot;foo&quot;</span>
<span class="keyword">var</span> foo = <span class="keyword">new</span> Region(<span class="string"><span class="delimiter">&quot;</span><span class="content">bar.png</span><span class="delimiter">&quot;</span></span>,<span class="predefined-constant">true</span>);
<span class="comment">// if &quot;image&quot; is not found, the script will resume</span>
<span class="keyword">var</span> baz = foo.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">image</span><span class="delimiter">&quot;</span></span>);
<span class="comment">// throw your &quot;own&quot; exception.</span>
<span class="comment">// If you do not, and suppressResumedExceptions=true, the exception will be suppressed.</span>
<span class="keyword">if</span> (baz == <span class="predefined-constant">null</span>){
    <span class="keyword">throw</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Sorry, I could not find image 'image'.</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_logging"><a class="anchor" href="#_logging"></a>1.4.2.3. Logging</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sakuli-logging.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sakuli-logging.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<div class="title">Verbosity</div>
<p>The logging verbosity of all compoments <em>Sakuli, Sahi, Sikuli, Spring</em> - and <em>Java</em> in general can be changed individually with <a href="#property-loading-mechanism">properties</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
"Verbosity" means one of the levels <code>DEBUG - INFO - WARN - ERROR</code>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Log level verbosity properties</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log.level.sakuli=<em>LEVEL</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logging level for <strong>Sakuli</strong> output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log.level.sikuli=<em>LEVEL</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logging level for <strong>Sikuli</strong> output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log.level.sahi=<em>LEVEL</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logging level for <strong>Sahi</strong> output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log.level.spring=<em>LEVEL</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logging level for the <strong>Spring</strong> framework (only used internally)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log.level.root=<em>LEVEL</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logging level for all other <strong>Java classes and libraries</strong></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. Log file folder / pattern</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.log.pattern=%-5level [%d{YYYY-MM-dd HH:mm:ss.SSS}] - %msg%n</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Format string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.log.folder=${sakuli.testsuite.folder}/_logs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log folder</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In general it is also possible to add your own Logback configuration under <code><em>SAKULI_HOME</em>/config/sakuli-log-config.xml</code>. For more information about the Logback syntax please refer to the <a href="http://logback.qos.ch/manual/configuration.html">Logback manual</a>.</p>
</div>
<div class="paragraph">
<div class="title">Log file rotation</div>
<p>Control the age of your log-files in the <code>sakuli.properties</code>, to prevent disk space erros.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.log.maxAge=14</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deletes all files that are older than (default) 14 days in the defined <code>sakuli.log.folder</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>On Linux you can additional configure <strong>logrotate</strong> to tidy up old log files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">vim /etc/logrotate.d/sakuli

__SUITE_FOLDER__/*/_logs/* __SUITE_FOLDER__/*/_logs/_screenshots/* {
    size 1k
    missingok
    maxage 2
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="encryption"><a class="anchor" href="#encryption"></a>1.4.2.4. Secret De-/Encryption</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sakuli-encryption.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sakuli-encryption.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Neither Sahi nor Sikuli have a way to prevent <strong>sensible data</strong> (passwords, PINs, etc.) from being logged and stored in the script in <strong>clear text</strong>.</p>
</div>
<div class="paragraph">
<p>That&#8217;s the reason why Sakuli is able to <strong>encrypt</strong> them on the command line, and to <strong>decrypt</strong> them again on runtime just for the moment when they are needed. There is no (quick) way to decrypt those secrets again on the command line, so this is rather a way to obscure things not everybody should see than high-secure a encryption mechanism. Since version <code>v1.1.0</code> Sakuli provides two different possibilities to en-/decrypt secrets, each use the cipher algorithm <code>AES/CBC/PKCS5Padding</code>:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this chapter the usage of the Sakuli CLI is defined for Linux <code>sakuli</code> but works on Windows <code>sakuli.exe</code> in the same way!
</td>
</tr>
</table>
</div>
<div id="encryption-environment" class="paragraph">
<div class="title">Encryption Mode <code>environment</code> (default):</div>
<p>Since version <code>v1.1.0</code> Sakuli uses an environment based master-key  mechanism as default way to de-/encrypt secrets.</p>
</div>
<div class="paragraph">
<p><strong>1) Create a new Masterkey</strong></p>
</div>
<div class="paragraph">
<p>First we have to create a new masterkey:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sakuli create masterkey
=========== Calling Sakuli JAR =====================================================


Create a Sakuli encryption master key (AES 128 bit):

ny3bC1ZKuHzg7saT1hRCMQ== <i class="conum" data-value="1"></i><b>(1)</b>

... now add this as environment var 'SAKULI_ENCRYPTION_KEY' or property 'sakuli.encryption.key'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>masterkey</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>2) Encrypt a secret</strong></p>
</div>
<div class="paragraph">
<p>To encrypt secrets, you can also use the command line. To use the generated masterkey from above, you can either set the environment variable <code>SAKULI_ENCRYPTION_KEY</code>&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">export SAKULI_ENCRYPTION_KEY=ny3bC1ZKuHzg7saT1hRCMQ== <i class="conum" data-value="1"></i><b>(1)</b>
sakuli encrypt foo
=========== Calling Sakuli JAR =====================================================


String to Encrypt: foo
...INFO  [2017-07-18 16:01:28.311] - use environment var 'SAKULI_ENCRYPTION_KEY' for encryption

Encrypted secret with 'environment masterkey':

tn9PPXjwgH6VDTIEEWTdY9G2StrYxCrX1tXCueA3HwY=  <i class="conum" data-value="3"></i><b>(3)</b>

... now copy the secret to your testcase!</code></pre>
</div>
</div>
<div class="paragraph">
<p>or define the CLI option <code>-masterkey &lt;secret&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sakuli encrypt foo -masterkey ny3bC1ZKuHzg7saT1hRCMQ== <i class="conum" data-value="2"></i><b>(2)</b>
=========== Calling Sakuli JAR =====================================================


String to Encrypt: foo
...
Encrypted secret with 'environment masterkey':

mLzYiksPjmoqbdivBMDhYglcbnYCzv3iVdpmnmdXbV4=  <i class="conum" data-value="3"></i><b>(3)</b>

... now copy the secret to your testcase!</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>masterkey defined by environment variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>masterkey defined through CLI option</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>encrypted secret</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The encryption secret can now be used in our test case definition.</p>
</div>
<div class="paragraph">
<p><strong>3) Decrypt a secret</strong></p>
</div>
<div class="paragraph">
<p>For decrypting the secret, just define the masterkey with one of the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Environment variable <code>SAKULI_ENCRYPTION_KEY</code></p>
</li>
<li>
<p>Sakuli run option <code>sakuli run &lt;test suite&gt; -masterkey &lt;masterkey&gt;</code></p>
</li>
<li>
<p><a href="#property-loading-mechanism">Sakuli property</a> <code>sakuli.encryption.key</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After that Sakuli will automatically decrypt secrets during runtime of the test cases when using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Environment.pasteAndDecrypt">Environment.pasteAndDecrypt(text)</a></p>
</li>
<li>
<p><a href="#Environment.typeAndDecrypt">Environment.typeAndDecrypt(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Environment.decryptSecret">Environment.decryptSecret(secret)</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Example usage in testcase:</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">//testcase.js</span>
    env.typeAndDecrypt(<span class="string"><span class="delimiter">&quot;</span><span class="content">eKcf2WLQIab6APvi4BKKBiJdP31SK86z/oOJRUAQkdE=</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Both the environment variable and the property file containing the master key must be protected against other users. (User environment instead of system environment variable / set proper file permissions)
</td>
</tr>
</table>
</div>
<div id="encryption-interface" class="paragraph">
<div class="title">Encryption Mode <code>interface</code>:</div>
<p>Among other parameters, Sakuli uses the MAC address of a local network interface card as a encryption salt. Hence no virtual adapters can be choosen.</p>
</div>
<div class="paragraph">
<p><strong>1) Choosing a NIC</strong></p>
</div>
<div class="paragraph">
<p>You can decide whether Sakuli should automatically select an adapter by setting the following <a href="#property-loading-mechanism">properties</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">sakuli.encrpytion.mode=interface
sakuli.encryption.interface.autodetect=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>..or a specific one should be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">sakuli.encrpytion.mode=interface
sakuli.encryption.interface.autodetect=false
sakuli.encryption.interface=eth0</code></pre>
</div>
</div>
<div class="paragraph">
<p>A second possibility is to use Sakuli starter option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># use autodetect
sakuli COMMAND ARGUMENT -interface auto
# use specific interface
sakuli COMMAND ARGUMENT -interface eth0</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2) Encrypt a secret</strong></p>
</div>
<div class="paragraph">
<p>To encrypt secrets on the command line, Sakuli uses the MAC address of a NIC on the local machine (Windows/Linux). The following command lets Sakuli decide which NIC will be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sakuli encrypt foo -interface auto
=========== Calling Sakuli JAR =====================================================

String to Encrypt: foo
...
Encrypted secret with interface 'eth3': CKXIAZmO7rSoBVMGgJZPDQ==

... now copy the secret to your testcase!</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add <code>-interface eth0</code> to select eth0 as salt interface. Add <code>-interface list</code> to get a list of all available adapters.</p>
</div>
<div class="paragraph">
<p><strong>3) Decrypt a secret</strong></p>
</div>
<div class="paragraph">
<p>To decrypt a secret define the interface encryption mode in your <code>sakuli.properties</code> or <code>testsuite.properties</code> (see <a href="#property-loading-mechanism">Property loading mechanism</a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">sakuli.encrpytion.mode=interface
sakuli.encryption.interface.autodetect=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that Sakuli will automatically decrypt secrets during runtime of the test cases when using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Environment.pasteAndDecrypt">Environment.pasteAndDecrypt(text)</a></p>
</li>
<li>
<p><a href="#Environment.typeAndDecrypt">Environment.typeAndDecrypt(text, optModifiers)</a></p>
</li>
<li>
<p><a href="#Environment.decryptSecret">Environment.decryptSecret(secret)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_screenshot_settings"><a class="anchor" href="#_screenshot_settings"></a>1.4.2.5. Screenshot settings</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sakuli-screenshot-settings.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sakuli-screenshot-settings.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>To set the format and destination folder for screenshots taken by Sakuli change the following <a href="#property-loading-mechanism">properties</a>:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.screenshot.onError=true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">take a screenshot in case of an exception</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.screenshot.dir=${sakuli.log.folder}/_screenshots</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">folder for screenshot files (if activated)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.screenshot.format=jpg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">screenshot file format (Possible values: jpg, png)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.forwarder.gearman.nagios.template.screenshotDivWidth=640px</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Screenshot dimensions for results sent to Gearmand</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_gui_only_tests"><a class="anchor" href="#_gui_only_tests"></a>1.4.2.6. GUI-only tests</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sakuli-gui-only.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sakuli-gui-only.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>If you want to run tests which do not include any web technology, you can use phantomJS instead of firefox/chrome/IE and use the Sahi default start URL:</p>
</div>
<div class="listingblock">
<div class="title">testsuite.suite</div>
<div class="content">
<pre class="CodeRay highlight"><code>case1/sakuli_demo.js http://sahi.example.com/_s_/dyn/Driver_initialized</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Sakuli depends on Sahi running, which in turn needs a running browser instance. Using PhantomJS for this, hides the browser window completely.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="sahi-controller"><a class="anchor" href="#sahi-controller"></a>1.4.2.7. Sahi Controller</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sahi-controller.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sahi-controller.adoc" target="_blank">edit</a></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use the Sahi Controller to identify elements on the page to write and test Sahi methods!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are two ways to get Sahi instructions into your testcase <code>your-testcase.js</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>identify, copy &amp; paste from the Sahi Controller</p>
</li>
<li>
<p>record by the Sahi Controller, copy &amp; paste from the file, see <a href="#sahi-recorder">Sahi Recorder</a></p>
</li>
</ul>
</div>
<div id="sahi-open-controller" class="paragraph">
<div class="title">Open the Sahi Controller</div>
<p>Add to your testcase the following line, at position where you want to identify your HTML object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js"><span class="comment">//.... your testcode</span>
env.sleep(<span class="integer">9999</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then start your test suite and the Sakuli test should appear and stop at that position for 9999 seconds. The "sleep" statement is a nice trick when writing long tests; wherever you put a 9999s sleep in, the test will execute until this position and wait. Think of it like a breakpoint when debugging a program.</p>
</div>
<div class="paragraph">
<p>Now open the Sahi Controller (hold the <code>ALT</code> key on Windows or <code>CTRL + ALT</code> on Linux and doubleclick anywhere on the page) to open this window:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_contoller.png" alt="sahi_controller"></span></p>
</div>
<div id="sahi-controller-copy-paste" class="paragraph">
<div class="title">copy/paste code</div>
<p>First, we want Sahi to check if there is for example the Sakuli Logo on the page. Hold the <code>CTRL</code> key and move the mouse pointer on the logo. Watch the Sahi Controller: it detects the HTML elements below the mouse pointer and generates the <a href="http://sahipro.com/docs/sahi-apis/accessor-apis.html#_image">accessor method for "image"</a> automatically:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_logo_accessor.png" alt="logo_accessor"></span></p>
</div>
<div class="paragraph">
<p>Click on "Assert" to let Sahi autogenerate <a href="http://sahipro.com/docs/sahi-apis/assertions.html">assertion methods</a>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_assert2.png" alt="assert"></span></p>
</div>
<div class="paragraph">
<p>Just copy the second line (which checks the visibility of an element) into the clipboard and paste it into your testcase <code>your-testcase.js</code> before the <code>env.sleep(9999)</code> statement.</p>
</div>
<div class="paragraph">
<p>Further, we want for example to assure that the contact form of the web page os displayed correctly. Move the mouse pointer down to the "Kontakt" link; Sahi should display the accessor <code>_image(&quot;Kontakt zu ConSol&quot;)</code></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>This time use the "click" button on the controller</p>
</li>
<li>
<p>To execute a click; this also generates the complete <a href="http://sahipro.com/docs/sahi-apis/action-apis.html">browser action</a> statement</p>
</li>
<li>
<p>copy/paste also into the test case</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_click_action.png" alt="click"></span></p>
</div>
<div class="paragraph">
<p>In the end, Sahi should check that the appeared popup window contains the text "Schreiben Sie uns!". You guessed it - move the mouse pointer over this text and click the "Assert" button again. The fourth assertion is the right one, which we also paste into the test script:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_contains_text.png" alt="contains_text"></span></p>
</div>
<div class="paragraph">
<p>Now remove the "sleep" statement from the script file; it should look now like that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">_dynamicInclude(<span class="predefined">$includeFolder</span>);
<span class="keyword">var</span> testCase = <span class="keyword">new</span> TestCase(<span class="integer">60</span>, <span class="integer">70</span>);
<span class="keyword">var</span> env = <span class="keyword">new</span> Environment()

<span class="keyword">try</span>{
    <span class="comment">//your code</span>
    _assert(_isVisible(_image(<span class="string"><span class="delimiter">&quot;</span><span class="content">sakuli.png</span><span class="delimiter">&quot;</span></span>)));
    _click(_image(<span class="string"><span class="delimiter">&quot;</span><span class="content">Kontakt zu conSol</span><span class="delimiter">&quot;</span></span>));
    _assertContainsText(<span class="string"><span class="delimiter">&quot;</span><span class="content">Schreiben Sie uns!</span><span class="delimiter">&quot;</span></span>, _heading3(<span class="string"><span class="delimiter">&quot;</span><span class="content">Schreiben Sie uns!</span><span class="delimiter">&quot;</span></span>));
    <span class="comment">//env.sleep(9999);</span>

} <span class="keyword">catch</span> (e) {
    testCase.handleException(e);
} <span class="keyword">finally</span> {
    testCase.saveResult();
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Perhaps you want Sahi to highlight the items it is acting on: just use the <code>_highlight()</code> method from the <a href="http://sahipro.com/docs/sahi-apis/debug-helper-apis.html">debug helper API</a> to mark each element with a red border before accessing it: <code>_highlight(_image("sakuli.png"));</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="sahi-recorder"><a class="anchor" href="#sahi-recorder"></a>1.4.2.8. Sahi Recorder</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sahi-recorder.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sahi-recorder.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Another method to <a href="#sahi-controller-copy-paste">copy/paste code</a> is to record all steps into a file. For this, open the Sahi controller (<a href="#sahi-open-controller">Open the Sahi Controller</a>), enter a filename and click on "record":</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_record.png" alt="sahi_recorder"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
actions like clicks are written to file automatically. All other actions like assertions can be written to file by clicking the button "Append to Script": <span class="image"><img src="images/tutorial_append.png" alt="sahi_recorder_append_to_script"></span>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After you have clicked on "stop", open the recorded file, copy everything and paste the lines in to the Sakuli testcase <code>your-testcase.js</code> file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_sahi_settings"><a class="anchor" href="#_sahi_settings"></a>1.4.2.9. Sahi settings</h5>
<div class="sect5">
<h6 id="_browser_selection"><a class="anchor" href="#_browser_selection"></a>Browser selection</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sahi-settings-browser-selection.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sahi-settings-browser-selection.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>You may want to change the browser due to the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to check if a web test (made with Sahi methods) for browser A is also running properly on browser B</p>
</li>
<li>
<p>to run a headless browser</p>
<div class="ulist">
<ul>
<li>
<p>just for curiosity :-)</p>
</li>
<li>
<p>to keep the browser in background while Sakuli tests a non-web application (e.g. fat client)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to the possibilities described property <code>testsuite.browser</code>, see <a href="#property-loading-mechanism">Property loading mechanism</a>, the generic Sakuli starter <code>sakuli/sakuli.exe</code> can also be given the parameter <code>-browser</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sakuli run /path/to/suite -browser chrome</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="sahi-browser-configuration"><a class="anchor" href="#sahi-browser-configuration"></a>Browser configuration</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sahi-settings-browser-config.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sahi-settings-browser-config.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>If the Sahi dashboard does not show any browser or if you want to add another browser to the dashboard …</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/w_sahi_no_browser.jpg" alt="nobrowser"></span></p>
</div>
<div class="paragraph">
<p>… you have to edit <code><em>SAHI_DIR</em>/userdata/config/browser_types.xml</code>. Each browser is defined within a <strong>browserType</strong> block. Please refer to the <a href="https://sahipro.com/docs/using-sahi/sahi-configuration-basic.html">Sahi Documentation, "Configure Browsers"</a> to see the <em>browserType</em> Nodes for popular browsers.</p>
</div>
<div class="paragraph">
<p>For <strong>PhantomJS</strong> please save <a href="http://labs.consol.de/sakuli/install/3rd-party/phantom/sahi.js">sahi.js</a> into the folder <code><em>SAHI_DIR</em>\phantomjs\</code> and use this option line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>        &lt;options&gt;--proxy=localhost:9999 __SAHI_DIR__\phantomjs\sahi.js&lt;/options&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Attention: PhantomJS 2 is currently unsupported. Use version 1.9.x</p>
</div>
</div>
<div class="sect5">
<h6 id="sahi_behind_a_proxy"><a class="anchor" href="#sahi_behind_a_proxy"></a>Sahi behind a proxy</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sahi-settings-proxy.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sahi-settings-proxy.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Set the following <a href="#property-loading-mechanism">properties</a> (globally in <code>sakuli.properties</code>) to define a proxy Sahi should connect to.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">### HTTP/HTTPS proxy Settings
### Set these properties, to enable the test execution behind company proxies
# Use external proxy server for HTTP*
ext.http.proxy.enable=true
ext.http.proxy.host=proxy.yourcompany.com
ext.http.proxy.port=8080
ext.http.proxy.auth.enable=false
ext.http.proxy.auth.name=user
ext.http.proxy.auth.password=password

# Use external proxy server for HTTPS
ext.https.proxy.enable=true
ext.https.proxy.host=proxy.server.com
ext.https.proxy.port=8080
ext.https.proxy.auth.enable=false
ext.https.proxy.auth.name=user
ext.https.proxy.auth.password=password

# There is only one bypass list for both secure and insecure.
ext.http.both.proxy.bypass_hosts=localhost|127.0.0.1|*.internaldomain.com|www.verisign.com</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="sahi-https"><a class="anchor" href="#sahi-https"></a>HTTPS support in Sahi</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sahi-https.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sahi-https.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>This documentation is not complete yet. Any help is appreciated.</p>
</div>
<div class="sect6">
<h7 id="sahi-https-accept-self-signed"><a class="anchor" href="#sahi-https-accept-self-signed"></a>Solution 1: accept self-signed certificates</h7>
<div class="paragraph">
<p>This will work on most systems, especially the ones you have full control over.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open Sahi Dashboard, start the browser.</p>
</li>
<li>
<p>On the Sahi start page, navigate to the https site you want Sahi to trust (e.g. <a href="https://github.com">https://github.com</a>)</p>
</li>
<li>
<p>You will be presented a message that this page "connection is not secure/trusted".</p>
</li>
<li>
<p>On <strong>Firefox</strong>, click <strong>"I understand the risks."</strong></p>
</li>
<li>
<p>On <strong>Chrome</strong>, click <strong>"Proceed anyway (unsecure)"</strong></p>
</li>
<li>
<p>On <strong>IE</strong>, click <strong>"Continue to the website (not recommended)"</strong>.</p>
</li>
<li>
<p>Once the page has loaded, click <strong>"SSL Manager"</strong> from the Sahi start page</p>
</li>
<li>
<p>You should be presented a green check mark right of the https URL, indicating that Chrome accepted the site&#8217;s certificate, signed by Sahi:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/https_ok.png" alt="https_ok"></span></p>
</div>
</div>
<div class="sect6">
<h7 id="sahi-https-certificate-import"><a class="anchor" href="#sahi-https-certificate-import"></a>Solution 2: manual certificate import</h7>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This is a browser-specific solution and can be different in newer Browser versions or other operating systems!
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Google Chrome (Windows)</div>
<ol class="arabic">
<li>
<p>Open Sahi Dashboard, start <em>Chrome</em></p>
</li>
<li>
<p>On the Sahi start page, navigate to the https site you want Sahi to trust (e.g. <a href="https://github.com">https://github.com</a> )</p>
</li>
<li>
<p>You will be presented a message that this page "connection is not secure". Click on the <strong>red-crossed locker symbol</strong> left of the URL in the address bar and then <strong>"Certificate information"</strong></p>
</li>
<li>
<p>Change to tab <strong>"Details"</strong> and press <strong>"Copy to File…"</strong></p>
</li>
<li>
<p>In the following export assistent, save the certificate as <strong>"Cryptographic Message Syntax Standard PKCS #7 Certificates (.P7B)"&quot;</strong></p>
</li>
<li>
<p>Go to Chrome preferences, <strong>"Manage certificates"</strong></p>
</li>
<li>
<p><strong>"Import…"</strong> -&gt; select the exported <strong>.p7b</strong> certificate (in the "Open" dialogue, chnange the filename extension filter to <strong>"PKCS#1"</strong> )</p>
</li>
<li>
<p>Choose <strong>"Trusted Root Certification Authorities"</strong> as certificate store</p>
</li>
<li>
<p>Accept the Import confirmation.</p>
</li>
<li>
<p>Restart Chrome from the Sahi dashboard.</p>
</li>
<li>
<p>From the Sahi start page (step #2), click <strong>"SSL Manager"</strong></p>
</li>
<li>
<p>You should be presented a green check mark right of the https URL, indicating that Chrome accepted the site&#8217;s certificate, signed by Sahi:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/https_ok.png" alt="https_ok"></span></p>
</div>
<div class="olist arabic">
<div class="title">Mozilla Firefox</div>
<ol class="arabic">
<li>
<p>Open Sahi Dashboard, start <em>Firefox/Firefox portable</em></p>
</li>
<li>
<p>On the Sahi start page, navigate to the https site you want Sahi to trust (e.g. <a href="https://github.com">https://github.com</a> )</p>
</li>
<li>
<p>You will be presented a message that this page "connection is not secure". Click on I understand the risks" and add the certificate exception. Now navigate back to the sahi start page and click on the Link "SSL Manager&quot;:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_ssl_manager.png" alt="ssl manager"></span></p>
</div>
<div class="paragraph">
<p>You will be promptet again a security warning for connecting to "sahi.example.com" (a local dummy domain), add the certificate here also as an exception.</p>
</div>
<div class="paragraph">
<p>The following page contains a list of all so far trusted and untrusted domains and their certificates. To import the red marked into the browser&#8217;s certificate store, open the links by clicking them with the middle mouse key. This opens the page within a new tab; only in this way you are allowed to add the certificate exception.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_certs.png" alt="certs"></span></p>
</div>
<div class="paragraph">
<p>You can close every opened tab when it is displaying "Successfully connected" for the domain:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_connected.png" alt="connected"></span></p>
</div>
<div class="paragraph">
<p>Now go back to the SSL Manager overview and click the "refresh" button. Every previously untrusted domain should now be marked as OK:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/tutorial_refresh.png" alt="refresh"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Ensure that Firefox really save the certificates permanently! <span class="image"><img src="images/tutorial_certs_ff_save.png" alt="Firefox save certificates"></span>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Internet Explorer</div>
<p>See Sahi description <a href="http://sahipro.com/docs/using-sahi/sahi-configuration-basic.html#Configure%20SSL">Configure SSL in Sahi</a>.</p>
</div>
</div>
<div class="sect6">
<h7 id="sahi-https-automatic-certificate-usage"><a class="anchor" href="#sahi-https-automatic-certificate-usage"></a>Automatic HTTPS Certificate Usage</h7>
<div class="paragraph">
<p>To run your tests on different hosts, <a href="#containerized-execution">Containerized Execution</a> or orchestrated by some continuous integration tool(e.g. <a href="#jenkins-integration">Jenkins</a>), it&#8217;s necessary that you can share the HTTPS config for different hosts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The usage is described for the Firefox browser. For other browser try to copy there certificate store.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You have to accept the Sahi fake certificates, like seen above:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#sahi-https-accept-self-signed">Solution 1: accept self-signed certificates</a></p>
</li>
<li>
<p><a href="#sahi-https-certificate-import">Solution 2: manual certificate import</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Now two things happened:</p>
<div class="ulist">
<ul>
<li>
<p>Sahi added a Java Keystore for each accepted certificate domain (e.g. <code>sahi_example_com</code>, <code>www_github_com</code>) in <code>~/sakuli/sahi/userdata/certs/</code>.</p>
</li>
<li>
<p>The Firefox profile <code>~/sakuli/sahi/userdata/browser/ff/profiles/sahi0</code> now contains an updated version of:</p>
<div class="ulist">
<ul>
<li>
<p><code>cert8.db</code> - certificate store</p>
</li>
<li>
<p><code>key3.db</code> - key parts of certificates</p>
</li>
<li>
<p><code>cert_override.txt</code> - list of certificate exceptions</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Ensure that above files will be copied before the tests starts like described here:</p>
<div class="ulist">
<ul>
<li>
<p>copy all created Sahi fake certificates:</p>
<div class="literalblock">
<div class="content">
<pre>sahi_example_com  --&gt;  __SAKULI_ROOT__/sahi/userdata/certs/
www_github_com    --&gt;  __SAKULI_ROOT__/sahi/userdata/certs/</pre>
</div>
</div>
</li>
<li>
<p>copy the Firefox certificate store to Sahi default profile</p>
<div class="literalblock">
<div class="content">
<pre>cert8.db          --&gt;  __SAKULI_ROOT__/sahi/config/ff_profile_template/
key3.db           --&gt;  __SAKULI_ROOT__/sahi/config/ff_profile_template/
cert_override.txt --&gt;  __SAKULI_ROOT__/sahi/config/ff_profile_template/</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Fore more information see: <a href="#docker-https-sahi">Docker - Writing HTTPS Sahi web tests</a>, <a href="#java-dsl-https">JavaDSL - HTTPS Sites</a></p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sahi_known_issues"><a class="anchor" href="#_sahi_known_issues"></a>1.4.2.10. Sahi known issues</h5>
<div class="sect5">
<h6 id="sahi-webpack-dev-server"><a class="anchor" href="#sahi-webpack-dev-server"></a>Sahi and webpack-dev-server</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sahi-webpack.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sahi-webpack.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Due to issue <a href="https://github.com/ConSol/sakuli/issues/295">sahi test not run with webpack dev server #295</a> Sahi OS have currently some problems with the "auto loading" function of the <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a>. If you use the startup option <code>webpack-dev-server --inline</code> Sahi may will throw this error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">....
ERROR [2017-12-01 13:00:12.332] - ERROR:
CASE &quot;tests&quot;: _sahi.setServerVar('lastURL', window.document.location.href); Window/Domain not found:  popupNameFromStep=; derivedName=; windowName=; windowTitle=; wasOpened=0; domain=guestbook ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Important in this error message is <code>Window/Domain not found:  popupNameFromStep=; derivedName=; windowName=; windowTitle=; wasOpened=0</code> which will produced by the auto load function <a href="https://webpack.js.org/configuration/dev-server/#devserver-inline">"inline Hot Module Replacement"</a>. This automatic refresh won&#8217;t work well with the <a href="http://sahipro.com/docs/introduction/architecture.html#Architecture">Sahi proxy injection architecture</a>, so we have to disable the webpack auto reload function with the <code>--no-inline</code> option:</p>
</div>
<div class="listingblock">
<div class="title">package.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">  <span class="key"><span class="delimiter">&quot;</span><span class="content">scripts</span><span class="delimiter">&quot;</span></span>: {
    <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="key"><span class="delimiter">&quot;</span><span class="content">dev</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">webpack-dev-server --inline --progress --config build/webpack.dev.conf.js</span><span class="delimiter">&quot;</span></span>,
    <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="key"><span class="delimiter">&quot;</span><span class="content">e2e-server</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">webpack-dev-server --no-inline --progress --config build/webpack.dev.conf.js</span><span class="delimiter">&quot;</span></span>,
  },</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>for development with "auto reload"</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>for end-to-end testing with disabled "auto reload" for Sakuli</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more the issue <a href="https://github.com/ConSol/sakuli/issues/295">#295</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="sahi-authorization-headers"><a class="anchor" href="#sahi-authorization-headers"></a>Sahi removes authorization headers</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sahi-authorization-header.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sahi-authorization-header.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Due to issue <a href="https://github.com/ConSol/sakuli/issues/306">Disable Sahi proxy method which remove the authorization header (e.g. Bearer Token) #306</a> Sahi OS have currently some problems with handling authorization tokens like Bearer Token correctly. This has been also discussed at <a href="https://community.sahipro.com/forums/discussion/3941/authorization-header-getting-stripped-out">Sahi Community - Authorization header getting stripped out</a> and is a Problem of Sahi OS.</p>
</div>
<div class="paragraph">
<p>This behavior is not wanted, so the Sakuli team developed a solution which manipulates Sahi by some <a href="https://docs.spring.io/spring/docs/4.3.x/spring-framework-reference/html/aop.html">Spring AOP Advice</a>, for some details take look at <a href="https://github.com/ConSol/sakuli/blob/feature/%23306-sahi-header/src/core/src/main/java/org/sakuli/aop/SahiHeaderAspect.java#L59">Sahi Header Aspect</a></p>
</div>
<div class="paragraph">
<p>By default nothing have been changed to avoid unexpected impact to other parts of Sahi OS.  To skip the execution of the Sahi action which removes the authorization header , see <a href="https://github.com/kevlened/Sahi/blob/744f77462badeb3deddce93ddf6374773f70833f/sahi/src/net/sf/sahi/request/HttpRequest.java#L272"><code>HttpRequest.removeHeader("Authorization")</code></a>, set the following <a href="#property loading mechanism">property</a> to <code>false</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sahi.proxy.removeAuthorizationHeader.enabled=false</pre>
</div>
</div>
<div class="paragraph">
<p>For more details see issue <a href="https://github.com/ConSol/sakuli/issues/306">#306</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sikuli_settings"><a class="anchor" href="#_sikuli_settings"></a>1.4.2.11. Sikuli settings</h5>
<div class="sect5">
<h6 id="_highlighting_regions"><a class="anchor" href="#_highlighting_regions"></a>Highlighting Regions</h6>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/advanced-topics/sikuli-settings-highlighting.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/advanced-topics/sikuli-settings-highlighting.adoc" target="_blank">edit</a></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.highlight.seconds=1.1f</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">duration for auto-highlighting and <code>highlight()</code> method</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sakuli.autoHighlight.enabled=false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, every region gets highlighted automatically for <code>sakuli.highlight.seconds</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a>1.4.3. Troubleshooting</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/troubleshooting.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/testdefinition/troubleshooting.adoc" target="_blank">edit</a></p>
</div>
<div class="sect4">
<h5 id="_growing_firefox_profile_folder"><a class="anchor" href="#_growing_firefox_profile_folder"></a>1.4.3.1. Growing Firefox profile folder</h5>
<div class="paragraph">
<p>If you experience that the Sahi profile folders <code>sahi0-9</code> of Mozilla Firefox (located in <code>sahi\userdata\browser\ff\profiles</code>) are getting bigger and bigger: this is caused by two bugs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=85788">https://bugzilla.mozilla.org/show_bug.cgi?id=85788</a></p>
</li>
<li>
<p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=686237">https://bugzilla.mozilla.org/show_bug.cgi?id=686237</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We do not know any Firefox settings which can prevent the creation of SQLITE writeahead-logs (if <em>you</em> do, please let us know). The only pragmatic solution at the moment is to delete all SQLITE files periodically or before each Sakuli run (e.g. by running as a preHook). <code>%SAKULI_HOME%\bin\helper\ff_purge_profile.bat</code> contains an example for windows.</p>
</div>
</div>
<div class="sect4">
<h5 id="_hanging_applications"><a class="anchor" href="#_hanging_applications"></a>1.4.3.2. Hanging applications</h5>
<div class="paragraph">
<p>If you are testing applications which tend to hang/freeze, you can run a "tidy-up"-Script by using the <code>-pre-Hook</code> option of Sakuli:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sakuli run __INST_DIR__/example_test_suites/example_ubuntu/ -preHook 'cscript.exe %SAKULI_HOME%\bin\helper\killproc.vbs -f %SAKULI_HOME%\bin\helper\procs_to_kill.txt'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In <code>procs_to_kill.txt</code> you can define which processes should be killed before Sakuli starts a new check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Full path:
C:\Program Files\Mozilla Firefox\firefox.exe
C:\Program Files\Internet Explorer\iexplore.exe
# Using wildcards (%):
java%sakuli.jar</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="image-recognition-problem"><a class="anchor" href="#image-recognition-problem"></a>1.4.3.3. Sikuli does not recognize images</h5>
<div class="paragraph">
<p>If Sikuli does not recognize regions on the screen or does recognize the wrong ones, check the following list of possible reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Run the client&#8217;s OS on a fixed resolution:</strong> Some applications/OS scale window elements slightly depending on the resolution. for example, if you are running Sakuli within Virtualbox, the guest OS changes its resolution as soon as you resize the VM window. The dimensions of window elements can then slightly diverge by 1-2 pixels from the screenshots taken before. This difference is small for human&#8217;s eyes, but a big one for Sikuli. Make sure to disable features like "Auto-Adjust Guest Display" and set the Client&#8217;s desktop to a common resolution (e.g. 1024x768). Side note: the smaller you set the resolution, the less work has to be done by Sikuli.</p>
</li>
<li>
<p><strong>Disable any image compression algorithms</strong> in your screenshot capturing program (Greenshot, Shutter, …). Otherwise Sikuli will compare <em>compressed</em> pattern images with <em>umcompressed</em> image data on the screen, which will fail for sure.</p>
</li>
<li>
<p>Sikuli uses a <strong><a href="http://doc.sikuli.org/region.html">similarity</a></strong> value of <strong>0.99 by default</strong>. That value (range: 0-0.99) determines that more than (X * 100) % of the region pixels have to match. If Sikuli does not recognize anything or the wrong regions, try to <strong>slightly</strong> decrease the similarity by changing <code>sakuli.region.similarity.default</code> globally or inside a test e.g. with <code>env.setSimilarity(0.8)</code>. This should only be neccessary if the pattern images are of poor quality or the screen always differs slightly from the pattern images (e.g. due to compression of remote sessions like vnc). Please note that a similarity of "1" would mean that "more than 100%" of the region pixels would have to match - which is completely wrong.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_missing_keystrokes_on_type_or_failing_paste"><a class="anchor" href="#_missing_keystrokes_on_type_or_failing_paste"></a>1.4.3.4. Missing keystrokes on type or failing paste</h5>
<div class="paragraph">
<p>Sikuli keyboard events <code>type()</code> and <code>paste()</code> on a Sahi-controlled browser instance can get lost if they are executed at the same time when Sahi internal status requests are sent from the browser to the Sahi proxy (default: 10x per sec).</p>
</div>
<div class="paragraph">
<p>For this reason, Sikuli type/paste methods first extend the Sahi status interval to the value of <code>sahi.proxy.onSikuliInput.delayPerKey</code> (in ms) which is long enough to execute <em>one</em> keyboard action. For the method <code>type</code> (which is "press/release" character by character), a multiple if this value is chosen. Before leaving the paste/type method, the interval gets reset by Sakuli to the default Sahi status interval.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># some recommended values for correct pasting and typing
# sakuli.properties

sahi.proxy.onSikuliInput.delayPerKey=500</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This setting is not needed if Sikuli does keyboard actions on <strong>GUIs not controlled by Sahi</strong>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_application_getregion_returns_null"><a class="anchor" href="#_application_getregion_returns_null"></a>1.4.3.5. Application.getRegion() returns NULL</h5>
<div class="paragraph">
<p>If the execution of <code>new Application("&#8230;&#8203;").open().getRegion()</code> throws a <code>NullPointerException</code> or retruns <code>null</code>, firstly turn on debug logging, see <a href="#logging">[logging]</a>. Then you mostly will see at the log output that an OS based library  is missing.</p>
</div>
<div class="paragraph">
<p>On <strong>Ubuntu</strong> or other <strong>Linux</strong> based OS check if the packe <code>wmctrl</code> is installed. If not install it via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sudo apt-get install wmctrl</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="integration_in_other_tools"><a class="anchor" href="#integration_in_other_tools"></a>1.5. Integration in other Tools</h3>
<div class="sect4">
<h5 id="forwarder"><a class="anchor" href="#forwarder"></a>1.5.1. Forwarder Concept</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/advanced-topics/forwarder-templates.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/advanced-topics/forwarder-templates.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>After a test execution has been completed Sakuli can process or better <strong>forward</strong> the test results to a certain third party system, e.g. a monitoring system, file output or other third-party systems. The processing is done by a so called Sakuli Forwarder.</p>
</div>
<div class="paragraph">
<p>Feel free to develop another forwarder or ask us to do this. Currently Sakuli is providing forwarder for following output formats:</p>
</div>
<table id="forwarders" class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. Sakuli forwarder modules</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 25%;">
<col style="width: 55%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Forwarder</th>
<th class="tableblock halign-left valign-top">Technology</th>
<th class="tableblock halign-left valign-top">Use cases</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Log-Files and screenshots<br>
- Command line output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- <a href="#continuous_integration">Continuous Integration</a> server<br>
- Locale test runs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#json-forwarder">json</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Output files in JSON format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Sakuli GUI<br>
- Interface to 3rd party systems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#sql-database">database</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- JDBC-SQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Integration in <strong>Nagios</strong> based monitoring systems as <strong>active checks</strong> with  <a href="https://labs.consol.de/de/nagios/check_mysql_health/index.html">check_mysql_health</a><br>
- Persistent storage of results<br>
- Ready for own reporting implementations<br>
- Interface to 3rd party systems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#omd-gearman">gearman</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- <a href="http://gearman.org/">Gearman</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Integration in <strong>Nagios</strong> based monitoring systems as <strong>passive checks</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#icinga2-integration">icinga2</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- <a href="https://docs.icinga.com/icinga2/latest/doc/module/icinga2/chapter/icinga2-api">Icinga2 REST API</a><br>
- JSON Data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Integration in <strong>Icinga2</strong> as <strong>passive checks</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#check_mk">check_mk</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Result spool file on check_mk agent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- Integration in CheckMK through customizable spool file<br>
- preconfigured service templates</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Usually the forwarder is invoked after the whole test suite is completed and the result of the test suite is processed.
With release <code>1.2</code> a new forwarder feature has been introduced, which allows to process the result of not only whole test suites, but also of test cases and test steps, which have been already executed. This behaviour can be controlled by the test developer, who can specify within the test case resp. test step, whether the results shall be immediately processed after the execution of the test case resp. step.</p>
</div>
<div class="paragraph">
<p>To forward the results of a certain test case, the forward flag in the saveResult shall be set to true, as shown in the example below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    testCase.saveResult(<span class="predefined-constant">true</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To forward the results of a certain test step, the forward flag in the endOfStep shall be set to true, as shown in the example below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    testCase.endOfStep(<span class="string"><span class="delimiter">&quot;</span><span class="content">Calculation</span><span class="delimiter">&quot;</span></span>,<span class="integer">30</span>, <span class="integer">50</span>, <span class="predefined-constant">true</span>);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_forwarder_templates"><a class="anchor" href="#_forwarder_templates"></a>1.5.2. Forwarder Templates</h5>
<div class="paragraph">
<p>With release <code>1.1</code> Sakuli introduced the <a href="http://jtwig.org/">Jtwig</a> template engine, which is used for generating the output of the Sakuli test suite for certain forwarders. With release <code>1.2</code> in addition to <a href="checkmk.adoc">Check_MK Forwarder</a> also <a href="omd-gearman.adoc">Gearman Forwarder</a> supports Jtwig templates.</p>
</div>
<div class="paragraph">
<p>Using templates for the forwarder output makes it possible to easily modify the output of Sakuli and adapt it without the need to release a new Sakuli version.</p>
</div>
<div class="paragraph">
<p>Here we want to describe how Jtwig is working, how to use a customized template and what you have to pay attention to.</p>
</div>
<div class="sect5">
<h6 id="_jtwig_template"><a class="anchor" href="#_jtwig_template"></a>JTwig template</h6>
<div class="paragraph">
<p><a href="http://jtwig.org/">Jtwig</a> is a template engine based on Java, which has a simple and understandable syntax und is easy to use. The following snippet shows an example of a Jtwig template used in Sakuli.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    {% for testStep in testCase.stepsAsSortedSet %}
        , step &quot;{{ testStep.name }}&quot;$whitespace$
        {% if (testStep.state.error) %}
            EXCEPTION: {{ errorMessageCreator.exceptionMessage(testStep) }}
        {% else %}
            over runtime ({{ testStep.duration }}s/warn at {{ testStep.warningTime }}s)
        {% endif %}
    {% endfor %}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The input for this template is the <code>testCase</code> object, which has a set ot test steps. The template iterates over all the steps and prints certain step information based on the state of the test step.</p>
</div>
<div class="paragraph">
<p>The whole <a href="http://jtwig.org/">Jtwig</a> feature set is supported and can be used within the Sakuli forwarder.
For more detailed information about Jtwig templates, please refer to <a href="http://jtwig.org/">Jtwig</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_customized_jtwig_functions"><a class="anchor" href="#_customized_jtwig_functions"></a>Customized Jtwig Functions</h6>
<div class="paragraph">
<p><a href="http://jtwig.org/">Jtwig</a> comes with a list of functions like <code>abs</code>, <code>concat</code> etc, which can be used within a template. In addition to the standard functions, Jtwig supports the implementation and injection of custom functions. Sakuli provides following custom functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://github.com/ConSol/sakuli/blob/dev/src/core/src/main/java/org/sakuli/services/forwarder/configuration/AbbreviateFunction.java" target="_blank">abbreviate</a></code> - The function abbreviates a certain string to a specified length. The implementation is based on the StringUtils.abbreviate method from the Apache commons library.</p>
</li>
<li>
<p><code><a href="https://github.com/ConSol/sakuli/blob/dev/src/core/src/main/java/org/sakuli/services/forwarder/configuration/ExtractScreenshotFunction.java" target="_blank">extractScreenshot</a></code> - The function extracts the screenshot from a specified test data entity, which contains an exception.</p>
</li>
<li>
<p><code><a href="https://github.com/ConSol/sakuli/blob/dev/src/core/src/main/java/org/sakuli/services/forwarder/configuration/GetOutputDurationFunction.java" target="_blank">getOutputDuration</a></code> - The function returns the formatted duration for a specified test entity.</p>
</li>
<li>
<p><code><a href="https://github.com/ConSol/sakuli/blob/dev/src/core/src/main/java/org/sakuli/services/forwarder/configuration/GetOutputStateFunction.java" target="_blank">getOutputState</a></code> - The function returns the <code><a href="https://github.com/ConSol/sakuli/blob/dev/src/core/src/main/java/org/sakuli/datamodel/state/SakuliState.java" target="_blank">OutputState</a></code> for a specified SakuliState.</p>
</li>
<li>
<p><code><a href="https://github.com/ConSol/sakuli/blob/dev/src/core/src/main/java/org/sakuli/services/forwarder/configuration/IsBlankFunction.java" target="_blank">isBlank</a></code> - The function checks whether the specified string parameter is blank.</p>
</li>
<li>
<p><code><a href="https://github.com/ConSol/sakuli/blob/dev/src/core/src/main/java/org/sakuli/services/forwarder/configuration/UnixTimestampConverterFunction.java" target="_blank">convertToUnixTimestamp</a></code> - The function converts a date object into an unix timestamp.</p>
</li>
<li>
<p><code><a href="https://github.com/ConSol/sakuli/blob/dev/src/core/src/main/java/org/sakuli/services/forwarder/configuration/GetTestDataEntityTypeFunction.java" target="_blank">getTestDataEntityType</a></code> - The function retrieves the type of a provided AbstractTestDataEntity, which currently could be one of: TestSuite, TestCase or TestCaseStep.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please refer to the Sakuli <a href="https://github.com/ConSol/sakuli/blob/dev/src/common/src/main/resources/org/sakuli/common/config/templates" target="_blank">default Jtwig templates</a>, to see the custom functions in action.</p>
</div>
<div class="paragraph">
<div class="title">Handling of white spaces and new lines</div>
<p>The forwarder implementation provides a special handling of white spaces and new lines within the templates. For this feature the <code>jtwig-spaceless-extension</code> has been used, which comes with a SpaceRemover interface. This has been implemented by the <code>LeadingWhitespaceRemover</code>. The <code>LeadingWhitespaceRemover</code> is configured in the twig template engine and removes all leading whitespaces for every line and all line endings within the template. It can be activated by adding the text snippet or the whole template within the following tags <code>{% spaceless %}</code> and <code>{% endspaceless %}</code>.
The <code>LeadingWhitespaceRemover</code> has been introduced, to make the implementation and maintaining of the templates easier.</p>
</div>
<div class="paragraph">
<p>Since the leading white spaces and the new lines are removed, some special placeholder have been introduced, which are replaced by the real characters at the end of the template generation:
* <code>$whitespace$</code> - the placeholder will be replaced by a real white space.
* <code>$newline$</code> - the placeholder will be replaced by a new line <code>&#39;\n&#39;</code>.</p>
</div>
<div class="paragraph">
<div class="title">Using a customized templates</div>
<p>Sakuli provides a default template set, which is placed within the templates directory under <code><em>SAKULI_HOME</em>/config/templates</code> within the Sakuli home folder (e.g. the default Check_MK templates can be found in a subdirectory <code>check_mk</code>).</p>
</div>
<div class="paragraph">
<p>The property <code>sakuli.forwarder.template.folder</code> defines the path to the main.twig template for the respective forwarder. The default value is set to <code>${sakuli.home.folder}/config/templates</code>.</p>
</div>
<div class="paragraph">
<p>Before customizing a default template, it is essential to copy the templates to a new location and configure that location as the template location in Sakuli, otherwise installing a new Sakuli release would overwrite the modified templates within the config directory.</p>
</div>
<div class="paragraph">
<div class="title">Structure of the default main template</div>
<p>Generally the forwarder is expecting to find a certain template file named <code>main.twig</code> within the configured template directory. The default <code>main.twig</code> template doesn&#8217;t contain the whole output, but includes further templates to make the single templates more readable. Since the templates are fully customizable, the user can decide how the templates are structured, whether to use nested templates or to define everything within a single file.</p>
</div>
<div class="paragraph">
<p>The following snippet shows the default <code>main.twig</code> template provided by Sakuli for the Check_MK forwarder. This template is also showing the use of the spaceless extension and the special character for a new line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    {% spaceless %}
    {% import 'error_message_creator.twig' as errorMessageCreator %}
        <span class="error">&lt;</span><span class="error">&lt;</span><span class="tag">&lt;local&gt;</span><span class="error">&gt;</span><span class="error">&gt;</span>$newline$
        {% include 'performance_data.twig' %}
        {% include 'short_summary.twig' %}
        {% include 'detailed_summary.twig' %}
        $newline$
    {% endspaceless %}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Supported Forwarder</div>
<ul>
<li>
<p><a href="#check_mk">Check_MK</a> (since <code>1.1</code>)</p>
</li>
<li>
<p><a href="#omd-gearman">Gearman forwarder</a> (since <code>1.2</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sql-database"><a class="anchor" href="#sql-database"></a>1.5.3. SQL Database</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/sql-database.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/sql-database.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>This page describes how the results of Sakuli can be stored into a <strong>MySQL database</strong> which can be read by other 3rd party systems.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sql_schema.png" alt="sakuli-db-schema"></span></p>
</div>
<div class="sect5">
<h6 id="sql-database-create-db"><a class="anchor" href="#sql-database-create-db"></a>Create Sakuli DB</h6>
<div class="paragraph">
<p>Create the <strong>Sakuli database</strong> and the DB user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mysql &lt; __TEMP__/sakuli-vx.x.x-SNAPSHOT/setup/database/create_sakuli_database.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the <strong>database user</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mysql
  grant ALL on sakuli.* to '__DB_USER__'@'%' identified by '__DB_PASSWORD__';
  flush privileges;
  quit</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check the connection with your favorit SQL tool:</p>
</div>
</div>
<div class="sect5">
<h6 id="sql-database-enable-forwarder"><a class="anchor" href="#sql-database-enable-forwarder"></a>Enable database forwarder</h6>
<div class="paragraph">
<p>On the Sakuli client you must set the <a href="#property-loading-mechanism">properties</a> for the database receiver. For this, edit <code>sakuli.properties</code> in the folder containing the test suites (you can copy the lines from <code><em>SAKULI_HOME</em>/conf/sakuli-default.properties</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">__INST_DIR__/example_test_suites/sakuli.properties:

# DEFAULT: false
sakuli.forwarder.database.enabled=true

#DEFAULT: mysql
sakuli.forwarder.database.jdbc.driverClass=com.mysql.jdbc.Driver
sakuli.forwarder.database.host=__DB_IP__
sakuli.forwarder.database.port=__DB_PORT__
sakuli.forwarder.database=sakuli
sakuli.forwarder.database.user=__DB_USER__
sakuli.forwarder.database.password=__DB_PW__</code></pre>
</div>
</div>
<div id="sql-database-test-transmission" class="paragraph">
<div class="title">Test result transmission</div>
<p>Execute the example test case:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu</strong>: <code>sakuli run <em>INST_DIR</em>/example_test_suites/example_ubuntu/</code></p>
</li>
<li>
<p><strong>openSUSE</strong>: <code>sakuli run <em>INST_DIR</em>/example_test_suites/example_opensuse/</code></p>
</li>
<li>
<p><strong>Windows 7</strong>: <code>sakuli run <em>INST_DIR</em>\example_test_suites\example_windows7\</code></p>
</li>
<li>
<p><strong>Windows 8</strong>: <code>sakuli run <em>INST_DIR</em>\example_test_suites\example_windows8\</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The database should now contain the results.</p>
</div>
</div>
<div class="sect5">
<h6 id="_integration_in_other_tools"><a class="anchor" href="#_integration_in_other_tools"></a>Integration in other tools</h6>
<div class="paragraph">
<p>You can find queries using the Sakuli DB in <code>/setup/nagios/CheckMySQLHealthSakuli.pm</code> in the extracted Sakuli sources folder.</p>
</div>
<div class="paragraph">
<p>We are looking forward to reading your story of how you integrated the DB results in your toolchain.</p>
</div>
</div>
<div class="sect5">
<h6 id="sql-database-optional-cleanup"><a class="anchor" href="#sql-database-optional-cleanup"></a>Database cleanup (optional)</h6>
<div class="paragraph">
<p>Sakuli&#8217;s database can get very large over time. Use the following database maintenance script to keep only the most recent data.</p>
</div>
<div class="paragraph">
<p>Create a crontab entry for a automatic database cleanup of data older than 90 days:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~$ crontab -e
00 12 * * * $SAKULI_HOME/bin/helper/mysql_purge.sh 90 &gt; /dev/null 2&gt;&amp;1</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that, the crontab should be active.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="json-forwarder"><a class="anchor" href="#json-forwarder"></a>1.5.4. JSON Forwarder</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/json-forwarder.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/json-forwarder.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>This page describes how the test suite results of Sakuli can be serialized to a JSON file, which can be read by other 3rd party systems.</p>
</div>
<div class="sect5">
<h6 id="json-forwarder-configuraiton"><a class="anchor" href="#json-forwarder-configuraiton"></a>Configuration of JSON forwarder</h6>
<div class="paragraph">
<p>The JSON forwarder provides two properties to customise its behaviour. Using those properties it is possible to enable resp. disable the forwarder and to change the folder, to which the json output is written. The JSON forwarder is enabled by default. Both properties can be edited in <code>testsuite.properties</code> in the folder containing the test suite. To read more about, how to overloading of properties work, see <a href="#property loading mechanism">properties</a>.  (you can copy the lines from <a href="#sakuli-default-properties">Property Reference</a>):</p>
</div>
<div class="listingblock">
<div class="title"><code>testsuite.properties</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># DEFAULT: true
sakuli.forwarder.json.enabled

#DEFAULT: ${sakuli.log.folder}/_json
sakuli.forwarder.json.dir</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="json-forwarder-output"><a class="anchor" href="#json-forwarder-output"></a>Output of JSON forwarder</h6>
<div class="paragraph">
<p>After executing the example test suite, the json output can be found under <code>_logs/_json</code> folder of the test suite. The name of the output file is based on the following pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>`&lt;test_suite_id&gt;_&lt;timestamp&gt;.json`</code></pre>
</div>
</div>
<div class="paragraph">
<p>For every test suite run, a new json output is generated as soon as the forwarder is enabled.</p>
</div>
</div>
<div class="sect5">
<h6 id="json-forwarder-usage"><a class="anchor" href="#json-forwarder-usage"></a>Usage of JSON forwarder output</h6>
<div class="paragraph">
<p>Currently the output, generated by the JSON forwarder, is used as an input for the <a href="https://github.com/ConSol/sakuli-ui">Sakuli UI</a>. The Sakuli UI is displaying the result of the test suite executed by Sakuli. It is possible to navigate through all the test cases, test steps and test actions for a certain test suite.
Furthermore the JSON output can be used as an input for third party systems, e.g. some monitoring system.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="monitoring-integration"><a class="anchor" href="#monitoring-integration"></a>1.5.5. Monitoring integration</h4>
<div class="sect4">
<h5 id="omd-preparation"><a class="anchor" href="#omd-preparation"></a>1.5.5.1. OMD preparation</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/omd-preparation.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/omd-preparation.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>This chapter describes all necessary steps to prepare a OMD site with a <strong>Nagios</strong> compatible monitoring system to receive Sakuli test results with one of the forwarders <a href="#omd-gearman">gearman</a>, <a href="#omd-sql-database">database</a>, <a href="#check_mk">Check_MK</a> or <a href="#icinga2-integration">icinga2-api</a>. For some parts of this documentation, OMD with Thruk as web frontend will be presupposed, but any other Nagios based system will do also (the configuration steps may vary then).</p>
</div>
<div class="sect5">
<h6 id="omd-docker"><a class="anchor" href="#omd-docker"></a>OMD Docker image</h6>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you want to run OMD-Labs in a container then check out the <a href="https://github.com/ConSol/omd-labs-docker">OMD-Labs on Docker project</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_requirements"><a class="anchor" href="#_requirements"></a>Requirements</h6>
<div class="ulist">
<ul>
<li>
<p><strong><a href="https://labs.consol.de/OMD/">OMD</a></strong> installed on a Linux operating system</p>
</li>
<li>
<p>a running <strong>OMD site</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_nagios_configuration"><a class="anchor" href="#_nagios_configuration"></a>Nagios configuration</h6>
<div class="paragraph">
<p>Use the Makefile located in <code>$OMD_ROOT/share/sakuli/omd</code> to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>install predefined Nagios/Naemon service templates</p>
</li>
<li>
<p>install the Sakuli logo</p>
</li>
<li>
<p>enable HTML interpretation in the service output</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[demo]:~/share/sakuli/setup/omd$ make config</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now choose one of the <a href="#forwarders">Sakuli forwarder modules</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="omd-gearman"><a class="anchor" href="#omd-gearman"></a>1.5.5.2. Gearman forwarder</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/omd-gearman.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/omd-gearman.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>This page describes how the results of Sakuli tests can be transmitted directly into the <strong>Gearman result queue</strong> of a monitoring system.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you do not use a gearman-enabled monitoring system in a <a href="https://labs.consol.de/OMD/">OMD</a> environment, the procedure may vary.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sakuli-gearman.png" alt="sakuli-db-forwarder"></span></p>
</div>
<div class="sect5">
<h6 id="_omd_configuration"><a class="anchor" href="#_omd_configuration"></a>OMD Configuration</h6>
<div class="sect6">
<h7 id="_enable_and_configure_mod_gearman"><a class="anchor" href="#_enable_and_configure_mod_gearman"></a>Enable and configure mod-gearman</h7>
<div class="paragraph">
<p>Use the Makefile located in <code>$OMD_ROOT/share/sakuli/omd/</code> to configure mod_gearman:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>enable all services for mod_gearman</p>
</li>
<li>
<p>set the bind IP and port (default: <code>0.0.0.0:4730</code>; overwrite with e.g. <code>export GEARMAND_PORT=192.168.130.10:4731</code>)</p>
</li>
<li>
<p>set the encryption key (default: <code>sakuli_secret</code>; overwrite with e.g. <code>export GEARMAN_SECRET=mykey</code>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[demo]:~/share/sakuli/setup/omd$ make gearman [enter]
...</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For security reasons, the Makefile will only configure mod-gearman if it is not enabled yet. If it is already enabled, inspect the Makefile, read the steps carefully and execute the steps by hand.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For PRODUCTION usage please use individual encryption key!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By default, mod_gearman does only accept AES encrypted packages. Since version <code>1.1.0</code> Sakuli will automatic use the encryption key <code>sakuli_secret</code> (located at the <code><a href="#sakuli-default-properties">sakuli-default.properties</a></code>). To change the encryption password, see <a href="#sakuli_gearman_client_config">Sakuli Client Configuration</a>.</p>
</div>
<div class="paragraph">
<p>If you do not want to use encryption at all enable <code>accept_clear_results</code> and disable <code>sakuli.forwarder.gearman.encryption</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">OMD[demo]:~ vim ~/etc/mod-gearman/server.cfg
...
accept_clear_results=yes</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">#testsuite.properties
sakuli.forwarder.gearman.encryption=false</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_create_a_nagios_service"><a class="anchor" href="#_create_a_nagios_service"></a>Create a Nagios service</h7>
<div class="paragraph">
<p>Create a service which should receive Sakuli test results. Host/service names derive from the following <a href="#property-loading-mechanism">properties</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>host</strong>: <code>sakuli.forwarder.gearman.nagios.hostname</code> (defined globally or per suite)</p>
</li>
<li>
<p><strong>service</strong>: <code>testsuite.id</code> (defined in <code>testsuite.properties</code>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>define host {
  host_name                      sakuli_client
  alias                          sakuli_client
  address                        __SAKULI_CLIENT_IP__
  use                            generic-host
}

define service {
  service_description            example_xfce
  host_name                      sakuli_client
  use                            tpl_s_sakuli_gearman
  freshness_threshold            180
}</code></pre>
</div>
</div>
<div id="omd-gearman-freshness_threshold" class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<em>freshness_threshold</em> should be slightly higher than the interval Sakuli tests are executed
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The check is waiting now for check results from a Sakuli client.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="sakuli_gearman_client_config"><a class="anchor" href="#sakuli_gearman_client_config"></a>Sakuli Client Configuration</h6>
<div class="paragraph">
<div class="title">Modify Sakuli gearman forwarder parameter</div>
<p>On the Sakuli client you must set the global <a href="#property-loading-mechanism">properties</a> for the gearman receiver. For this, edit <code>sakuli.properties</code> in the folder containing the test suites (you can copy the lines from <code><em>SAKULI_HOME</em>/conf/sakuli-default.properties</code>):.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">__INST_DIR__/example_test_suites/sakuli.properties:

sakuli.forwarder.gearman.enabled=true
sakuli.forwarder.gearman.encryption=true <i class="conum" data-value="1"></i><b>(1)</b>
sakuli.forwarder.gearman.secret.key=secret_password <i class="conum" data-value="1"></i><b>(1)</b>
sakuli.forwarder.gearman.server.host=__GEARMAN_IP__
sakuli.forwarder.gearman.server.port=[Gearman Port defined in &quot;omd config&quot; (default:4730)]
sakuli.forwarder.gearman.server.queue=check_results <i class="conum" data-value="2"></i><b>(2)</b>

# Nagios host where all Sakuli services are defined on. If neccessary, override this value per test suite.
# (Nagios service name is defined by testsuite.properties -&gt; suiteID)
sakuli.forwarder.gearman.nagios.hostname=sakuli_client
sakuli.forwarder.gearman.nagios.check_command=check_sakuli</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enable encryption and set the key only if you did not activate <code>accept_clear_results</code> in mod_gearman. Otherwise, set encryption to <code>false</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Change this queue name if you use the <a href="#gearman_proxy">Sakuli Gearman proxy</a></td>
</tr>
</table>
</div>
<div id="invalid-key-exception-aes-cryptography" class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In case you get a <code>java.lang.security.InvalidKeyException</code> with error message <em>"Illegal key size or default parameters"</em> you probably
need to enable unlimited strength security policies in your Java JRE. This is done by installing <a href="http://openjdk.java.net/">OpenJDK</a> or by adding a special security policy JAR to the Java JRE lib directory. For the Java JRE 8, take a look at <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">Oracle - Java Cryptography Extension 8</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_output_format_template"><a class="anchor" href="#_output_format_template"></a>Output format template</h6>
<div class="paragraph">
<p>With release <code>1.2</code> the implementation of the Gearman forwarder was changed to use the templating mechanism based on Jtwig and introduced in Sakuli in some releases ago. The new implementation decouples the output format from the Sakuli binary, which allows format adaptions to fulfill your needs at any time without installing a new version of Sakuli.</p>
</div>
<div class="paragraph">
<p>Sakuli comes with default templates, which are placed in <code>$INSTALL_DIR/config/templates</code>. The <a href="https://github.com/ConSol/sakuli/blob/dev/src/common/src/main/resources/org/sakuli/common/config/templates/gearman" target="_blank">default Gearman templates</a> can be found in a subdirectory <code>gearman</code>.</p>
</div>
<div class="paragraph">
<p>For further information how the default template directory can be changed or how the forwarder templates can be customized please refer to <a href="#forwarder-templates">[forwarder-templates]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="gearman_proxy"><a class="anchor" href="#gearman_proxy"></a>Gearman proxy (optional)</h6>
<div class="paragraph">
<p><span class="image"><img src="images/gearman_proxy.png" alt="gearman_proxy" width="780"></span></p>
</div>
<div class="paragraph">
<p>Use the Sakuli gearman proxy script if you want to intervene into the communication between Sakuli and Naemon/Nagios.</p>
</div>
<div class="paragraph">
<p><strong>Possible use cases</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Change parts of the messages Sakuli sends to the monitoring system &#8658; there are some examples contained already</p>
</li>
<li>
<p>Getting notified when Sakuli sends results to services which do not exists</p>
</li>
<li>
<p>Auto-create services for incoming results (not yet implemented)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use the Makefile located in <code>$OMD_ROOT/share/sakuli/</code> to enable the feature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[demo]:~/share/sakuli/setup/omd$ make gearman_proxy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit <code>etc/mod-gearman/sakuli_gearman_proxy.cfg</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$remoteHost="172.17.0.2"; <i class="conum" data-value="1"></i><b>(1)</b>
$remotePort="4730"; <i class="conum" data-value="1"></i><b>(1)</b>
$localHost="172.17.0.2"; <i class="conum" data-value="2"></i><b>(2)</b>
$localPort="4730"; <i class="conum" data-value="2"></i><b>(2)</b>
$queues = {
    "$remoteHost:$remotePort/check_results_sakuli"  =&gt; "$localHost:$localPort/check_results",
}; <i class="conum" data-value="3"></i><b>(3)</b> <i class="conum" data-value="4"></i><b>(4)</b>

$err_h = 'error_host'; <i class="conum" data-value="5"></i><b>(5)</b>
$err_s = 'eror_svc';
$err_r = '2'; <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Gearman IP/Port listening for Sakuli results. Set this to the same values as &lt;2&gt; unless gearman_proxy.pl is running on another system.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Gearman IP/Port of the monitoring system</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>check_results_sakuli</code> &#8658; queue name to receive Sakuli results. Make sure this queue name is defined in property <code>sakuli.forwarder.gearman.server.queue</code> on all Sakuli clients (see <a href="#sakuli_gearman_client_config">Sakuli Client Configuration</a>)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>check_results</code> &#8658; default queue of mod-gearman where gearman workers write back their results. (no need to change that)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The proxy does a livestatus query for each incoming package to ensure that the receiving host/service exists. Provide a special "error host/service" pair where the proxy can send a message when there are results coming in for non-existent services.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Status of messages for non-existent services (2=CRITICAL)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Start the proxy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">OMD[demo]:~$ omd start sakuli_gearman_proxy
Starting sakuli_gearman_proxy...OK</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check that the queue <code>check_results_sakuli</code> is running in addition to the default queue <code>check_results</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[demo]:~$ gearman_top
2017-06-09 13:37:28  -  localhost:4730  -  v0.33

 Queue Name           | Worker Available | Jobs Waiting | Jobs Running
-----------------------------------------------------------------------
 check_results        |               1  |           0  |           0
 check_results_sakuli |               1  |           0  |           0
-----------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This change does affect other monitoring checks executed with mod-gearman, because only Sakuli will send results into the queue <code>check_results_sakuli</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="omd-sql-database"><a class="anchor" href="#omd-sql-database"></a>1.5.5.3. Database forwarder</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/omd-sql-database.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/omd-sql-database.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>This page describes how the results of the Sakuli tests (e.g. example_windows7/ubuntu/opensuse) can be written into a <strong>MySQL database</strong> which is then checked asynchronously by the monitoring system with <code>check_mysql_health</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you do not use MySQL in a <a href="https://labs.consol.de/OMD/">OMD</a> environment, the procedure may vary.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sakuli-db.png" alt="sakuli-db-forwarder"></span></p>
</div>
<div class="sect5">
<h6 id="_omd_configuration_2"><a class="anchor" href="#_omd_configuration_2"></a>OMD Configuration</h6>
<div class="sect6">
<h7 id="_enabling_the_site_s_mysql_database"><a class="anchor" href="#_enabling_the_site_s_mysql_database"></a>Enabling the site&#8217;s MySQL Database</h7>
<div class="paragraph">
<p>If not already done for other reasons, a site-specific MySQL instance has to be started. That&#8217;s the place where Sakuli clients can store their check results.</p>
</div>
<div class="paragraph">
<p>Use the Makefile located in <code>$OMD_ROOT/share/sakuli/omd/</code> to configure mysql:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>enable MySQL in OMD</p>
</li>
<li>
<p>create &amp; initialize the database</p>
</li>
<li>
<p>install check_mysql_health Perl module to check the Sakuli result database, configure the check_command</p>
</li>
<li>
<p>create the sakuli user (default: <code>sakuli</code>; overwrite with e.g. <code>export MYSQL_USER=alice</code>)</p>
</li>
<li>
<p>set the password of sakuli user (default: <code>sakuli</code>; overwrite with e.g. <code>export MYSQL_PASSWORD=topsecret</code>)</p>
</li>
<li>
<p>set the bind IP (default: <code>0.0.0.0</code>; overwrite with e.g. <code>export MYSQL_BINDADDRESS=192.168.130.10</code>)</p>
</li>
<li>
<p>set the bind port (default: <code>3306</code>; overwrite with e.g. <code>export MYSQL_PORT=3377</code>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[demo]:~/share/sakuli/setup/omd$ make mysql [enter]
...</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_check_the_connection_to_the_sakuli_db"><a class="anchor" href="#_check_the_connection_to_the_sakuli_db"></a>check the connection to the Sakuli DB</h7>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">OMD[sakuli]:~$  lib/nagios/plugins/check_mysql_health -H __DB_IP__ --username sakuli --password sakuli --database sakuli --port 3306 --mode connection-time
  OK - 0.24 seconds to connect as sakuli | connection_time=0.2366s;1;5</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_create_nagios_check"><a class="anchor" href="#_create_nagios_check"></a>create Nagios check</h7>
<div class="paragraph">
<p>Nagios fetches Sakuli check results using the plugin <a href="http://labs.consol.de/lang/de/nagios/check_mysql_health/">check_mysql_health</a>, which is already contained in OMD.</p>
</div>
<div class="paragraph">
<p>The Perl module <code>CheckMySQLHealthSakuli.pm</code> enhances the functionality of <em>check_mysql_health</em> by introducing the mode <code>--my-sakuli-suite</code>.</p>
</div>
<div class="paragraph">
<p>Set <strong>USER macros</strong> for static vars in <code>resource.cfg</code>, which makes it easy to use them in all nagios checks:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">OMD[sakuli]:~$ vim ~/etc/nagios/resource.cfg
  # database name
  $USER10$=sakuli
  # database user
  $USER11$=__DB_USER__
  # database password
  $USER12$=__DB_PASSWORD__
  # database port
  $USER13$=__DB_PORT__
  # check_mysql_health module dir
  $USER15$=~/etc/check_mysql_health/
  # database IP
  $USER16$=__MySQL_Database_IP__</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_create_a_nagios_service_2"><a class="anchor" href="#_create_a_nagios_service_2"></a>create a Nagios service</h7>
<div class="paragraph">
<p>Create the following <strong>host/service object</strong> for the first test case. Note the ARG2 in check_command: the database check will only evaluate the last result if it is max. 180 seconds old. If older, the check will return UNKNOWN. (For comparison: this is equivalent to "freshness_threshold" if you would use the <a href="#omd-gearman">Gearman forwarder</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
PNP4Nagios: you should set the <a href="#pnp4nagios-rrd-heartbeat">RRD heartbeat</a> to the same value to get a realistic gap in the graph if recent client results are missing. Otherwise the heartbeat of 2 hours will fill up the graph.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">define host {
  host_name                      sakuli_client
  alias                          sakuli_client
  address                        __SAKULI_CLIENT_IP__
  use                            generic-host
}

define service {
  # service_description            example_windows7
  # service_description            example_opensuse
  service_description            example_ubuntu
  host_name                      sakuli_client
  use                            generic-service,srv-pnp
  check_command                  check_sakuli!sakuli_demo!180
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Reload the monitoring core:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">omd reload core</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now open Thruk; you should see now the Sakuli host with one service attached:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/omd-pending.png" alt="omd_pending"></span></p>
</div>
<div class="paragraph">
<p>Re-scheduling this service should display the UNKNOWN message that the requested suite could not be found. For the moment, this is ok:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/omd-unknown.png" alt="omd_unknown"></span></p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sakuli_client_configuration"><a class="anchor" href="#_sakuli_client_configuration"></a>Sakuli Client Configuration</h6>
<div class="paragraph">
<div class="title">Modify Sakuli database forwarder parameter</div>
<p>On the Sakuli client you must set the global <a href="#property-loading-mechanism">properties</a> for the database receiver, as described here: <a href="#sql-database-enable-forwarder">Enable database forwarder</a></p>
</div>
<div class="paragraph">
<div class="title">Test result transmission to OMD</div>
<p>Execute one of the example test case:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu</strong>: <code>sakuli run <em>INST_DIR</em>/example_test_suites/example_ubuntu/</code></p>
</li>
<li>
<p><strong>openSUSE</strong>: <code>sakuli run <em>INST_DIR</em>/example_test_suites/example_opensuse/</code></p>
</li>
<li>
<p><strong>Windows 7</strong>: <code>sakuli run <em>INST_DIR</em>\example_test_suites\example_windows7\</code></p>
</li>
<li>
<p><strong>Windows 8</strong>: <code>sakuli run <em>INST_DIR</em>\example_test_suites\example_windows8\</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The service should change its status to:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/omd-db-ok.png" alt="omd_pending2"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/omd-db-ok-details.png" alt="omd_pending2"></span></p>
</div>
</div>
<div class="sect5">
<h6 id="_database_cleanup_optional"><a class="anchor" href="#_database_cleanup_optional"></a>Database cleanup (optional)</h6>
<div class="paragraph">
<p>Sakuli&#8217;s database can get very large over time. Use the following database maintenance script to keep only the most recent data.</p>
</div>
<div class="paragraph">
<p>Uncomment and adapt the preinstalled OMD crontab entry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">OMD[sakuli]:~$ vim etc/cron.d/sakuli
00 12 * * * $OMD_ROOT/local/bin/mysql_purge.sh 90 &gt; /dev/null 2&gt;&amp;1</code></pre>
</div>
</div>
<div class="paragraph">
<p>After that, reload the OMD crontab:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">OMD[sakuli]:~$ omd reload crontab
Removing Crontab...OK
Initializing Crontab...OK</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_troubleshooting_2"><a class="anchor" href="#_troubleshooting_2"></a>Troubleshooting</h6>
<div class="sect6">
<h7 id="_apparmor_prevention_on_mysql"><a class="anchor" href="#_apparmor_prevention_on_mysql"></a>Apparmor prevention on MySQL</h7>
<div class="paragraph">
<p><strong>Possible error 1:</strong> mysql_install_db fails:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>141021 16:40:03 [Warning] Can't create test file /omd/sites/sakuli/var/mysql/omd2.lower-test
ERROR: 1005  Can't create table 'db' (errno: 13)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Possible error 2:</strong> MySQL startup fails:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[sakuli]:~$ omd start
Starting gearmand...OK
Starting MySQL... ..........ERROR.
Starting rrdcached...OK</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Solution:</strong></p>
</div>
<div class="paragraph">
<p>Check <code>/var/log/syslog</code> or <code>/var/log/messages</code> for apparmor messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>…
Oct 21 17:08:21 omd2 kernel: [116300.215520] type=1400 audit(1413904101.323:27): apparmor="DENIED" operation="open" profile="/usr/sbin/mysqld" name="/opt/omd/sites/sakuli/.my.cnf" pid=13136 comm="mysqld" requested_mask="r" denied_mask="r" fsuid=999 ouid=999
…</code></pre>
</div>
</div>
<div class="paragraph">
<p>Apparmor has prevented you from using a non-default config file for MySQL. If you know how to create a apparmor profile for MySQL on OMD, let us know :-)</p>
</div>
<div class="paragraph">
<p>The quick solution is to completely disable apparmor. Check if unloading apparmor profiles solves the problem:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>root@omd:~# service apparmor teardown
 * Unloading AppArmor profiles</code></pre>
</div>
</div>
<div class="paragraph">
<p>If so, execute the following command to uninstall apparmor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>root@omd2:~# apt-get remove apparmor</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="icinga2-integration"><a class="anchor" href="#icinga2-integration"></a>1.5.5.4. Icinga2 forwarder</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/icinga2api.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/icinga2api.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>This page describes how the results of Sakuli tests can be sent to the <a href="http://docs.icinga.org/icinga2/snapshot/doc/module/icinga2/chapter/icinga2-api">REST API</a> of an <a href="https://www.icinga.org/">Icinga2</a> monitoring instance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This part of the documentation does <em>not</em> apply to OMD. Some steps may vary for Icinga2 on OMD.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sakuli-icinga2.png" alt="sakuli-icinga2"></span></p>
</div>
<div class="sect5">
<h6 id="_icinga2_configuration"><a class="anchor" href="#_icinga2_configuration"></a>Icinga2 Configuration</h6>
<div class="sect6">
<h7 id="_enable_the_icinga2_api"><a class="anchor" href="#_enable_the_icinga2_api"></a>Enable the Icinga2 API</h7>
<div class="paragraph">
<p>The steps to enable the Icinga2 API are described in the <a href="http://docs.icinga.org/icinga2/snapshot/doc/module/icinga2/chapter/icinga2-api">REST API documentation</a>.</p>
</div>
</div>
<div class="sect6">
<h7 id="_create_a_icinga2_service"><a class="anchor" href="#_create_a_icinga2_service"></a>Create a Icinga2 service</h7>
<div class="paragraph">
<p>Create a <strong>check_command</strong>, which will be executed only if Icinga did not receive a Sakuli result within a certain time. This ensures that you get a notification even if no passive check results arrive in Icinga at all:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>vim /etc/icinga2/conf.d/commands.conf

object CheckCommand "check_dummy" {
   import "plugin-check-command"
   command = [
     PluginDir + "/check_dummy","$dummy_state$","$dummy_text$"
   ]
   vars.dummy_state = 0
   vars.dummy_text = "Check was successful."
}

object CheckCommand "check_sakuli" {
   import "check_dummy"
   vars.dummy_state = 3
   vars.dummy_text = "No passive Sakuli check result received."
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a <strong>host</strong> object for the Sakuli client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>vim /etc/icinga2/conf.d/hosts.conf

object Host "sakuliclient01" {
   import "generic-host"
   address = [IP]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the following <strong>service</strong> object for the first test case. <em>freshness_threshold</em> should be slightly higher than the interval Sakuli tests are planned (if you are using PNP4Nagios, see also <a href="#pnp4nagios-rrd-heartbeat">RRD heartbeat</a> )</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>object Service "sakuli_demo" {
  import "generic-service"
  host_name = "sakuliclient01"
  check_command = "check_sakuli"
  enable_active_checks = 0
  enable_passive_checks = 1
  enable_flapping = 0
  volatile = 1
  enable_perfdata = 1
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Reload Icinga2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>service icinga2 reload</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now open Icingaweb2; you should see the Sakuli host with the service <em>"sakuli_demo"</em> attached:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/icingaweb2-pending2.png" alt="icingaweb2-pending2"></span></p>
</div>
<div class="paragraph">
<p>The check is waiting now for check results from a Sakuli client.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_sakuli_client_configuration_2"><a class="anchor" href="#_sakuli_client_configuration_2"></a>Sakuli Client Configuration</h6>
<div class="paragraph">
<div class="title">Sakuli Icinga2 forwarder parameter</div>
<p>On the Sakuli client you must set the global <a href="#property-loading-mechanism">properties</a> for the Icinga2 receiver. For this, edit <code>sakuli.properties</code> in the folder containing the test suites (you can copy the lines from <code><em>SAKULI_HOME</em>/conf/sakuli-default.properties</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">## En-/disable Icinga2 forwarder, default: false
sakuli.forwarder.icinga2.enabled=true
sakuli.forwarder.icinga2.api.host=__ICINGA_IP__
sakuli.forwarder.icinga2.api.port=5665
sakuli.forwarder.icinga2.api.username=icingasakuli
sakuli.forwarder.icinga2.api.password=icingasakuli
sakuli.forwarder.icinga2.hostname=sakuliclient01</code></pre>
</div>
</div>
<div class="paragraph">
<p>For other <strong>OPTIONAL</strong> gearman parameters you can adjust, see <a href="https://github.com/ConSol/sakuli/blob/dev/src/common/src/main/resources/org/sakuli/common/config/sakuli-default.properties" target="_blank">sakuli-default.properties</a> file.</p>
</div>
<div class="paragraph">
<div class="title">Test result transmission to Icinga2</div>
<p>Execute one of the example test case:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Ubuntu</strong>: <code>sakuli run <em>INST_DIR</em>/example_test_suites/example_ubuntu/</code></p>
</li>
<li>
<p><strong>openSUSE</strong>: <code>sakuli run <em>INST_DIR</em>/example_test_suites/example_opensuse/</code></p>
</li>
<li>
<p><strong>Windows 7</strong>: <code>sakuli run <em>INST_DIR</em>\example_test_suites\example_windows7\</code></p>
</li>
<li>
<p><strong>Windows 8</strong>: <code>sakuli run <em>INST_DIR</em>\example_test_suites\example_windows8\</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The service in Icnga2 should change its status to:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/icinga_ok.png" alt="icinga_ok"></span></p>
</div>
</div>
<div class="sect5">
<h6 id="_graph_settings"><a class="anchor" href="#_graph_settings"></a>Graph settings</h6>
<div class="paragraph">
<p>Icinga2 integration is very new; we did not yet dive into the configuration of Graphite or Grafana graphs. The only supported graphing solution is PNP4Nagios. Nevertheless you are welcome to contribute graph templates for Grafana and/or Graphite!</p>
</div>
<div class="sect6">
<h7 id="_pnp4nagios"><a class="anchor" href="#_pnp4nagios"></a>PNP4Nagios</h7>
<div class="paragraph">
<p>Set the RRD storage type of PNP to MULTIPLE, which creates one RRD file per perfdata label:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>echo "RRD_STORAGE_TYPE = MULTIPLE" &gt; /etc/pnp4nagios/check_commands/check_sakuli.cfg</code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy the PNP graph template <code>check_sakuli.php</code> from <code>%SAKULI_HOME%/setup/nagios/</code> on the client to <code>/usr/share/nagios/html/pnp4nagios/templates/</code> on the Icinga2 server.</p>
</div>
</div>
<div class="sect6">
<h7 id="_grafana"><a class="anchor" href="#_grafana"></a>Grafana</h7>
<div class="paragraph">
<p>tbd</p>
</div>
</div>
<div class="sect6">
<h7 id="_graphite"><a class="anchor" href="#_graphite"></a>Graphite</h7>
<div class="paragraph">
<p>tbd</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="check_mk"><a class="anchor" href="#check_mk"></a>1.5.5.5. Check_MK</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/checkmk.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/checkmk.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>This page describes how to setup a Sakuli client to send results to a Check_MK monitoring system.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/sakuli-checkmk.png" alt="sakuli-checkmk"></span></p>
</div>
<div class="sect5">
<h6 id="_sakuli_client_configuration_3"><a class="anchor" href="#_sakuli_client_configuration_3"></a>Sakuli Client Configuration</h6>
<div class="paragraph">
<p>It is assumed that the client is already monitored by Check_MK and a agent is installed and running on it.</p>
</div>
<div class="sect6">
<h7 id="_spool_folder"><a class="anchor" href="#_spool_folder"></a>Spool folder</h7>
<div class="paragraph">
<p>Create a new folder <code>spool</code> in the installation path of the Check_MK agent. This is the folder where the results will be written to. The user which is used to run Sakuli checks must be given <strong>write access</strong> to this folder.</p>
</div>
</div>
<div class="sect6">
<h7 id="_forwarder_configuration"><a class="anchor" href="#_forwarder_configuration"></a>Forwarder configuration</h7>
<div class="paragraph">
<p>Now set the properties for the check_mk receiver. For this, edit <code>sakuli.properties</code> in the folder containing the test suites (you can copy the lines from <code><em>SAKULI_HOME</em>/conf/sakuli-default.properties</code>):</p>
</div>
<div class="paragraph">
<p><code><em>INST_DIR</em>/example_test_suites/sakuli.properties</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sakuli.forwarder.check_mk.enabled=true</code></p>
</li>
<li>
<p><code>sakuli.forwarder.check_mk.spooldir=C:\\Program Files (x86)\\check_mk\\spool</code> - Path to the spool folder as defined above. On Windows, the backslashes have to be escaped with <code>\</code>. Check_MK is expecting the result files from Sakuli here. Default value: <code>/var/lib/check_mk_agent/spool</code> (Linux) / <code>(installation_path)\\spool</code> (Windows).</p>
</li>
<li>
<p><code>sakuli.forwarder.check_mk.freshness</code> - Defines the maximal age in seconds in which the result is still valid. If the last modification of the result file is older than this property, the result file will be ignored. The check_mk service will turn into UNKNOWN. Default value: <code>600</code>.</p>
</li>
<li>
<p><code>sakuli.forwarder.check_mk.spoolfile_prefix</code> - Defines the result file prefix. It can be used to change the default naming convention for the Check_MK output files. Default value: <code>sakuli_suite_</code>.</p>
</li>
<li>
<p><code>sakuli.forwarder.check_mk.service_description</code> - Defines the service description, which is used within the check result. Default value: <code>${testsuite.id}</code>. If you want to use a PNP graph template, the service name must begin with <code>sakuli_</code>. Only then the generic PNP template of check_mk for local (=passive) checks will be able to determine <code>sakuli.php</code> as a valid template for this check result. For more information see <a href="https://mathias-kettner.de/checkmk_localchecks.html#PNP%20Templates%20for%20local%20checks">here</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An example configuration could look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sakuli.forwarder.check_mk.enabled=true
sakuli.forwarder.check_mk.spooldir=/var/lib/check_mk_agent/spool
sakuli.forwarder.check_mk.freshness=600
sakuli.forwarder.check_mk.spoolfile_prefix=sakuli_suite_
sakuli.forwarder.check_mk.service_description=My_Custom_Service</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_output_format_template_2"><a class="anchor" href="#_output_format_template_2"></a>Output format template</h7>
<div class="paragraph">
<p>With the implementation of the Check_MK forwarder a new <a href="http://jtwig.org/">Jtwig</a> templating mechanism has been introduced in Sakuli, which decouples the output format from the Sakuli binary. This which allows format adaptions to fulfill your needs at any time without installing a new version of Sakuli.</p>
</div>
<div class="paragraph">
<p>In near time, all other forwarder modules of Sakuli will support the templating feature too.</p>
</div>
<div class="paragraph">
<p>Sakuli comes with default templates, which are placed in <code>$INSTALL_DIR/config/templates</code>. The <a href="https://github.com/ConSol/sakuli/blob/dev/src/common/src/main/resources/org/sakuli/common/config/templates/check_mk" target="_blank">default Check_MK templates</a> can be found in a subdirectory <code>check_mk</code>.</p>
</div>
<div class="paragraph">
<p>For further information how the default template directory can be changed or how the forwarder templates can be customized please refer to <a href="#forwarder-templates">[forwarder-templates]</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="screenshot_history"><a class="anchor" href="#screenshot_history"></a>1.5.5.6. Screenshot history</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/screenshot_history.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/screenshot_history.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>INFO: This section applies to <a href="http://http://labs.consol.de/OMD/">OMD-Labs</a> and the web interface <a href="https://www.thruk.org/">Thruk</a>. To use the screenshot history functionality on other platforms/web interfaces, the steps may vary.</p>
</div>
<div class="sect5">
<h6 id="_feature_description"><a class="anchor" href="#_feature_description"></a>Feature description</h6>
<div class="paragraph">
<p>In case of an exception, Sakuli takes a screenshot of the current screen and embeds this image into the <strong>service output</strong> (base64 encoded). The user is able to view the screenshot on the monitoring user interface.</p>
</div>
<div class="paragraph">
<p>The drawback of this method is that the screenshot only resists in the monitoring core&#8217;s memory; as soon as the test recovers, the test output changes back to OK and the image is gone. There are the Nagios/Naemon event logs to inspect former exceptions, but they do not contain the screenshots (fortunately).</p>
</div>
<div class="paragraph">
<p>With the <strong>Screenshot history</strong> feature, the monitoring core (Nagios/Naemon/Icinga) fires a event handler script each time the check has a CRITICAL result. The script analyzes the service output, parses the image data and stores it on the local file system within a folder structure published by the OMD site apache process. Sakuli services contain a <a href="https://www.thruk.org/documentation/action-menu.html">Thruk action menu</a> which allow the user to see all saved screenshots.</p>
</div>
</div>
<div class="sect5">
<h6 id="_activating_the_feature"><a class="anchor" href="#_activating_the_feature"></a>Activating the feature</h6>
<div class="paragraph">
<p>Use the Makefile located in <code>$OMD_ROOT/share/sakuli/omd/</code> to enable the feature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[demo]:~/share/sakuli/setup/omd$ make screenshot_history</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="screenshot_history_eh"><a class="anchor" href="#screenshot_history_eh"></a>Event handler template</h6>
<div class="paragraph">
<p>Use the service template <code>tpl_s_sakuli_screenshot_history</code> in all Sakuli services to enable the eventhandler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>define service {
  service_description            example_xfce
  host_name                      sakuli_client
  use                            tpl_s_sakuli_gearman_grafana, tpl_s_sakuli_screenshot_history
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each time a CRITICAL Sakuli result comes in, the eventhandler will log its actions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[demo]:$ tail -f var/log/sakuli_screenshot_eventhandler.log
...
[6893] 06/08/17 03:28:27 ---------------------------------------
[6893] 06/08/17 03:28:27 HOST/SERVICE: sakuli_client / example_xfce
[6893] 06/08/17 03:28:27 STATE: CRITICAL
[6893] 06/08/17 03:28:27 LASTSERVICECHECK: 1496892468
[6893] 06/08/17 03:28:27 PLUGIN_OUT: [CRIT] Sakuli suite "example_xfce" (23.11s) EXCEPTION: 'CASE "case1": STEP "Test_Sahi_landing_page": _highlight(_link("XSSL Manager")): TypeError: el is undefined Sahi.prototype._highlight@http://sahi ...\
[6893] 06/08/17 03:28:27 Found screenshot format: jpg
[6893] 06/08/17 03:28:27 IMG_DIR: /omd/sites/demo/var/sakuli/screenshots/sakuli_client/example_xfce/1496892468
[6893] 06/08/17 03:28:27 Moving /omd/sites/demo/tmp/sakuli/screenshot_1496892468.jpg to /omd/sites/demo/var/sakuli/screenshots/sakuli_client/example_xfce/1496892468/screenshot.jpg
[6893] 06/08/17 03:28:27 Writing image path to InfluxDB...
[6893] 06/08/17 03:28:27 InfluxDB responded: &lt; HTTP/1.1 404 Not Found
[6955] 06/08/17 03:29:18 ---------------------------------------</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_thruk_action_menu"><a class="anchor" href="#_thruk_action_menu"></a>Thruk action_menu</h6>
<div class="paragraph">
<p>Open <code>$OMD_ROOT/etc/thruk/thruk_local.d/sakuli_action_menu.conf</code> and adapt the section <code>&lt;action_menu_apply&gt;</code>. The following example applies the action_menu only on services whose host names begin with "sakuli". See the <a href="https://www.thruk.org/documentation/configuration.html#action-menu-settings">Thruk documentation for more examples</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Apply the action_menu on all services of hosts starting with "sakuli"
&lt;action_menu_apply&gt;
     sakuli_history_menu = ^sakuli.*;.+$
&lt;/action_menu_apply&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>After reloading the web server you should see a small dropdown arrow on each Sakuli service, giving you access to the screenshot history lightbox:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/screenshot_hist_action_menu.png" alt="screenshot_hist_action_menu"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/screenshot_hist_lightbox.png" alt="screenshot_hist_lightbox" width="500"></span></p>
</div>
<div class="paragraph">
<p>The lightbox always shows the last/current screenshot and the error message. To navigate forth/back, use the left/right arrow keys or the buttons in the bottom right corner. Press Esc to close the box again.</p>
</div>
</div>
<div class="sect5">
<h6 id="_grafana_integration"><a class="anchor" href="#_grafana_integration"></a>Grafana integration</h6>
<div class="paragraph">
<p>Read the <a href="#screenshot_annotations">Grafana screenshot annotations</a> section if you want to integrate the screnshots as Grafana annotations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For PNP4Nagios there is no such feature available.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="grafana_graphs"><a class="anchor" href="#grafana_graphs"></a>1.5.5.7. Grafana graphs</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/graph_grafana.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/graph_grafana.adoc" target="_blank">edit</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section is written for OMD-Labs environments with InfluxDB/Grafana enabled. It may be useful for others too, but the steps may vary then.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/grafana.png" alt="grafana" width="1000"></span></p>
</div>
<div class="sect5">
<h6 id="_feature_activation"><a class="anchor" href="#_feature_activation"></a>Feature activation</h6>
<div class="paragraph">
<p>Check the <a href="https://labs.consol.de/de/nagios/omd/2015/10/21/activate-nagflux.html">OMD Labs documentation</a> for infos on how to enable Grafana/InfluxDB.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
OMD-Labs already contains a graph template <code>check_sakuli</code> for <a href="https://github.com/Griesbacher/histou/">Histou</a>, the Grafana templating system.
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="screenshot_annotations"><a class="anchor" href="#screenshot_annotations"></a>Screenshot annotations</h6>
<div class="paragraph">
<p>Grafana graphs can also show screenshots of the <a href="#screenshot_history">Screenshot history</a> as <a href="http://docs.grafana.org/reference/annotations/">anotations</a>.</p>
</div>
<div class="paragraph">
<p>Execute the Sakuli Makefile to patch the influxDB init script. It will restart InfluxDB and create the Sakuli image database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[demo]:~/share/sakuli/setup/omd$ make grafana</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of an exception, the <a href="#screenshot_history_eh">screenshot history event_handler</a> saves the image on the file system <strong>and</strong> its path into the InfluxDB database "sakuli" (measurement: <strong>images</strong>).</p>
</div>
<div class="paragraph">
<p>Violet vertical lines in the Sakuli graph indicate a saved screenshot. Hover the mouse over the bottom of the line to show the thumbnail:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/grafana_screenshot.png" alt="grafana_screenshot"></span></p>
</div>
<div class="paragraph">
<p>Click the thumbnail to get the image enlarged.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_pnp4nagios_graphs"><a class="anchor" href="#_pnp4nagios_graphs"></a>1.5.5.8. PNP4Nagios graphs</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/monitoring/graph_pnp4nagios.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/monitoring/graph_pnp4nagios.adoc" target="_blank">edit</a></p>
</div>
<div class="sect5">
<h6 id="_rrd_storage_type"><a class="anchor" href="#_rrd_storage_type"></a>RRD Storage Type</h6>
<div class="paragraph">
<p>In PNP4Nagios RRD Storage type "MULTIPLE" is of great importance for Sakuli checks, because the number of steps can change by time (=if you are adding/deleting some).</p>
</div>
<div class="paragraph">
<p>Verify <code>RRD_STORAGE_TYPE</code> in <code>process_perfdata.cfg</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[sakuli]:~$ vim ~/etc/pnp4nagios/process_perfdata.cfg
  RRD_STORAGE_TYPE = MULTIPLE</code></pre>
</div>
</div>
<div class="paragraph">
<p>If this value is <em>"SINGLE"</em> on your system and you do not want to change it globally, use the <em>custom check_command</em> cfg file. PNP4Nagios will then use storage type <em>"MULTIPLE"</em> only for this check_command then:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[sakuli]:~$ cp __TEMP__/sakuli-vx.x.x-SNAPSHOT/setup/nagios/check_sakuli.cfg ~/etc/pnp4nagios/check_commands/</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="pnp4nagios-rrd-heartbeat"><a class="anchor" href="#pnp4nagios-rrd-heartbeat"></a>RRD heartbeat</h6>
<div class="paragraph">
<p>Each RRD file contains a heartbeat value, which determines how much time must pass without any new update, before RRDtool writes an UNKNOWN value (nan) into the data slot (the graph will have a gap then). In PNP4nagios heartbeat is defined at approx. 2 1/2 hours. If your Sakuli check runs only every 2 hours, this value will be fine. But for a 5 minute interval, this is way too long. As a consequence, the graph line will be continuously drawed even Sakuli did no check for two hours. Hence, always make sure to adapt the heartbeat to a value which is slightly higher than the interval of Sakuli checks (and indeally the same as <a href="#omd-gearman-freshness_threshold">[omd-gearman-freshness_threshold]</a>, if you use the gearman receiver):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[sakuli]:~$ cd ~/var/pnp4nagios/perfdata/sakulihost/
# Sakuli check interval: 2 minutes --&gt; RRD heartbeat 3 minutes
OMD[sakuli]:~$ for file in sakuli_e2e_webshop*.rrd; do rrdtool tune $file --heartbeat 1:180; done</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_install_pnp_graph_template"><a class="anchor" href="#_install_pnp_graph_template"></a>install PNP graph template</h6>
<div class="paragraph">
<p>Copy the PNP4nagios graph template into the templates folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>OMD[sakuli]:~$ cp __TEMP__/sakuli-vx.x.x-SNAPSHOT/setup/nagios/check_sakuli.php ~/etc/pnp4nagios/templates/</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_cpu_memory_metrics"><a class="anchor" href="#_cpu_memory_metrics"></a>CPU/Memory metrics</h6>
<div class="paragraph">
<p>If Sakuli reports a long check runtime, it is good to know the CPU/Memory metrics on the Sakuli client machine, because CPU/IO bottlenecks affect Sakuli tests, too.</p>
</div>
<div class="paragraph">
<p>The following optional enhancement displays the <strong>CPU/Memory graph</strong> lines of the Sakuli test client in the suite/case graph. By setting <strong>custom host macros</strong>, the graph template knows where to fetch these data from.</p>
</div>
<div class="paragraph">
<div class="title">Linux client with CPU check, displayed by a yellow line</div>
<p><span class="image"><img src="images/pnp_graph.png" alt="PNP graph"></span></p>
</div>
<div class="paragraph">
<div class="title">add CPU load check (for Linux Sakuli clients)</div>
<p>Add this <strong>command</strong> to <code>commands.cfg</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>define command{
    command_name    check_local_load
    command_line    $USER1$/check_load -w $ARG1$ -c $ARG2$
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add this <strong>service</strong> to <code>services.cfg</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>define service {
  service_description            CPU_Load
  host_name                 sakuli_client
  use                            generic-service,srv-pnp
  # if Sakuli checks are running on the same machine (as in the demo VM)
  check_command                  check_local_load!2.5,1.5,1!5,3.5,2
  # if Sakuli checks are running on another host than OMD
  check_command                  check_by_ssh!check_load!2.5,1.5,1!5,3.5,2
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add this <strong>custom host macros</strong> to every Sakuli host in <code>hosts.cfg</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>define host {
    …
    _E2E_CPU_HOST                  sakuli_client
    _E2E_CPU_SVC                   CPU_Load_load5
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now reload OMD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>omd reload</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see now the following service on <code>sakuli_client</code>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/svc_cpu.png" alt="PNP graph"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The value of <code>_E2E_CPU_SVC</code> and <code>_E2E_MEM_SVC</code> refer to the file name of the corresponding RRD file. <code>CPU_Usage_5</code> for example means to get the the CPU usage data from <code>$OMD_ROOT/var/pnp4nagios/perfdata/[_E2E_CPU_HOST]/CPU_Usage_5.rrd</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">add CPU/Memory usage check (for Windows Sakuli clients)</div>
<p>Install <strong>NSClient++</strong> on the Windows client. Then add this <strong>command check_nrpe_arg:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    vim ~/etc/nagios/conf.d/commands.cfg

    define command {
      command_name                   check_nrpe_arg
      command_line                   $USER1$/check_nrpe -H $HOSTADDRESS$ -c $ARG1$ -a $ARG2$
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then add these <strong>services</strong> to Nagios:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    define service {
      service_description          CPU_Usage
      host_name                    win7sakuli
      use                          generic-service,srv-pnp
      check_command                check_nrpe_arg!CheckCPU!warn=80% crit=90% time=15 time=5 time=1 ShowAll
    }

    define service {
      service_description          Mem_Usage
      host_name                    win7sakuli
      use                          generic-service,srv-pnp
      check_command                check_nrpe_arg!CheckMem!MaxWarn=80% MaxCrit=90% ShowAll type=page type=paged type=physical type=virtual
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add these host macros to every Nagios host where Sakuli checks are defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    _E2E_CPU_HOST                  win7sakuli
    _E2E_CPU_SVC                   CPU_Usage_5
    _E2E_MEM_HOST                  win7sakuli
    _E2E_MEM_SVC                   Mem_Usage</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now reload OMD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>omd reload</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The value of <code>_E2E_CPU_SVC</code> and <code>_E2E_MEM_SVC</code> refer to the file name of the corresponding RRD file. <code>CPU_Usage_5</code> for example means to get the the CPU usage data from <code>$OMD_ROOT/var/pnp4nagios/perfdata/[_E2E_CPU_HOST]/CPU_Usage_5.rrd</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">XML update delay</div>
<p>As soon as the created services produce perfdata for the first time, their XML file created by PNP4Nagios will also contain the host macros created in the step before. If not, check if <code>XML_UPDATE_DELAY</code> in <code>etc/pnp4nagios/process_perfdata.cfg</code> is set too high.</p>
</div>
<div class="paragraph">
<div class="title">Change PNP working mode</div>
<p>OMD runs PNP by default in <strong><a href="http://docs.pnp4nagios.org/pnp-0.6/modes#bulk_mode_with_npcdmod">Bulk Mode with NPCD and npcdmod.o</a></strong>. In this mode the Nagios broker module <code>npcdmod.o</code> reads the performance directly from the monitoring core and writes them in <em>var/spool/perfdata</em>. This data are not expandable with <strong>custom macros</strong> - therefore the mode has to be changed to <strong><a href="http://docs.pnp4nagios.org/pnp-0.6/modes#bulk_mode_with_npcd">Bulk Mode with NPCD</a></strong>. (the performance of both modes will be equal).</p>
</div>
<div class="paragraph">
<p>In this mode the monitoring core itself writes perfdata to the spool directory (instead of <em>npcdmod.o</em>). The format of this data can be freely defined by adapting <code>service_perfdata_file_template</code>. In the following code block you can see that the four <strong>custom host macros</strong> were added to this template string. Perfdata files are then moved to <em>var/spool/perfdata</em> every 15 seconds by the monitoring core.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure to replace the OMD site name placeholder <code><em>OMD_SITE</em></code> with your site name! (in <em>vim</em> type <code>:%s/<em>OMD_SITE</em>/yoursitename/g</code>)
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>vim ~/etc/nagios/nagios.d/pnp4nagios.cfg

process_performance_data=1

# COMMENT THE LINE BELOW
# broker_module=/omd/sites/__OMD_SITE__/lib/npcdmod.o config_file=/omd/sites/__OMD_SITE__/etc/pnp4nagios/npcd.cfg

# services
service_perfdata_file=/omd/sites/__OMD_SITE__/var/pnp4nagios/service-perfdata
service_perfdata_file_template=DATATYPE::SERVICEPERFDATA\tTIMET::$TIMET$\tHOSTNAME::$HOSTNAME$\tSERVICEDESC::$SERVICEDESC$\tSERVICEPERFDATA::$SERVICEPERFDATA$\tSERVICECHECKCOMMAND::$SERVICECHECKCOMMAND$\tHOSTSTATE::$HOSTSTATE$\tHOSTSTATETYPE::$HOSTSTATETYPE$\tSERVICESTATE::$SERVICESTATE$\tSERVICESTATETYPE::$SERVICESTATETYPE$\tE2ECPUHOST::$_HOSTE2E_CPU_HOST$\tE2ECPUSVC::$_HOSTE2E_CPU_SVC$\tE2EMEMHOST::$_HOSTE2E_MEM_HOST$\tE2EMEMSVC::$_HOSTE2E_MEM_SVC$
service_perfdata_file_mode=a
service_perfdata_file_processing_interval=15
service_perfdata_file_processing_command=omd-process-service-perfdata-file

# hosts
host_perfdata_file=/omd/sites/__OMD_SITE__/var/pnp4nagios/host-perfdata
host_perfdata_file_template=DATATYPE::HOSTPERFDATA\tTIMET::$TIMET$\tHOSTNAME::$HOSTNAME$\tHOSTPERFDATA::$HOSTPERFDATA$\tHOSTCHECKCOMMAND::$HOSTCHECKCOMMAND$\tHOSTSTATE::$HOSTSTATE$\tHOSTSTATETYPE::$HOSTSTATETYPE$
host_perfdata_file_mode=a
host_perfdata_file_processing_interval=15
host_perfdata_file_processing_command=omd-process-host-perfdata-file</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check if the perfdata processing commands are present:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>vim ~/etc/nagios/conf.d/pnp4nagios.cfg

define command{
    command_name    omd-process-service-perfdata-file
    command_line    /bin/mv /omd/sites/__OMD_SITE__/var/pnp4nagios/service-perfdata /omd/sites/__OMD_SITE__/var/pnp4nagios/spool/service-perfdata.$TIMET$
}

define command{
    command_name    omd-process-host-perfdata-file
    command_line    /bin/mv /omd/sites/__OMD_SITE__/var/pnp4nagios/host-perfdata /omd/sites/__OMD_SITE__/var/pnp4nagios/spool/host-perfdata.$TIMET$
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Restart the OMD site to unload the <em>npcdmod.o</em> module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>omd restart</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Test</div>
<p>First reschedule the CPU/Mem check on the sakuli client. It can take several minutes to store the values in the RRD database. As soon as you can see "real" values in the PNP4Nagios graph of "CPU Load" (instead of &#8220;-nan&#8221;), restart the Sakuli check.
The Sakui graph should now contain also CPU/Memory values.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="continuous_integration"><a class="anchor" href="#continuous_integration"></a>1.5.6. Continuous Integration</h4>
<div class="sect4">
<h5 id="jenkins-integration"><a class="anchor" href="#jenkins-integration"></a>1.5.6.1. Jenkins</h5>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/integration/ci/jenkins.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/integration/ci/jenkins.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Sakuli can also be integrated in <strong>continuous integration</strong> environments like <strong>Jenkins</strong>. Documentation is coming in the next time (…have one?)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_developer_documentation"><a class="anchor" href="#_developer_documentation"></a>1.6. Developer Documentation</h3>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/development/README.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/development/README.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>In this section you will find a few helpful documentation for developers who want to contribute.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Basic: <a href="#dev-installation">Installation guide for Sakuli-Developers</a></p>
</li>
<li>
<p>Jenkins-CI <a href="http://labs-build.consol.de/view/Sakuli/">labs-build.consol.de/view/Sakuli</a></p>
</li>
<li>
<p><a href="https://waffle.io/ConSol/sakuli?source=ConSol%2Fdocker-headless-vnc-container,ConSol%2Fsakuli,ConSol%2Fsakuli-examples,ConSol%2Fsakuli-go-wrapper">Waffel GitHub Issue Board</a></p>
</li>
<li>
<p><a href="#dev-new-release">How to create a new release</a></p>
</li>
<li>
<p>Some additional <a href="#dev-maven-aspects">Maven aspects</a></p>
</li>
<li>
<p><a href="#dev-ascii-doc">AsciiDoc documentation aspects</a></p>
</li>
<li>
<p>(only for Linux) <a href="#dev-sikuli-supplemental-pack">sikulix-supplemental package</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="dev-installation"><a class="anchor" href="#dev-installation"></a>1.6.1. Installation guide for Sakuli-Developers</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/development/how-to-release.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/development/how-to-release.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<div class="title">Requirements</div>
<p>For the following guide you need</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Access to the issue-tracker tool (currently GitHub-Issues and internal GitLab)</p>
</li>
<li>
<p>Git</p>
</li>
<li>
<p>Development environment (we advise IntelliJ IDEA)</p>
</li>
<li>
<p>Maven 3 (check version <code>mvn -version</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<strong>For Ubuntu users!!!</strong> - check the maven version with <code>apt show maven</code>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Java JDK 1.8</p>
</li>
<li>
<p>Please use the original Oracle JDK - OpenJDK unfortunately won&#8217;t work for the JavaFX based integration test, until <a href="https://github.com/ConSol/sakuli/issues/245">#245</a> is not closed. Also see <a href="#dev-java-fx">Install JavaFX</a></p>
</li>
<li>
<p>Ensure that your <code>JAVA_HOME</code> system variable links to the correct jdk-version</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Sakuli Setup</div>
<p><strong>Import</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check out the project via git</p>
</li>
<li>
<p>Import the project as a maven-project</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Maven Settings</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that you have at least installed maven 3, run <code>mvn -version</code></p>
</li>
<li>
<p>Config the local maven settings <code>~/.m2/settings.xml</code> for your environment as follows:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;settings</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/SETTINGS/1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/SETTINGS/1.0.0</span>
                      <span class="content">http://maven.apache.org/xsd/settings-1.0.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

<span class="tag">&lt;server&gt;</span>
 <span class="tag">&lt;id&gt;</span>labs-consol-sakuli-install<span class="tag">&lt;/id&gt;</span>
 <span class="tag">&lt;username&gt;</span>sakuli<span class="tag">&lt;/username&gt;</span>
 <span class="tag">&lt;privateKey&gt;</span>${user.home}/.ssh/your-key-file<span class="tag">&lt;/privateKey&gt;</span>
 <span class="tag">&lt;/server&gt;</span>

<span class="tag">&lt;server&gt;</span>
 <span class="tag">&lt;id&gt;</span>labs-consol-sakuli-repository<span class="tag">&lt;/id&gt;</span>
 <span class="tag">&lt;username&gt;</span>maven-repository<span class="tag">&lt;/username&gt;</span>
 <span class="tag">&lt;privateKey&gt;</span>${user.home}/.ssh/your-key-file<span class="tag">&lt;/privateKey&gt;</span>
 <span class="tag">&lt;/server&gt;</span>

<span class="tag">&lt;/settings&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Install Sahi</div>
<ul>
<li>
<p>Download Sahi5 from <a href="https://labs.consol.de/sakuli/install/3rd-party">https://labs.consol.de/sakuli/install/3rd-party</a> and execute the sahi installation:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>java -jar install_sahi_v50_20141105.jar.jar</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Install Sahi into <code>&lt;project-dir&gt;/sahi</code>. Ensure that this path is set in <code>sahi.proxy.homePath</code> in file <code>sakuli.properties</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You only need to install the components: Sahi Core, Tools Userdata
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Database Setup (optional, only needed for <a href="#sql-database">SQL Database</a> integration)</div>
<p>Setup a local MySQL database to save the results of test case executions. The database won&#8217;t be needed for running <code>mvn install</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>User:</strong> <code>sakuli</code></p>
</li>
<li>
<p><strong>Password:</strong> <code>sakuli</code></p>
</li>
<li>
<p><strong>Database:</strong> <code>sakuli</code></p>
</li>
<li>
<p><strong>SQL-Script:</strong> <a href="https://github.com/ConSol/sakuli/blob/dev/src/common/src/main/resources/org/sakuli/common/setup/database/create_sakuli_database.sql" target="_blank">create_sakuli_database.sql</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to use a Docker-Container, you can build and run it with the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">cd src/common/src/main/resources/org/sakuli/common/setup/database/create_sakuli_database
docker build -t=your-user/mysql-sakuli .
docker run --name mysql-sakuli -p 3306:3306 your-user/mysql-sakuli</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">IDE configuration</div>
<ul>
<li>
<p>Execute <code>mvn clean verify</code> to ensure that the setup is correct</p>
</li>
<li>
<p>Include the license header to your IDE</p>
</li>
<li>
<p>For IntelliJ see <a href="http://www.jetbrains.com/idea/webhelp/generating-and-updating-copyright-notice.html">Help</a> or our predefined copyright configuration:</p>
<div class="ulist">
<ul>
<li>
<p><a href="intellij/copyright/profiles_settings.xml" class="bare">intellij/copyright/profiles_settings.xml</a></p>
</li>
<li>
<p><a href="intellij/copyright/sakuli_copyright" class="bare">intellij/copyright/sakuli_copyright</a></p>
</li>
<li>
<p>License Header</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Sakuli - Testing and Monitoring-Tool for Websites and common UIs.

Copyright 2013 - $today.year the original author or authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In order to run Sakuli test cases directly from the IDE, you need to build up a run configuration. For IntelliJ see the predefined run configurations under
<a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/development/intellij/runConfigurations" target="_blank">intellij/runConfigurations</a></p>
</li>
<li>
<p><strong>classpath of module:</strong> <code>sakuli-core</code></p>
</li>
<li>
<p><strong>working directory:</strong> <code>$MODULE_DIR$</code></p>
</li>
<li>
<p><strong>main class:</strong> <code>org.sakuli.starter.SakuliStarter</code></p>
</li>
<li>
<p><strong>program arguments:</strong>
[[source]</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>-run &lt;path to your Sakuli test suite folder&gt; --sakuli_home &lt;path to your "main" folder&gt; --sahi_home &lt;path to your sahi folder&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>e.g. for the provided Win7 example use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>-run ../sakuli_test_suites/example src/main/_include ../sahi</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To run the testng tests correctly and prevent wrong file paths, set the default TestNG config like follow: <span class="image"><img src="images/intellij_testng_run_config.png" alt="intellij testng config"></span></p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<strong>Startup error</strong>: If you run your Sakuli test the first time, you might get a native library error, caused by Sikuli, saying that it could not find the correct native library to work with. At the same time, Sikuli already tried to fix the problem by modyfing PATH. <strong>Solution</strong>: Just log out and in again, so that the modified PATH-Variable will be read. Sakuli should start now without any error.
</td>
</tr>
</table>
</div>
<div id="dev-java-fx" class="olist arabic">
<div class="title">Install JavaFX</div>
<ol class="arabic">
<li>
<p>Ensure that you have installed the latest JDK-8 version with included JavaFX</p>
</li>
<li>
<p>Ensure that the system variable <code>java.home</code> points to your JDK directory and includes the file <code>${java.home}/lib/ext/jfxrt.jar</code></p>
</li>
<li>
<p><em>(optional)</em> Download the JavaFX SceneBuilder for development from <a href="http://www.oracle.com/technetwork/java/javase/downloads/javafxscenebuilder-download-2157683.html">Oracle</a></p>
</li>
<li>
<p><em>(optional)</em> Install the SceneBuilder to your IDE:</p>
<div class="ulist">
<ul>
<li>
<p>Intellij see <a href="http://docs.oracle.com/javafx/scenebuilder/1/use_java_ides/sb-with-intellij.htm">Oracle-Help-Page</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="dev-maven-aspects"><a class="anchor" href="#dev-maven-aspects"></a>1.6.2. Maven aspects</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/development/maven-aspects.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/development/maven-aspects.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>Following default lifecycle actions are currently used:</p>
</div>
<div class="olist arabic">
<div class="title">Complete build process <code>mvn clean deploy</code></div>
<ol class="arabic">
<li>
<p>Compiles the sources with the <code>aspectj-maven-plugin</code> to weave the source code and the dependencies</p>
</li>
<li>
<p>Executes all unit tests</p>
</li>
<li>
<p>Executes all <strong>integration tests</strong> (without UI-Tests)</p>
</li>
<li>
<p>Adds the built maven artifacts to the local workspace</p>
</li>
<li>
<p>Builds the <code>sakuli-vX.X.X.zip`and `sakuli-vX.X.X-installer.jar</code> file locally</p>
</li>
<li>
<p>Deploys the maven artifacts to the local repository</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Run unit tests <code>mvn test</code></div>
<p>Runs all steps until step <strong>2.</strong></p>
</div>
<div class="paragraph">
<div class="title">Run integration tests <code>mvn verify</code></div>
<p>Runs all steps until step <strong>3</strong></p>
</div>
<div class="paragraph">
<div class="title">Install locally <code>mvn install</code></div>
<p>Runs all steps until step <strong>6</strong></p>
</div>
<div id="feature-branches" class="paragraph">
<div class="title">Working with feature branches:</div>
<p>For handling releases and feature branches, Sakuli uses the <a href="https://github.com/aleksandr-m/gitflow-maven-plugin">gitflow-maven-plugin</a>. For more information take a look at there <a href="https://github.com/aleksandr-m/gitflow-maven-plugin/blob/master/README.md">README</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start a new feature: <code>mvn gitflow:feature-start</code></p>
</li>
<li>
<p>Use as feature name the pattern <code>&lt;github-issue-no&gt;-&lt;feature-description&gt;</code></p>
</li>
<li>
<p>Commit your work and do <code>git push</code>. Changes will be available at the remote feature branch <code>feature/&lt;github-issue-no&gt;-&lt;feature-description&gt;</code></p>
</li>
<li>
<p>The build <a href="http://labs-build.consol.de/view/Sakuli/job/Sakuli_CI_feature_branch">Sakuli_CI_feature_branch</a> will automatic triggered and a new version will deployed with version <code>v1.X.X-&lt;github-issue-no&gt;-&lt;feature-description&gt;-SNAPSHOT</code>. This feature version is available as <a href="#download">Download</a> and as <a href="#docker-images">Sakuli Docker Images</a></p>
</li>
<li>
<p>To finish the developed feature execute: <code>mvn gitflow:feature-finish</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Build a new release</div>
<p>See the instruction: <a href="#dev-new-release">How to create a new release</a></p>
</div>
<div class="paragraph">
<div class="title">Special maven profiles</div>
<p>Profiles can be added with option <code>-P</code>, followed by a parameter, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>mvn install -P upload-release</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>upload-release</code> Copies the generated <code>sakuli-zipped-release-vX.X.X.zip</code>, <code>sakuli-vX.X.X-installer.jar</code> file and maven artifacts to the <a href="http://labs.consol.de/sakuli/">ConSol Labs</a> server. Your private key for the ssh connection have to be configured in maven config file <code>.m2/settings.xml</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example of Maven config file <code>.m2/settings.xml</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;servers&gt;</span>
        <span class="tag">&lt;server&gt;</span>
            <span class="tag">&lt;id&gt;</span>labs-consol-sakuli-install<span class="tag">&lt;/id&gt;</span>
            <span class="tag">&lt;username&gt;</span>sakuli<span class="tag">&lt;/username&gt;</span>
            <span class="tag">&lt;privateKey&gt;</span>${user.home}/.ssh/id_rsa<span class="tag">&lt;/privateKey&gt;</span>
        <span class="tag">&lt;/server&gt;</span>

        <span class="tag">&lt;server&gt;</span>
            <span class="tag">&lt;id&gt;</span>labs-consol-sakuli-repository<span class="tag">&lt;/id&gt;</span>
            <span class="tag">&lt;username&gt;</span>maven-repository<span class="tag">&lt;/username&gt;</span>
            <span class="tag">&lt;privateKey&gt;</span>${user.home}/.ssh/id_rsa<span class="tag">&lt;/privateKey&gt;</span>
        <span class="tag">&lt;/server&gt;</span>
    <span class="tag">&lt;/servers&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ui-tests</code> Enables the UI based test in phase <strong>integration-test</strong> in the modul <code>integration-test</code> and <code>java-dsl</code>.</p>
</li>
<li>
<p><code>generate-manual</code> This profile will generate the AsciiDoc documentation in the module <strong>docs-manual</strong>, see <a href="#dev-ascii-doc">AsciiDoc documentation aspects</a>.</p>
</li>
<li>
<p><code>generate-markdown</code> This profile will generate Markdown file in the module <strong>docs</strong> the file <a href="#sakuli-api">Sakuli API</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To use the profile behind a <strong>HTTP/HTTPS</strong> proxy, be aware that the following things are configured:
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>1) include in your <code>$M2_HOME/settings.xml</code> the proxy tag (if needed):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">  <span class="tag">&lt;proxies&gt;</span>
  <span class="tag">&lt;proxy&gt;</span>
      <span class="tag">&lt;id&gt;</span>my-proxy-config<span class="tag">&lt;/id&gt;</span>
      <span class="tag">&lt;active&gt;</span>true<span class="tag">&lt;/active&gt;</span>
      <span class="tag">&lt;protocol&gt;</span>http<span class="tag">&lt;/protocol&gt;</span>
      <span class="tag">&lt;host&gt;</span>proxy.company.com<span class="tag">&lt;/host&gt;</span>
      <span class="tag">&lt;port&gt;</span>8888<span class="tag">&lt;/port&gt;</span>
  <span class="tag">&lt;/proxy&gt;</span>
  <span class="tag">&lt;/proxies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>2) configure your system <strong>HTTP</strong> and <strong>HTTPS</strong> proxy over Environment (for Ubuntu). Set in <code>bash.rc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>  export http_proxy=http://proxy.company.com:8888/
  export https_proxy=http://proxy.company.com:8888/
  export ftp_proxy=http://proxy.company.com:8888/</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cl</code> (internal use)
This profile will be only to build a custom installer for CL.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Add new artifacts to remote repo</div>
<p>for example for the sahi JARs, more information see: <a href="https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html">guide-3rd-party-jars-remote</a>.</p>
</div>
<div class="paragraph">
<p><strong>install to local repo</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>mvn install:install-file -DgroupId=net.sf.sahi -DartifactId=sahi -Dversion=5.1 -Dpackaging=jar -Dfile=sahi-5.1.jar

mvn install:install-file -DgroupId=net.sf.sahi -DartifactId=ant-sahi -Dversion=5.1 -Dpackaging=jar -Dfile=ant-sahi-5.1.jar

mvn install:install-file -DgroupId=net.sf.sahi -DartifactId=sahi-install -Dversion=5.1 -Dpackaging=zip -Dfile=sahi-install-5.1.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>install to remote repo</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>mvn deploy:deploy-file -DgroupId=net.sf.sahi -DartifactId=sahi -Dversion=5.1 -Dpackaging jar -Dfile=sahi-5.1.jar -Drepository=labs-consol-sakuli-repository -Durl=scpexe://labs.consol.de/home/maven-repository/www/htdocs/repository</code></pre>
</div>
</div>
<div class="paragraph">
<p>or copy the local artifacts via SCP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>scp -r ~.m2/repository/net/sf/sahi/sahi/5.1 maven-repository@labs.consol.de:/home/maven-repository/www/htdocs/repository/net/sf/sahi/sahi/5.1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dev-ascii-doc"><a class="anchor" href="#dev-ascii-doc"></a>1.6.3. AsciiDoc documentation aspects</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/development/ascii-doc-aspects.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/development/ascii-doc-aspects.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<div class="title">Generate AsciiDoc documentation</div>
<p>Execute:</p>
</div>
<div class="paragraph">
<p><code>mvn install -f src/docs-manual/pom.xml -P generate-manual</code></p>
</div>
<div class="paragraph">
<p>The <a href="http://asciidoctor.org/docs/asciidoctor-maven-plugin">Asciidoctor-maven-plugin</a> now generates a HTML page and the PDF:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code> $ ls src/docs-manual/target/generated-docs/
 $ ls src/docs-manual/target/generated-docs/pdf</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can open the file <code>src/docs-manual/target/generated-docs/index.html</code> in your favourite browser.</p>
</div>
<div class="paragraph">
<div class="title">Upload to GitHub Pages</div>
<p>If you want to update the Github Page <a href="http://consol.github.io/sakuli">consol.github.io/sakuli</a>, just add the profile <code>upload-manual</code>:</p>
</div>
<div class="paragraph">
<p><code>mvn install -f src/docs-manual/pom.xml -P generate-manual,upload-manual</code></p>
</div>
<div class="paragraph">
<p><strong>OR</strong> use the Jenkins CI job <a href="http://labs-build.consol.de/view/Sakuli/job/Sakuli_CI_update_documentation/">Sakuli_CI_update_documentation</a></p>
</div>
<div class="paragraph">
<div class="title">Live preview in browser</div>
<p>While writing the documentation it is useful to have a live preview. For this you can do the following:</p>
</div>
<div class="paragraph">
<p>Start the <code>auto-refresh</code> goal of the <a href="http://asciidoctor.org/docs/asciidoctor-maven-plugin">Asciidoctor-maven-plugin</a>, which re-creates the html pages as soon as there are changes on the file system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>mvn clean install -f src/docs-manual/pom.xml -P generate-manual-watch</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then use one of the following methods to serve the documentation locally with an ad-hoc webserver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>python -m SimpleHTTPServer <i class="conum" data-value="1"></i><b>(1)</b>
live-server src/docs-manual/target/generated-docs <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Open a small python adhoc web server on <a href="http://127.0.0.1:8000" class="bare">http://127.0.0.1:8000</a> (manual refresh)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Install and open the NPM based <a href="https://github.com/tapio/live-server#installation">"live-server"</a> on <a href="http://127.0.0.1:8080" class="bare">http://127.0.0.1:8080</a>; will refresh the broewser window on every page recreation.</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Sakuli API generation</div>
<p>Currently there is no fully automated way between the documented Sakuli API in <a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api.md">docs/manual/testdefinition/sakuli-api.md</a> and the final <a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/testdefinition/sakuli-api.adoc">docs/manual/testdefinition/sakuli-api.adoc</a> .</p>
</div>
<div class="paragraph">
<p><strong>The following steps have to be executed:</strong></p>
</div>
<div class="paragraph">
<p>1) Generate the <code>sakuli-api.md</code> file
Run the maven markdown generation build:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>mvn install -f src/docs-sakuli-api/pom.xml -P generate-markdown</code></pre>
</div>
</div>
<div class="paragraph">
<p>The markdown file will be generated under: <code>docs/manual/testdefinition/sakuli-api.md</code></p>
</div>
<div class="paragraph">
<p>2) Convert to AsciiDoc</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://plugins.jetbrains.com/plugin/7391-asciidoc">IntelliJ AsciiDoc Plugin</a>
<span class="image"><img src="images/asciidoc-intellij-plugin.png" alt="asciidoc intellij plugin"></span></p>
</li>
<li>
<p><a href="http://pandoc.org/MANUAL.html#using-pandoc">Pandoc</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>pandoc -s -S sakuli-api.md -t asciidoc -o sakuli-api.adoc</pre>
</div>
</div>
<div class="paragraph">
<p>3) Copy &amp; paste the changed content to one of matching the files and maybe adjust heading level to <code>.Class.method()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ ls docs/manual/testdefinition/sakuli-api*.adoc
docs/manual/testdefinition/sakuli-api.adoc
docs/manual/testdefinition/sakuli-api-application.adoc
docs/manual/testdefinition/sakuli-api-environment.adoc
docs/manual/testdefinition/sakuli-api-key.adoc
docs/manual/testdefinition/sakuli-api-logger.adoc
docs/manual/testdefinition/sakuli-api-mouse-button.adoc
docs/manual/testdefinition/sakuli-api-region.adoc
docs/manual/testdefinition/sakuli-api-testcase.adoc</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Update changelog</div>
<p><strong>Replace GitHub issues <code>#999</code> numbers with links:</strong></p>
</div>
<div class="paragraph">
<p>Search Regex:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="regex">#(\d+)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="regex">https://github.com/ConSol/sakuli/issues/$1[#$1]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dev-new-release"><a class="anchor" href="#dev-new-release"></a>1.6.4. How to create a new release</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/development/how-to-release.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/development/how-to-release.adoc" target="_blank">edit</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check if all features are merged in dev</p>
</li>
<li>
<p>Check if <code>changelog.adoc</code> is correct</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">(Jenkins CI) Perform a new official release</div>
<ol class="arabic">
<li>
<p>Go to <a href="http://labs-build.consol.de/job/Sakuli_perform_release/">Jenkins - Sakuli_perform_release</a> and execute the job and set the parameters <code>REL_VERSION</code> and <code>DEV_VERSION</code></p>
</li>
<li>
<p>Check if maven artifacts have been deployed at <a href="https://labs.consol.de/maven/repository/org/sakuli/">https://labs.consol.de/maven/repository/org/sakuli/</a></p>
</li>
<li>
<p>Check the new taged version on <a href="https://hub.docker.com/">DockerHub</a> with same <code>REL_VERSION</code> for the following images:
<a href="https://hub.docker.com/search/?isAutomated=0&amp;isOfficial=0&amp;page=1&amp;pullCount=0&amp;q=sakuli&amp;starCount=0">DockerHub - Sakuli</a></p>
</li>
<li>
<p>Test the new docker images as long the <a href="https://github.com/ConSol/sakuli-examples">sakuli-examples</a> are not in the automated build</p>
</li>
<li>
<p>Check te latest documentation is updated at <a href="http://consol.github.io/sakuli/" class="bare">http://consol.github.io/sakuli/</a>.</p>
</li>
<li>
<p>Make a new <a href="https://github.com/ConSol/sakuli/releases">GitHub Release</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Add <code>sakuli-vXXX-installer.jar</code> and <code>sakuli-vXXX.zip</code> from <a href="https://labs.consol.de/sakuli/install/">https://labs.consol.de/sakuli/install/</a> to a new release XXX</p>
</li>
<li>
<p>Copy the latest changelog to the new release page</p>
</li>
<li>
<p>Check and publish new release</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">(local) Process a new release with maven</div>
<p><strong>1. Dry-run (if needed)</strong></p>
</div>
<div class="paragraph">
<p>Generate a new release over <strong>gitflow-maven-plugin</strong> (branch: <code>release/xxx</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    mvn gitflow:release-start</code></pre>
</div>
</div>
<div class="paragraph">
<p>Do a dry-run <em>without</em> deploying and pushing any new files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    mvn clean install -DperformRelease=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Delete all local git changes and branches</p>
</div>
<div class="paragraph">
<p><strong>2. Release</strong></p>
</div>
<div class="paragraph">
<p>Generate a new release (if not done in step 1) over <strong>gitflow-maven-plugin</strong> (branch: <code>release/xxx</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    mvn gitflow:release-start</code></pre>
</div>
</div>
<div class="paragraph">
<p>Execute the following commands, to update the Dockerfiles to the new release version at the branch <code>release/xxx</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    docker/update_sakuli_version.sh --new-version $REL_VERSION
    git commit -am "update Dockerfiles to REL-Version v$REL_VERS"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start the release deploying and pushing any new branches and tags if needed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    mvn gitflow:release-finish</code></pre>
</div>
</div>
<div class="paragraph">
<p>Go to the <code>dev</code> branch and adjust the version of the Dockerfiles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    docker/update_sakuli_version.sh --new-version $DEV_VERS
    git commit -am "update Dockerfiles to DEV-Version v$DEV_VERS"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Push your changes in <code>dev</code> branch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>git push --all</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Troubleshooting</div>
<p><strong>Re-use a tag</strong></p>
</div>
<div class="paragraph">
<p>To re-use an already set tag, remove it from git (local and remote):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># delete the tag locally:
git tag -d sakuli-X.X.X`
# push to remote:
git push --delete origin sakuli-X.X.X`</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>General</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check your maven settings in <code>~/.m2/settings.xml</code>:</p>
</li>
<li>
<p>Ensure that your private key has access rights for user <code>sakuli@labs.consol.de</code></p>
</li>
<li>
<p>Ensure that your private key is added to ssh-agent: <code>ssh-add &lt;path-to-key&gt;</code></p>
</li>
<li>
<p>Check proxy settings - the server <code>labs.consol.de</code> must be reachable</p>
</li>
<li>
<p>Ensure that the ConSol-Labs server is configured correctly, see <a href="#sql-database">SQL Database</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="dev-sikuli-supplemental-pack"><a class="anchor" href="#dev-sikuli-supplemental-pack"></a>1.6.5. sikulix-supplemental package</h4>
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/manual/development/linux-native-libs/linux-sikuli-supplemental-pack.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/manual/development/linux-native-libs/linux-sikuli-supplemental-pack.adoc" target="_blank">edit</a></p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Only for Linux Operating Systems!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The current build <code>libVisionProxy.so</code> is already included in the fork <a href="https://github.com/toschneck/SikuliX-2014">toschneck/SikuliX-2014</a> and the following maven dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code> &lt;dependency&gt;
     &lt;groupId&gt;com.sikulix&lt;/groupId&gt;
     &lt;artifactId&gt;sikulixapi-complete&lt;/artifactId&gt;
     &lt;version&gt;1.1.990/version&gt; <i class="conum" data-value="1"></i><b>(1)</b>
 &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Version can be newer, but with prefix <code>1.1.99</code></td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Build sikulix-supplemental package (Ubuntu)</div>
<ul>
<li>
<p>Download under <a href="https://github.com/RaiMan/SikuliX-2014/blob/master/Setup/src/main/resources/SikuliX-1.1.0-Beta-Supplemental-Linux.zip">SikuliX-2014/Setup/SikuliX-1.1.0-Beta-Supplemental-Linux.zip</a></p>
</li>
<li>
<p>Unzip and read included README</p>
</li>
<li>
<p>Do the following steps.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>sudo apt-get install libcv-dev

sudo apt-get install libtesseract-dev

./ubuntu14_openCV_symbolic_links.sh

./makeVisionProxy</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>replace the <code>libVisionProxy.so</code> file</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examples"><a class="anchor" href="#examples"></a>2. Example projects and Tutorials on GitHub</h2>
<div class="sectionbody">
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/example-projects.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/example-projects.adoc" target="_blank">edit</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><a href="https://github.com/ConSol/sakuli-examples">ConSol/sakuli-examples</a></strong></p>
</li>
<li>
<p><strong><a href="https://github.com/toschneck/sakuli-example-bakery-testing">toschneck/sakuli-example-bakery-testing</a></strong></p>
</li>
<li>
<p><strong><a href="https://github.com/toschneck/openshift-example-bakery-ci-pipeline">toschneck/openshift-example-bakery-ci-pipeline</a></strong></p>
</li>
<li>
<p><strong><a href="https://github.com/ConSol/sakuli-example-testautomation-day">ConSol/sakuli-example-testautomation-day</a></strong></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="publications"><a class="anchor" href="#publications"></a>3. Publications</h2>
<div class="sectionbody">
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/publications.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/publications.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>03/2018: <a href="https://www.consol.de/fileadmin/pdf/news/presse/PI_Kunde_Continentale.pdf">Pressemitteilung:
Continentale überwacht Unternehmensapplikationen mit
Consol-Lösung Sakuli</a></p>
</div>
<hr>
<div class="paragraph">
<p>04/2017: <a href="https://www.sigs-datacom.de/digital/objektspektrum">OBJEKTspektrum: End-2-End-UI-Tests mit Sakuli in Container-Umgebungen - "Time-to-Test" im Griff</a> (Tobias Schneck, Simon Meggle)</p>
</div>
<div class="paragraph">
<p>03/2017: <a href="https://jaxenter.de/sakuli-testing-monitoring-container-54374">JAXenter: End-2-End-Testing und -Monitoring im Container-Zeitalter</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>01/2017: <a href="https://www.consol.de/fileadmin/pdf/news/news-events/01_2017-Java_aktuell-Magazin-Christoph-Deppisch-und-Tobias-Schneck_Automatisiertes-Testen-in-Zeiten-von-Microservices.pdf">Java aktuell: Automatisiertes Testen in Zeiten von Microservices</a> (Christoph Deppisch / Tobias Schneck)</p>
</div>
<hr>
<div class="paragraph">
<p>10/2016: <a href="https://www.informatik-aktuell.de/entwicklung/methoden/graphical-user-interface-gui-in-containern-testen.html">Informatik Aktuell: Software-Test im Container: So können Sie Graphical User Interfaces mit Docker und Sakuli testen</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>10/2016: <a href="https://labs.consol.de/sakuli/development/2016/10/14/sakuli-java-dsl.html">ConSol Labs: Containerized UI-Tests in Java with Sakuli and Docker</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>10/2016: <a href="https://labs.consol.de/android/monitoring/sakuli/2016/10/10/android-sakuli.html">ConSol Labs: Sakuli EndToEnd Tests mit Android</a> (Philip Griesbacher)</p>
</div>
<div class="paragraph">
<p>8/2016: <a href="http://www.heise.de/developer/artikel/Testautomatisierung-in-Zeiten-von-Continuous-Delivery-3300566.html">heise Developer: Testautomatisierung in Zeiten von Continuous Delivery</a> (Christoph Deppisch / Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>8/2016: <a href="https://www.consol.de/it-services/news/details/testautomatisierung-darf-nicht-bei-unit-tests-halt-machen-1/">Pressemitteilung:
Testautomatisierung darf nicht bei Unit-Tests Halt machen </a></p>
</div>
<div class="paragraph">
<p>2/2016: <a href="https://www.consol.com/fileadmin/pdf/news/success_stories/ConSol_SuccessStory_Monitoring-Sakuli_Pfandbriefbank_eng.pdf">Success Story: pbb Deutsche Pfandbriefbank: Monitoring with Sakuli</a></p>
</div>
<div class="paragraph">
<p>2/2016: <a href="http://www.it-administrator.de">IT Administrator</a>: <a href="http://shop.heinemann-verlag.de/it-administrator/einzelhefte/139/ausgabe-februar-2016-it-support-und-troubleshooting">"Den Anwender simuliert"</a> (Simon Meggle)</p>
</div>
<hr>
<div class="paragraph">
<p>5/2015: <a href="http://www.heise.de/developer/meldung/End-to-End-Application-Monitoring-mit-Sakuli-2729493.html">heise Developer: End-to-End Application Monitoring mit Sakuli</a></p>
</div>
<div class="paragraph">
<p>2/2015: <a href="http://www.it-administrator.de">IT Administrator</a>: <a href="http://www.it-administrator.de/themen/netzwerkmanagement/fachartikel/179023.html">End2End-Monitoring mit dem Open Source-Tool Sakuli</a> (Simon Meggle)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events"><a class="anchor" href="#events"></a>4. Events</h2>
<div class="sectionbody">
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/events.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/events.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>September 10, 2018: <a href="http://swanseacon.co.uk/">SwanseaCon 2018</a> (Tobias Schneck)<br>
<strong>&#8594; Talk:</strong> <a href="http://swanseacon.co.uk/schedule/#session-22">UI-Testing - Selenium? Rich-Clients? Containers?</a></p>
</div>
<div class="paragraph">
<p>July 18, 2018: <a href="https://www.meetup.com/de-DE/Lightweight-Java-User-Group-Munchen">Lightweight Java User Group München</a> (Tobias Schneck)<br>
<strong>&#8594; Talk:</strong> <a href="https://www.meetup.com/de-DE/Lightweight-Java-User-Group-Munchen/events/248063246/">OpenShift-Build-Pipelines: Build &#8594; Test &#8594; Run!</a></p>
</div>
<div class="paragraph">
<p>July 5, 2018: <a href="https://www.java-forum-stuttgart.de">Java Forum Stuttgart</a> (Tobias Schneck)<br>
<strong>&#8594; Talk:</strong> <a href="https://www.java-forum-stuttgart.de/de/Slot+4+2018.html#E4/">OpenShift-Build-Pipelines: Build &#8594; Test &#8594; Run!</a></p>
</div>
<div class="paragraph">
<p>June 7, 2018: Meetup of <a href="https://www.meetup.com/de-DE/jugthde/events/245643418/">Java User Group Thüringen</a> (Tobias Schneck)<br>
<strong>&#8594; Slides:</strong> <a href="https://www.slideshare.net/TobiasSchneck/openshiftbuildpipelines-build-test-run">OpenShift-Build-Pipelines: Build &#8594; Test &#8594; Run!</a><br>
<strong>&#8594; Demo Code:</strong> <span class="image"><img src="images/github-logo-inline.png" alt="github-logo"></span> <a href="https://github.com/toschneck/openshift-example-bakery-ci-pipeline">toschneck/openshift-example-bakery-ci-pipeline</a><br>
<strong>&#8594; Video:</strong> <span class="image"><img src="images/youtube-logo-inline.png" alt="youtube-logo"></span> <a href="https://www.youtube.com/watch?v=8Gwem76OxlA" class="bare">https://www.youtube.com/watch?v=8Gwem76OxlA</a></p>
</div>
<div class="paragraph">
<p>April 24, 2018: <a href="https://programm.doag.org/apex/2018/#/scheduledEvent/553310">APEX Connect 2018</a> (Tobias Schneck)<br>
<strong>&#8594; Slides:</strong> <a href="https://www.slideshare.net/TobiasSchneck/uitesting-selenium-richclients-containers-apex-connect-2018">UI-Testing - Selenium? Rich-Clients? Containers?</a><br>
<strong>&#8594; Demo Code:</strong> <span class="image"><img src="images/github-logo-inline.png" alt="github-logo"></span> <a href="https://github.com/ConSol/sakuli-examples/tree/master/java-selenium-example">ConSol/sakuli-examples/java-selenium-example</a></p>
</div>
<hr>
<div class="paragraph">
<p>August 9, 2017: <a href="https://labs.consol.de/wiki/doku.php?id=workshop:2017:start">Monitoring Workshop 2017: Sakuli - Durchmarsch und Skalierungsmöglichkeiten</a> (Simon Meggle)<br>
<strong>&#8594; Slides:</strong> <a href="https://www.slideshare.net/simmerl121/sakuli-skalierungsmglichkeiten-windows-openshift-kubernetes">Sakuli - Skalierungsmöglichkeiten (Windows / OpenShift / Kubernetes)</a></p>
</div>
<div class="paragraph">
<p>July 11, 2017: <a href="https://www.consol.de/news/details/review-openshift-kooperationsevent-von-consol-und-red-hat-am-110717">ConSol/Redhat OpenShift Day - everything Continuous</a> (Tobias Schneck)<br>
<strong>&#8594; Slides:</strong> <a href="https://www.slideshare.net/TobiasSchneck/continuous-testing-integration-und-uitesting-mit-openshiftbuildpipelines">Continuous Testing: Integration- und UI-Testing mit OpenShift-Build-Pipelines</a><br>
<strong>&#8594; Demo Code:</strong> <span class="image"><img src="images/github-logo-inline.png" alt="github_                -logo"></span> <a href="https://github.com/toschneck/openshift-example-bakery-ci-pipeline">toschneck/openshift-example-bakery-ci-pipeline</a></p>
</div>
<div class="paragraph">
<p>May 4, 2017: <a href="https://mathias-kettner.de/check_mk_konferenz_2017.html">Check_MK Conference 2017</a> (Hardy Düttmann, ITeRATIO)<br>
<strong>&#8594; Slides:</strong> <a href="https://mathias-kettner.de/download/2017-Konferenz-Hardy_Duettmann-End2End.pdf">End-To-End-Monitoring with Check_MK</a><br>
<strong>&#8594; Video:</strong> <a href="https://www.youtube.com/watch?v=cX0-zLxI_Zg">YouTube: Hardy Düttmann | End-To-End-Monitoring with Check_MK</a></p>
</div>
<div class="paragraph">
<p>April 27, 2017: <a href="http://www.jugs.de/tt2017/abstracts.html#link07">Stuttgarter Test-Tage, Stuttgart</a> (Tobias Schneck)<br>
<strong>&#8594; Slides:</strong> <a href="https://www.slideshare.net/TobiasSchneck/testing-selenium-richclients-containers">Testing - Selenium? Rich-Clients? Containers?</a></p>
</div>
<div class="paragraph">
<p>January 30 - February 3, 2017: <a href="http://www.oop-konferenz.de/">OOP 2017, Munich</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>January 19, 2017: <a href="https://www.meetup.com/de-DE/Agile-Testing-Munich/events/235148329/">Agile Testing Meetup - Testen im Zeitalter von Containern, Munich</a> (Tobias Schneck)<br>
<strong>&#8594; Slides:</strong> <a href="http://www.slideshare.net/TobiasSchneck/containerized-end2end-testing-agile-testing-meetup-at-sddeutsche-zeitung-munich-19012017">Containerized End-2-End-Testing</a></p>
</div>
<hr>
<div class="paragraph">
<p>November 16, 2016: <a href="http://www.containerconf.de/">ContainerConf 2016, Mannheim</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>November 3, 2016: <a href="https://www.qs-tag.de">Software QS-Tag 2016, Nuremberg</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>September 30, 2016: <a href="http://www.jug-saxony-day.org/">JUG Saxony Day, Dresden</a> (Tobias Schneck)<br>
<strong>&#8594; Slides:</strong> <a href="http://www.slideshare.net/TobiasSchneck/containerized-end2end-testing-jug-saxony-day">Containerized End-2-End-Testing (German)</a></p>
</div>
<div class="paragraph">
<p>August 31, 2016: <a href="http://www.herbstcampus.de/programm.php">Herbstcampus 2016, Nuremberg</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>July 25, 2016: <a href="http://www.jugm.de/">JUG München</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>June 27, 2016 <a href="http://www.meetup.com/de-DE/Docker-Hamburg/events/229808506">Meetup during the ContainerDays, Hamburg</a> (Tobias Schneck)<br>
<strong>&#8594; Slides:</strong> <a href="https://speakerdeck.com/toschneck/containerized-end-2-end-testing-containerdays-2016-in-hamburg">Containerized End-2-End-Testing</a></p>
</div>
<div class="paragraph">
<p>March 8-10, 2016: <a href="http://www.javaland.eu/de/home/">JavaLand, Brühl</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>March 3, 2016: <a href="https://www.consol.de/von-monitoring-bis-managed-service/">Allianz Arena München</a> (Simon Meggle)</p>
</div>
<div class="paragraph">
<p>March 1, 2016: <a href="https://www.icinga.org/community/events/icinga-camp-berlin/">Icinga Camp, Berlin</a> (Simon Meggle)</p>
</div>
<div class="paragraph">
<p>January 26, 2016: <a href="https://www.xing.com/communities/groups/linux-stammtisch-muenchen-1057878">Linux-Stamtisch München</a> (Tobias Schneck)</p>
</div>
<hr>
<div class="paragraph">
<p>October 24, 2015: <a href="http://ubucon.de/2015/">Ubucon Berlin</a> (Simon Meggle)</p>
</div>
<div class="paragraph">
<p>October 13, 2015: <a href="https://www.consol.de/testing-integration-day-mit-redhat/">Testing &amp; Integration Day, Allianz Arena Munich</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>June 22, 2015: <a href="http://www.meetup.com/de-DE/Agile-Testing-Munich/events/222659146/?eventId=222659146">Agile Testing Munich</a> (Tobias Schneck)</p>
</div>
<div class="paragraph">
<p>May 14, 2015: <a href="http://2015.opentechsummit.net/">OpenTechSummit</a> (Simon Meggle)</p>
</div>
<div class="paragraph">
<p>March 28, 2015: <a href="https://www.luga.de/Aktionen/LIT-2015/">LinuxTag Augsburg</a> (Simon Meggle)</p>
</div>
<hr>
<div class="paragraph">
<p>2014: ConSol Internal DevDay (Tobias Schneck)<br>
<strong>&#8594; Slides:</strong> <a href="https://rawgit.com/toschneck/presentation/sakuli-dev-day-presentation/index.html#/">End-to-end testing for web sites and common UIs with full Nagios integration</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="media"><a class="anchor" href="#media"></a>5. Media</h2>
<div class="sectionbody">
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/media.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/media.adoc" target="_blank">edit</a></p>
</div>
<div id="short-overview" class="paragraph">
<div class="title">Sakuli Short Overview Presentation</div>
<p>last updated: 12.2017</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="files/Sakuli_Short_Overview.pdf"><img src="images/Sakuli_Short_Overview.png" alt="Sakuli Short Overview Presentation"></a>
</div>
</div>
<div class="videoblock">
<div class="title">Sakuli UI Introduction</div>
<div class="content">
<iframe src="https://www.youtube.com/embed/5RJY_FD6YvQ?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p><a href="https://github.com/ConSol/sakuli-ui" class="bare">https://github.com/ConSol/sakuli-ui</a></p>
</div>
<div class="paragraph">
<div class="title">YouTube: OpenShift-Build-Pipelines</div>
<p>Shows how to use Sakuli, <a href="http://citrusframework.org/">Citrus</a> in OpenShift build pipelines.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="560" height="320" src="https://www.youtube.com/embed/8Gwem76OxlA?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<div class="title">Monitoring Minutes</div>
<p>Episode 9 of the <strong><em>ConSol Monitoring Minutes</em></strong> shows the main features of Sakuli in 15 minutes. The machine used in this video is an instance of our demo appliance.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="560" height="320" src="https://www.youtube.com/embed/S6NROEOYF6w?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="videoblock">
<div class="title">Sakuli End-2-End-Testing - Lightning Talk - Agile Testing Meetup (June 2015)</div>
<div class="content">
<iframe width="560" height="320" src="https://www.youtube.com/embed/JjRGlkN8BKo?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changelog"><a class="anchor" href="#changelog"></a>6. Change Log</h2>
<div class="sectionbody">
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/changelog.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/changelog.adoc" target="_blank">edit</a></p>
</div>
<div id="version-1.2.0" class="ulist">
<div class="title"><a href="http://consol.github.io/sakuli/v1.2.0/index.html"><strong>Version 1.2.0</strong></a></div>
<ul>
<li>
<p>Sakuli UI for managing and developing Sakuli tests (<a href="https://github.com/ConSol/sakuli/issues/308https://github.com/ConSol/sakuli/issues/308">#308</a>, <a href="https://github.com/ConSol/sakuli-ui">github.com/ConSol/sakuli-ui</a>)</p>
</li>
</ul>
</div>
<div id="version-1.1.0" class="ulist">
<div class="title"><a href="http://consol.github.io/sakuli/v1.1.0/index.html"><strong>Version 1.1.0</strong></a></div>
<ul>
<li>
<p>Merge PR <a href="#openshift-s2i">Sakuli OpenShift Source-2-Image (S2I) Build</a> from <a href="http://github.com/FMAOuroboros">Sven Hettwer</a> (<a href="https://github.com/ConSol/sakuli/issues/296">#296</a>)</p>
</li>
<li>
<p>Add methods to read environment variables and property values (<a href="https://github.com/ConSol/sakuli/issues/251">#251</a>):</p>
<div class="ulist">
<ul>
<li>
<p><a href="#Environment.getEnv">Environment.getEnv(key)</a></p>
</li>
<li>
<p><a href="#Environment.getProperty">Environment.getProperty(key)</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Improve error message if AES algorithm is not possible due to missing Java Cryptography Extension (<a href="https://github.com/ConSol/sakuli/issues/277">#277</a>, <a href="#invalid-key-exception-aes-cryptography">Invalid Key Exception in AES</a>)</p>
</li>
<li>
<p>Fix <a href="#Application.open">Application.open()</a>: won&#8217;t fail if application could not started and improve error message (<a href="https://github.com/ConSol/sakuli/issues/264">#264</a>)</p>
</li>
<li>
<p><a href="#docker-images">Docker images</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Fix calculation of JVM_HEAP_XMX with to high count of cgroup memory limit in bytes (<a href="https://github.com/ConSol/sakuli/issues/280">#280</a>)</p>
</li>
<li>
<p>Add default JVM options <code>-XX:+UseCGroupMemoryLimitForHeap</code> for optimized jvm runtime in Docker (<a href="https://github.com/ConSol/sakuli/issues/291">#291</a>)</p>
</li>
<li>
<p>Use version <a href="https://github.com/ConSol/docker-headless-vnc-container/releases/tag/1.2.2"><code>1.2.2</code></a> of Docker headless VNC image due to  hanging vnc handshake if container is offline (<a href="https://github.com/ConSol/docker-headless-vnc-container/issues/50">ConSol/docker-headless-vnc-container #50</a>)</p>
</li>
<li>
<p>Optimize memory usage of Firefox and Chrome (<a href="https://github.com/ConSol/sakuli/issues/276">#276</a>)</p>
</li>
<li>
<p>Use <a href="https://en.wikipedia.org/wiki/Scrot">Scrot</a> as screenshot tool footprint (<a href="https://github.com/ConSol/sakuli/issues/250">#250</a>)</p>
</li>
<li>
<p>Add missing lsb-release package to Ubuntu image</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#kubernetes">Kubernetes</a> and <a href="#openshift">OpenShift</a> Support (<a href="https://github.com/ConSol/sakuli/issues/258">#258</a>):</p>
<div class="ulist">
<ul>
<li>
<p>Update <a href="https://github.com/ConSol/sakuli/blob/dev/docker" target="_blank">Templates</a> with latest optimizations</p>
</li>
<li>
<p>Add <code>KUBERNETES_RUN_MODE</code> environment variable to have better <a href="#kubernetes-job-config">Job Config</a> support</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fix drag and drop won&#8217;t work on every native desktop (<a href="https://github.com/ConSol/sakuli/issues/292">#292</a>)</p>
</li>
<li>
<p>Revert (<a href="https://github.com/ConSol/sakuli/issues/276">#276</a> "use private mode of firefox for tests" due to the fact that the SSL certificate handling is worse in this mode (<a href="https://github.com/ConSol/sakuli/issues/285">#285</a>)</p>
</li>
<li>
<p>Use PNG as default error screenshot format to improve default compression and make it usable for images in test cases (<a href="https://github.com/ConSol/sakuli/issues/174">#174</a>)</p>
</li>
<li>
<p>Increase details of error output at availability check in Linux Util, to show if used tools like <code>wmctrl</code> is missing (<a href="https://github.com/ConSol/sakuli/issues/266">#266</a>, <a href="https://github.com/RaiMan/SikuliX-2014/pull/279">RaiMan/SikuliX-2014 #279</a>)</p>
</li>
<li>
<p>Fix method <code><a href="#Region.takeScreenshot">Region.takeScreenshot(filename)</a></code>, <code><a href="#Environment.takeScreenshot">Environment.takeScreenshot(filename)</a></code> to save the screenshot on a fixed path without timestamp and add method <code><a href="#Region.takeScreenshotWithTimestamp">Region.takeScreenshotWithTimestamp(filenamePostfix, optFolderPath, optFormat)</a>, `<a href="#Environment.takeScreenshotWithTimestamp">Environment.takeScreenshotWithTimestamp(filenamePostfix, optFolderPath, optFormat)</a></code> (<a href="https://github.com/ConSol/sakuli/issues/263">#263</a>)</p>
</li>
<li>
<p>Add <a href="#encryption-environment">Encryption Mode <code>environment</code></a> Cipher with masterkey setup as default (<a href="https://github.com/ConSol/sakuli/issues/197">#197</a>)</p>
</li>
<li>
<p>Add environment variable <code>SAKULI_ROOT</code> to Windows / Linux installer (<a href="https://github.com/ConSol/sakuli/issues/191">#191</a>)</p>
</li>
<li>
<p>Add automatic parsing from dashed environment vars, see <a href="#property-loading-mechanism">Property loading mechanism</a> (<a href="https://github.com/ConSol/sakuli/issues/238">#238</a>)</p>
</li>
<li>
<p>Add Mac compatible <code>sakuli</code> binary to installer (<a href="https://github.com/ConSol/sakuli/issues/298">#298</a>, <a href="https://github.com/ConSol/sakuli-go-wrapper/issues/4">ConSol/sakuli-go-wrapper/ #4</a></p>
</li>
<li>
<p>Update Sakuli Examples:</p>
<div class="ulist">
<ul>
<li>
<p>Add <a href="https://github.com/ConSol/sakuli-examples/blob/master/docker-xfce-omd/README.adoc">Sakuli Tutorial - Docker based E2E application monitoring</a></p>
</li>
<li>
<p>Update <a href="https://github.com/ConSol/sakuli-examples/blob/master/first-steps/first-steps.md">first steps tutorial</a></p>
</li>
<li>
<p>Add <code><a href="https://github.com/ConSol/sakuli/blob/dev/example_test_suites/example_icewm" target="_blank">example_icewm</a></code> for icewm docker containers (<a href="https://github.com/ConSol/sakuli/issues/241">#241</a>)</p>
</li>
<li>
<p>Add validation of Sahi logo to <code><a href="https://github.com/ConSol/sakuli/blob/dev/example_test_suites/example_icewm" target="_blank">example_icewm</a></code>, <code><a href="https://github.com/ConSol/sakuli/blob/dev/example_test_suites/example_xfce" target="_blank">example_xfce</a></code> docker containers</p>
</li>
<li>
<p>Update <code><a href="https://github.com/ConSol/sakuli/blob/dev/example_test_suites/example_windows8" target="_blank">example_windows8</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Update Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Update <a href="https://github.com/ConSol/sakuli/blob/dev/README.adoc" target="_blank">README</a> page and change documentation to github-pages/ascii-doc setup, new official Documentation: <a href="http://consol.github.io/sakuli/" class="bare">http://consol.github.io/sakuli/</a> (<a href="https://github.com/ConSol/sakuli/issues/243">#243</a>)</p>
</li>
<li>
<p>Provide the latest documentation link (<a href="https://github.com/ConSol/sakuli/issues/283">#283</a>): <a href="http://consol.github.io/sakuli/latest" class="bare">http://consol.github.io/sakuli/latest</a></p>
</li>
<li>
<p>How to use <a href="#sahi-webpack-dev-server">Sahi and webpack-dev-server</a> (<a href="https://github.com/ConSol/sakuli/issues/295">#295</a>)</p>
</li>
<li>
<p>How to fix <a href="#docker-images-known-issues-chromium-crash">chromium crashes with high VNC resolution</a> (<a href="https://github.com/ConSol/docker-headless-vnc-container/issues/53">ConSol/docker-headless-vnc-container #53</a>)</p>
</li>
<li>
<p>Add  <a href="#invalid-key-exception-aes-cryptography">usage of OpenJDK in case of <code>InvalidKeyException</code></a> to gearman encryption documentation (<a href="https://github.com/ConSol/sakuli/issues/91">#91</a>)</p>
</li>
<li>
<p>Add documentation for <a href="#docker-https-sahi">automatically importing firefox ssl certificates in docker</a> (<a href="https://github.com/ConSol/sakuli/issues/285">#285</a>)</p>
</li>
<li>
<p>Improve documentation of <a href="#property-loading-mechanism">Property loading mechanism</a>:  add "Property References" to documentation (<a href="https://github.com/ConSol/sakuli/issues/261">#261</a>)</p>
</li>
<li>
<p>Update <a href="#events">Events</a> and <a href="#publications">Publications</a></p>
</li>
<li>
<p>Add <a href="files/Sakuli_Short_Overview.pdf">Sakuli Short Overview Presentation</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#omd-gearman">OMD Monitoring Integration</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Fixed <a href="#screenshot_history">screenshot event handler</a> parameter (<a href="https://github.com/ConSol/sakuli/issues/294">#294</a>)</p>
</li>
<li>
<p>Add Sakuli setup for different <a href="#monitoring-integration">OMD setups</a> with make/Ansible (<a href="https://github.com/ConSol/sakuli/issues/257">#257</a>)</p>
</li>
<li>
<p>Replaced all "demo" occurrences with placeholder and modify Ansible template (<a href="https://github.com/ConSol/sakuli/issues/293">#293</a>)</p>
</li>
<li>
<p>Removed Grafana template; distributed by Histou project <a href="https://github.com/Griesbacher/histou">Griesbacher/histou</a></p>
</li>
<li>
<p>Thruk SSI: Add png/jpg support (<a href="https://github.com/ConSol/sakuli/issues/208">#208</a>)</p>
</li>
<li>
<p>Fix linefeed problem under windows for <a href="#check_mk">Check_MK</a> template engine (<a href="https://github.com/ConSol/sakuli/issues/176">#176</a>)</p>
</li>
<li>
<p>Moved OMD setup Ansible playbooks into separate folder <a href="https://github.com/ConSol/sakuli/blob/dev/src/common/src/main/resources/org/sakuli/common/setup/omd" target="_blank">omd</a></p>
</li>
<li>
<p>Documentation: <a href="#omd-gearman">Gearman forwarder</a>, <a href="#omd-docker">OMD Docker image</a>, <a href="#gearman_proxy">Gearman proxy (optional)</a>, <a href="#screenshot_history">Screenshot history</a>, <a href="#grafana_graphs">Grafana graphs</a>, <a href="#check_mk">Check_MK</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="version-1.1.0-beta" class="ulist">
<div class="title"><a href="http://consol.github.io/sakuli/v1.1.0-beta/index.html"><strong>Version 1.1.0-beta</strong></a></div>
<ul>
<li>
<p><a href="#openshift">OpenShift</a> and enhanced
<a href="#docker-images">Sakuli Docker Images</a> support (<a href="https://github.com/ConSol/sakuli/issues/218">#218</a>):</p>
</li>
<li>
<p>add different OpenShift templates under <code>docker/openshift</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Docker Image Build from sources</p>
</li>
<li>
<p>Deployment Config for continuous test running</p>
</li>
<li>
<p>Job Config for onetime execution</p>
</li>
<li>
<p>POD run config for single execution only</p>
</li>
<li>
<p>GitRepoVolumeSource example configuration for a ready to use
git-based testsuites execution</p>
</li>
</ul>
</div>
</li>
<li>
<p>change startup to a non-root-user startup procedure</p>
</li>
<li>
<p>add Sakuli Images based on IceWM UI</p>
</li>
<li>
<p>add non-root java DSL based Docker images</p>
</li>
<li>
<p>add correct JVM heap sizing on startup due to
<a href="http://matthewkwilliams.com/index.php/2016/03/17/docker-cgroups-memory-constraints-and-java-cautionary-tale/1">Docker
cgroups constraints</a></p>
</li>
<li>
<p>move to startup scripts to a more generic path: <code>/dockerstartup</code></p>
</li>
<li>
<p>fix some Firefox startup issues</p>
</li>
<li>
<p>Use OpenJDK for docker images</p>
</li>
<li>
<p><a href="docs/kubernetes.md">Kubernetes support</a> with examples under
<code>docker/kubernetes</code> (<a href="https://github.com/ConSol/sakuli/issues/239">#239</a>)</p>
</li>
<li>
<p>skip vnc startup on docker containers on sakuli commands: <code>-help</code>,
<code>-version</code>, <code>encrypt</code> (<a href="https://github.com/ConSol/sakuli/issues/198">#198</a>)</p>
</li>
<li>
<p>first step to improve exception message output (<a href="https://github.com/ConSol/sakuli/issues/37">#37</a>)</p>
</li>
<li>
<p>fix description of properties loading mechanism (<a href="https://github.com/ConSol/sakuli/issues/211">#211</a>)</p>
</li>
<li>
<p>fix some problems of the Gearman caching (<a href="https://github.com/ConSol/sakuli/issues/225">#225</a>):</p>
</li>
<li>
<p>add error handling for RuntimeExceptions to Gearman client</p>
</li>
<li>
<p>print out Exception class if no message is provided</p>
</li>
<li>
<p>add <a href="docs/forwarder-checkmk.md">support for checkMK</a> monitoring
system, based on twig template based file output (<a href="https://github.com/ConSol/sakuli/issues/176">#176</a>)</p>
</li>
<li>
<p>Improved Sakuli event handler: hide screenshots after 30 days, delete
after 60; adapted Thruk SSI (<a href="https://github.com/ConSol/sakuli/issues/236">#236</a>)</p>
</li>
<li>
<p>fix wrong exit code of go-starter <code>sakuli -version</code></p>
</li>
<li>
<p>clean up ordering of gearman and icinga2 properties in
<code>sakuli-default.properties</code> and documentation (<a href="https://github.com/ConSol/sakuli/issues/188">#188</a>)</p>
</li>
<li>
<p>fix Sahi startup errors with retry mechanism (<a href="https://github.com/ConSol/sakuli/issues/219">#219</a>)</p>
</li>
<li>
<p>merge pull request <a href="https://github.com/ConSol/sakuli/issues/220">#220</a> from martku/patch-1</p>
</li>
<li>
<p>change dependency <code>sakuli-go-wrapper</code> to fixed version</p>
</li>
<li>
<p>smaller bugfixes and documentation update</p>
</li>
</ul>
</div>
<div id="version-1.0.2" class="ulist">
<div class="title"><a href="http://consol.github.io/sakuli/v1.0.2/index.html"><strong>Version 1.0.2</strong> (Bugfix + some small features)</a></div>
<ul>
<li>
<p>issue <a href="https://github.com/ConSol/sakuli/issues/210">#210</a>: upgrade Sahi to version <code>5.1</code> due to Sahi compatibility issue with Chrome 53+ and <code>region._click()</code></p>
</li>
<li>
<p>fix docker images</p>
<div class="ulist">
<ul>
<li>
<p>Chrome don&#8217;t startup under CentOS Docker image, see also <a href="https://github.com/ConSol/docker-headless-vnc-container/issues/2">https://github.com/ConSol/docker-headless-vnc-container/issues/2</a></p>
</li>
<li>
<p>XFCE window manager don&#8217;t startup under CentOS Docker image, see also <a href="https://github.com/ConSol/docker-headless-vnc-container/issues/4">https://github.com/ConSol/docker-headless-vnc-container/issues/4</a></p>
</li>
<li>
<p>use <code>SAKULI_VERSION</code> ARG in Dockerfiles, to have more flexible to build images</p>
</li>
</ul>
</div>
</li>
<li>
<p>issue <a href="https://github.com/ConSol/sakuli/issues/215">#215</a> add java-based Sakuli Docker images</p>
</li>
<li>
<p>issue <a href="https://github.com/ConSol/sakuli/issues/91">#91</a>: add AES encryption option for Gearman forwarder module</p>
<div class="ulist">
<ul>
<li>
<p>add Java JCE extension to Docker images</p>
</li>
</ul>
</div>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/216">#216</a>: set <code>dom.storage.enabled</code> to true in firefox pref.js</p>
</li>
<li>
<p>add Sakuli-Example page <a href="https://github.com/ConSol/sakuli-examples">https://github.com/ConSol/sakuli-examples</a></p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/177">#177</a> add description for the javaDSL and update the documentation</p>
</li>
<li>
<p>issue <a href="https://github.com/ConSol/sakuli/issues/205">#205</a>: use maven-jgitflow for releases and branching</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 1.0.1</strong> (Bugfix)</div>
<ul>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/190">#190</a>: fix Docker centos image: use tagged version <code>consol/centos-xfce-vnc:1.0.1</code></p>
</li>
<li>
<p>Use consistent file naming and fix broken links in docs</p>
</li>
<li>
<p>fix example_xfce for new centos 7 version</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 1.0.0</strong></div>
<ul>
<li>
<p>First step tutorial and https documentation. Fixes <a href="https://github.com/ConSol/sakuli/issues/161">#161</a>, fixes <a href="https://github.com/ConSol/sakuli/issues/53">#53</a> partially.</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/32">#32</a> highlight function on linux does not work (in underlying SikuliX library)</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/102">#102</a> add method <code>dragAndDropTo</code> to the <code>Region</code> object</p>
</li>
<li>
<p>Changed order of properties.</p>
</li>
<li>
<p>Improve example_xfce:</p>
<div class="ulist">
<ul>
<li>
<p>Replaced calculator screenshot by a small one.</p>
</li>
<li>
<p>add mouse move action to example_xfce</p>
</li>
</ul>
</div>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/139">#139</a> remove PDF als download content type, to enable to use the browser PDF viewer</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/139">#139</a> add start chrome + firefox maximised (firefox have to hold the file <code>localstore.rdf</code> in his profile folder)</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/168">#168</a> add reboot hint if user install the package <code>Windows environement changes</code></p>
</li>
<li>
<p>update the installer translation to the recommend one from <a href="https://github.com/izpack/izpack/tree/master/izpack-core/src/main/resources/com/izforge/izpack/bin/langpacks/installer">https://github.com/izpack/izpack/tree/master/izpack-core/src/main/resources/com/izforge/izpack/bin/langpacks/installer</a></p>
</li>
<li>
<p>fix maven snapshot repository path of the <code>labs.consol.de</code> maven-repository
'''</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.9.3</strong></div>
<ul>
<li>
<p>Move to a new binary starter for Windows and Linux (sakuli.exe / sakuli), <a href="https://github.com/ConSol/sakuli/issues/150">#150</a>:</p>
<div class="ulist">
<ul>
<li>
<p>modify VNC documentation to flag <code>-preHook</code> and <code>postHook</code></p>
</li>
<li>
<p>change documentation and docker scripts to new starter syntax <code>sakuli run TEST_SUITE [OPTION]</code></p>
</li>
<li>
<p>add binaries <code>sakuli</code> and <code>sakuli.exe</code> from repo <a href="https://github.com/ConSol/sakuli-go-wrapper">https://github.com/ConSol/sakuli-go-wrapper</a></p>
</li>
<li>
<p>remove <code>sakuli.sh/sakuli.bat</code></p>
</li>
<li>
<p>Change syntax from the new starter to:</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Usage: sakuli[.exe] COMMAND ARGUMENT [OPTIONS]

   sakuli -help
   sakuli -version
   sakuli run &lt;sakuli suite path&gt; [OPTIONS]
   sakuli encrypt &lt;secret&gt; [OPTIONS]

Commands:
 run &lt;sakuli suite path&gt;
 encrypt &lt;secret&gt;

Options:
 -loop &lt;seconds&gt; Loop this suite, wait n seconds between
 executions, 0 means no loops (default: 0)
 -javaHome &lt;folder&gt; Java bin dir (overwrites PATH)
 -javaOption &lt;java option&gt; JVM option parameter, e.g. '-agentlib:…'
 -preHook &lt;programpath&gt; A program which will be executed before a
 suite run (can be added multiple times)
 -postHook &lt;programpath&gt; A program which will be executed after a
 suite run (can be added multiple times)
 -D &lt;JVM option&gt; JVM option to set a property at runtime,
 overwrites file based properties
 -browser &lt;browser&gt; Browser for the test execution
 (default: Firefox)
 -interface &lt;interface&gt; Network interface card name, used by
 command 'encrypt' as salt
 -sahiHome &lt;folder&gt; Sahi installation folder
 -version Version info
 -help This help text</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add new forwarder module <code>Icinga2</code>, see <a href="https://github.com/ConSol/sakuli/issues/145">#145</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Rest client to send the results to Icinga2 API</p>
</li>
<li>
<p>new property <code>sakuli.forwarder.gearman.nagios.template.suite.summary.maxLength</code> to cut to long output due to error messages</p>
</li>
<li>
<p>introduce <code>sakuli.forwarder.icinga2</code> properties // consolidate <code>sakuli.forwarder.database</code> properties</p>
</li>
</ul>
</div>
</li>
<li>
<p>Separate examples for Window 7 and Windows 8</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/118">#118</a> improved output of nagios messages</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/151">#151</a> add a bunch of Windows registry settings to the installer, to improve the test stability. Disables graphical effects, screen saver and error reporting.</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/135">#135</a> Environment similarity:</p>
</li>
<li>
<p>Extract constant Environment#DEFAULT_SIMILARITY to <code>sakuli-default.properties</code> as <code>sakuli.environment.similarity.default</code>:</p>
</li>
<li>
<p>Set default similarity to <code>0.99</code></p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/163">#163</a>: add clean up method, which release all modifier keys before a test case will startet and at the teardown phase</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/162">#162</a>: release keys didn&#8217;t work correctly =&gt; update to sikulix version 1.1.998 and add function "run as admin" to dev suites</p>
</li>
<li>
<p>add an Around Aspect to <code>net.sf.sahi.util.Utils.getCommandTokens</code> to fix parsing errors during calling native commands, see <a href="http://community.sahipro.com/forums/discussion/8552/sahi-os-5-0-and-chrome-user-data-dir-containing-spaces-not-working">http://community.sahipro.com/forums/discussion/8552/sahi-os-5-0-and-chrome-user-data-dir-containing-spaces-not-working</a></p>
</li>
<li>
<p>Documentation how to solve increasing sahi profile folders. Closes <a href="https://github.com/ConSol/sakuli/issues/164">#164</a>.</p>
</li>
<li>
<p>reduce wait times for example test suites</p>
</li>
<li>
<p>fix <code>firefox_portable</code> executable path in <code>browser.xml</code>: replace it with $userDir relativ path</p>
</li>
<li>
<p>consolidate forwarder properties: adjust <code>jdbc.<strong></code> properties to <code>sakuli.forwarder.database.</strong></code> properties</p>
</li>
<li>
<p>improve logging of database receiver</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/153">#153</a> <code>sakuli.log.maxAge</code> error, is smaller then 1</p>
</li>
<li>
<p>check_sakuli.php: added wrapper for function declarations to fix errors in PNP basket (cannot redefine…)</p>
</li>
<li>
<p>cl: update installer with special cl installer preselected options</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/155">#155</a>: add environment variables to –version output</p>
</li>
<li>
<p>fix for <a href="https://github.com/ConSol/sakuli/issues/158">#158</a>: linux installer correct firefox var to <code>MOZ_DISABLE_OOP_PLUGINS</code></p>
</li>
<li>
<p>Added ff_purge_profile.bat to helper scripts (delete sqlite file before each run)</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/155">#155</a>: add -version parameter to Sakuli starter (sakuli / sakuli.exe)</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/153">#153</a> log data rotation</p>
<div class="ulist">
<ul>
<li>
<p>add a property sakuli.log.maxAge in days (default 14 days)</p>
</li>
<li>
<p>deletes all files that are older than the defined days in the folder <code>sakuli.log.folder</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.9.2</strong></div>
<ul>
<li>
<p>add setting some firefox variables (<code>MOZ_DISABLE_OOP_PLUGINS</code>, <code>MOZ_DISABLE_AUTO_SAFE_MODE</code>, <code>MOZ_DISABLE_SAFE_MODE_KEY</code>) for UI testing to the installer, see <a href="https://github.com/ConSol/sakuli/issues/158">#158</a>.</p>
</li>
<li>
<p>Executable JAR installer <code>sakuli-vX.X.X-installer.jar</code>, downloadable via <a href="https://labs.consol.de/sakuli/install" class="bare">https://labs.consol.de/sakuli/install</a>, see <a href="https://github.com/ConSol/sakuli/issues/24">#24</a>.</p>
</li>
<li>
<p>The installer contains a complete Sakuli setup and the following options:
<span class="image"><img src="images/installer_2.png" alt="inst_2"></span></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>will set/update the environment variable <code><em>SAKULI_HOME</em></code> to this version.</p>
</li>
<li>
<p>will set/update the environment to a recommend UI testing configuration. In examples disables the Firefox safe.</p>
</li>
<li>
<p>will install one example test suite per OS which will help you to test and understand Sakuli.</p>
</li>
<li>
<p>will install Firefox Portable, which can be used exclusively for Sakuli Tests.</p>
</li>
<li>
<p>will install <a href="http://sourceforge.net/projects/qres/">QRes</a>, a open source screen mode changer (Windows only)</p>
</li>
</ol>
</div>
</li>
<li>
<p>modify docker images to new headless linux installer</p>
</li>
<li>
<p>custom sahi <code>browser_types.xml</code> for firefox, firefox_portable, chrome</p>
</li>
<li>
<p>Property <code>sikuli.typeDelay</code> now also set the <code>RobotDesktop.stdAutoDelay</code> to make the delay more effective, default is <code>0.0</code>, <a href="https://github.com/ConSol/sakuli/issues/154">#154</a>.</p>
</li>
<li>
<p>issue <a href="https://github.com/ConSol/sakuli/issues/149">#149</a> add <code>Application.kill()</code> to force closeting an app without "save prompts"</p>
</li>
<li>
<p>issue <a href="https://github.com/ConSol/sakuli/issues/94">#94</a>: disable highlighting in case of an exception</p>
</li>
<li>
<p>docker container: modify test suite permissions after test run in <code>sakuli_startup.sh</code></p>
</li>
<li>
<p>Improve typing handling <a href="https://github.com/ConSol/sakuli/issues/154">#154</a>:</p>
<div class="ulist">
<ul>
<li>
<p>typing all special characters via unicode keyboard shortcuts</p>
</li>
<li>
<p>keyboard mapping only contains alphanumeric characters, so region.type now will work with all local keyboards, because of typing special characters via UFT-8</p>
</li>
<li>
<p>Mac&#8217;s currently not supports directly typing UFT-8 keys, by default  see <a href="https://en.wikipedia.org/wiki/Unicode_input#In_Mac_OS">https://en.wikipedia.org/wiki/Unicode_input#In_Mac_OS</a> . Unicode typing will only be used if correct keyboard is activated.</p>
</li>
</ul>
</div>
</li>
<li>
<p>improve takeScreenshot: now also can handle with absolute paths</p>
</li>
<li>
<p>rename <code>Region.takeScreenShot</code> to <code>Region.takeScreenshot</code></p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/107">#107</a>: Fix Sikuli <code>LinuxUtil</code> Implementation of:</p>
</li>
<li>
<p>Focus application</p>
</li>
<li>
<p>Closing application</p>
</li>
<li>
<p>Make output and control of native commands more flexible</p>
</li>
<li>
<p>include Sahi base installation to java DSL, <a href="https://github.com/ConSol/sakuli/issues/24">#24</a></p>
</li>
<li>
<p>modify properties, so that all default values are included</p>
<div class="ulist">
<ul>
<li>
<p>add check that <code>testsuite.id</code> will be defined at least</p>
</li>
<li>
<p>allow to write test without explicit image folder path, to enable java tests</p>
</li>
</ul>
</div>
</li>
<li>
<p>added docker-container <code>sakuli-omd-labs-ubuntu</code> for a Sakuli preconfigered <a href="http://omdistro.org/">OMD</a></p>
</li>
<li>
<p><code>sakuli.bat</code>: added exitcode, fixes bug <a href="https://github.com/ConSol/sakuli/issues/128">#128</a> (Errors with paths containing spaces)</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/142">#142</a>: remove some not valid windows escape chars like <code>'</code> or <code>"</code> to prevent a InvalidPathException in SakuliStarter arguments</p>
</li>
<li>
<p>docker-containers.md: Added hint for boot2docker users.</p>
</li>
<li>
<p>check_sakuli.php: fixed <a href="https://github.com/ConSol/sakuli/issues/132">#132</a> (suite runtime)</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/103">#103</a>: make docker-container able to overwrite the running testsuite in <code>docker run</code> <code>CMD</code> arguments</p>
</li>
<li>
<p>make the <code>sakuli.sh</code> command line parameters usable in <code>docker run</code> <code>CMD</code> arguments, like for example <code>docker run consol/sakuli-centos-xfce '--run $SAKULI_TEST_SUITE --browser chrome'</code></p>
</li>
<li>
<p>Added documentation how to configure HTTPS in Sahi. <a href="https://github.com/ConSol/sakuli/issues/53">#53</a></p>
</li>
<li>
<p>Rename README.md to index.md in case of <a href="https://readthedocs.org/projects/sakuli/">https://readthedocs.org/projects/sakuli/</a></p>
</li>
<li>
<p>headless-linux.md: Added crontab documentation.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.9.1</strong></div>
<ul>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/116">#116</a> wrong comma in gearman output</p>
</li>
<li>
<p>sakuli.bat: added SAKULI_HOME fallback if env var not set <a href="https://github.com/ConSol/sakuli/issues/124">#124</a></p>
</li>
<li>
<p>sakuli.bat: added javahome parameter, added JVM option passing <a href="https://github.com/ConSol/sakuli/issues/122">#122</a></p>
</li>
<li>
<p>update sikuliX version to 1.1.993</p>
</li>
<li>
<p>Merge branch 'dev-v0.4' into dev</p>
</li>
<li>
<p>sakuli.sh: JVM options (-D) allowed. <a href="https://github.com/ConSol/sakuli/issues/75">#75</a></p>
</li>
<li>
<p>Improve Nagios monitoring integration:</p>
<div class="ulist">
<ul>
<li>
<p>check_sakuli.json: added first JSON template for grafana</p>
</li>
<li>
<p>check_sakuli.php: logfile destination now contains hostname and service description</p>
</li>
<li>
<p>check_sakuli.php: removed UNIT var. Everything is in seconds.</p>
</li>
<li>
<p>CheckMySQLHealthSakuli.pm: no perfdata on stale result (fixes <a href="https://github.com/ConSol/sakuli/issues/120">#120</a>), small output improvements</p>
</li>
<li>
<p>check_sakuli.php: fixed bug, Suite graph did not have correct value.</p>
</li>
<li>
<p>CheckMySQLHealthSakuli.pm: adjust perfdata output as on gearman output (closes <a href="https://github.com/ConSol/sakuli/issues/106">#106</a>)</p>
</li>
<li>
<p>Adapted mysql_purge.sh to new table names, added parameter. <a href="https://github.com/ConSol/sakuli/issues/10">#10</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Merge pull request <a href="https://github.com/ConSol/sakuli/issues/108">#108</a> from sgbeal/master</p>
</li>
<li>
<p>Add Docker container <code>consol/sakuli-ubuntu-xfce</code> and <code>consol/sakuli-centos-xfce</code>, see <a href="https://github.com/ConSol/sakuli/issues/103">#103</a>:</p>
<div class="ulist">
<ul>
<li>
<p>add return value to sakuli_startup.sh and add exit state to sakuli.sh script</p>
</li>
<li>
<p>HTML5-VNC client (noVNC) enabled containers</p>
</li>
<li>
<p><code>docker-compose.yml</code> example for parallel test-execution</p>
</li>
<li>
<p>add example_xfce_test for the docker-containers</p>
</li>
</ul>
</div>
</li>
<li>
<p>fix PrioritizedServiceComparator so now 2 service with the same priority will also accepted</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/49">#49</a> add Environment#runCommand method</p>
</li>
<li>
<p>add <code>takeScreenshot()</code> method to Region object to get the current region as screenshot</p>
</li>
<li>
<p>Merge pull request <a href="https://github.com/ConSol/sakuli/issues/99">#99</a> from c-kr/dev</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/46">#46</a> - add read the docs links and badge</p>
</li>
<li>
<p>improve the way to include additional image folders, <a href="https://github.com/ConSol/sakuli/issues/96">#96</a>:</p>
<div class="ulist">
<ul>
<li>
<p>add method <code>addImagePaths</code> to the TestCase functions</p>
</li>
<li>
<p>add variable '$testSuiteFolder' as global variable to JavaScript testcase.js for a more strait filepath handling</p>
</li>
</ul>
</div>
</li>
<li>
<p>add optional parameter 'silent' to Application.close function to suppress exceptions</p>
</li>
<li>
<p>add OS identification functions 'isWindows', 'isLinux', 'getOsIdentifier' to Environment class</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/98">#98</a> add source and javadoc files to maven build artifacts (on release-builds)</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/92">#92</a> exclude Base64 String in log output</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/95">#95</a> state of suite/case/step is always 'OK', if no error occurs and warning + critical time is 0</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/81">#81</a> Expanded color array in PHP template and change numbering scheme for cases and steps to 3-digits</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.9.0</strong></div>
<ul>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/74">#74</a> extract logging functions to separate javascript class Logger</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/70">#70</a> rename sakuli.screenbased.* properties to sikuli.*</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/42">#42</a> rename Application#closeApp to Application#close in javascript</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/27">#27</a> modify 'non screenshot exception handling' // add TestCaseAction#throwException(message,screenshot)</p>
</li>
<li>
<p>add mysql Dockefile for sakuli database forwarder setup, see <a href="https://github.com/ConSol/sakuli/issues/10">#10</a></p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/10">#10</a> rename table name from sahi to sakuli</p>
</li>
<li>
<p>rewritten documentation for sahi delay.</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/79">#79</a> rename property <code>sahi.proxy.requestDelayOnSikuliInput.delayTime</code> -&gt; <code>sahi.proxy.onSikuliInput.delayPerKey</code> and <code>sahi.proxy.requestDelayOnSikuliInput.refreshTime</code> -&gt; <code>sahi.proxy.onSikuliInput.delayBeforeInput</code></p>
</li>
<li>
<p>finish JavaDSL to be fully supported of all Sakuli features also in Java</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/11">#11</a> custom sahi-port handling (use different ports for sahi-proxy)</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/7">#7</a> update sahi-jar verison to sahi 5.0</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.5.0</strong></div>
<ul>
<li>
<p>rename sakuli.autoHighlight.seconds to sakuli.highlight.seconds</p>
</li>
<li>
<p>Documentation</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/72">#72</a> modfy testsuite.suite file writer - just overwrite the file if any blank lines are inside</p>
</li>
<li>
<p>add Environment#resetSimilarity()</p>
</li>
<li>
<p>fix api generation script</p>
</li>
<li>
<p>improve error message for invalid paths in 'testsuite.suite' file</p>
</li>
<li>
<p>add support for more screenshot paterns - .jpg, .JPG, .png, .PNG</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/52">#52</a> rename sakuli.receiver properties to sakuli.forwarder</p>
</li>
<li>
<p>fix <a href="https://github.com/ConSol/sakuli/issues/71">#71</a> add the resumeOnException flag to some missing handleException calls</p>
</li>
<li>
<p>refactor exception handling // improve exception handling for javaDSL</p>
</li>
<li>
<p>refactor dependency management // extract bin, config, libs to new common 'module'</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/13">#13</a> rename screeshot property to 'sakuli.screenshot.onError'</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/20">#20</a> enable testCase.endOfStep("name")</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/66">#66</a> add -b, –browser into sakuli.jar/sakuli.sh</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/64">#64</a> Added Linux (sakuli.sh) and Windows (sakuli.bat) starter.</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/55">#55</a> low-level-mouse functions, add mouseMove(), mouseUp(mouseButton), mouseDown(mouseButton)</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/60">#60</a> refactor command line options</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/62">#62</a> move log-level settings to sakuli.properties</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/60">#60</a> introduce a 'sakuli-default.properties' file to move the sakuli.properties to the test suite root</p>
</li>
<li>
<p><a href="https://github.com/ConSol/sakuli/issues/60">#60</a> introduce new file system structure</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.4.9</strong> (Bugfix Release)</div>
<ul>
<li>
<p>add <a href="https://github.com/ConSol/sakuli/issues/106">#106</a> add warn/crit thresholds as perfdata values for the Gearman results</p>
<div class="ulist">
<ul>
<li>
<p>Adaption for 3-digit case/step ids</p>
</li>
<li>
<p>PNP template with unknown perfdata support</p>
</li>
<li>
<p>added TICKer for incomplete data, warn/crit states</p>
</li>
<li>
<p>Changed color scheme</p>
</li>
</ul>
</div>
</li>
<li>
<p>add <a href="https://github.com/ConSol/sakuli/issues/77">#77</a> separate error state to identify the affected TestCaseStep on errors:</p>
<div class="ulist">
<ul>
<li>
<p>modify SakuliExceptionHandler to find current Step and enable adding exception to the current step</p>
</li>
<li>
<p>add error message output for exceptions in TestCaseSteps</p>
</li>
</ul>
</div>
</li>
<li>
<p>add <a href="https://github.com/ConSol/sakuli/issues/31">#31</a> determine all not executed TestCaseSteps, to secure that the nagios performance graphs are displayed correctly:</p>
<div class="ulist">
<ul>
<li>
<p>introduce new TestCaseStepState INIT</p>
</li>
<li>
<p>modify nagios RRD performance data output for initialized and not started steps to typ 'unknown'</p>
</li>
<li>
<p>add caching mechanism the step information for not started steps implementation</p>
</li>
<li>
<p>call write cached steps information on every 'not error' result</p>
</li>
<li>
<p>gearman forward: write unknown values to every result line if a suite, case or step entity has finished with errors or have even not been called</p>
</li>
<li>
<p>database forwarder: write NULL instead of '0' at warning and critical times</p>
</li>
</ul>
</div>
</li>
<li>
<p>add <code>takeScreenshot()</code> method to Region object to get the current region as screenshot</p>
</li>
<li>
<p>add troubleshooting for Nullpointer at <code>new Application("..").getRegion()</code> to documentation</p>
</li>
<li>
<p>fix PrioritizedServiceComparator so now 2 service with the same priority will also accepted</p>
</li>
<li>
<p>add jenkins-build badge</p>
</li>
<li>
<p>add <a href="https://github.com/ConSol/sakuli/issues/46">#46</a> add dev-v0.4 read-the-docs &amp; read-the-docs badge</p>
</li>
<li>
<p>add <a href="https://github.com/ConSol/sakuli/issues/96">#96</a> add variable '$testSuiteFolder' fore more strait forward import handling</p>
</li>
<li>
<p>fix dependency path of javafx for java7</p>
</li>
<li>
<p>close <a href="https://github.com/ConSol/sakuli/issues/92">#92</a> exclude Base64 String in log output</p>
</li>
<li>
<p>modify documentation of warning / critical times</p>
</li>
<li>
<p>add testcase.endOfStep function without warning time</p>
</li>
<li>
<p>add <a href="https://github.com/ConSol/sakuli/issues/81">#81</a> change numbering scheme for cases and steps to always three digits to expanded color array in PHP template</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.4.8</strong></div>
<ul>
<li>
<p>fix bug: test suite has stat 'OK' instead of 'RUNNING' during the execution</p>
</li>
<li>
<p>improve logging for more information, see <a href="http://consol.github.io/sakuli">Sakuli - Manual</a></p>
</li>
<li>
<p>clearify the sakuli encryption functionality - modify documentation and improve the implementation, see <a href="https://github.com/ConSol/sakuli/issues/5">#5</a></p>
</li>
<li>
<p>refactor data structure, see <a href="https://github.com/ConSol/sakuli/issues/60">#60</a></p>
</li>
<li>
<p>extract <code>sakuli.properties</code> to the test suits folder and introduce a <code>sakuli-default.properties</code> file.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.4.7</strong></div>
<ul>
<li>
<p>add function <code>getLastUrl()</code> to the <code>TestCase</code> functions, to enable URL based test case handling.</p>
</li>
<li>
<p>uncomment some receiver properties in <code>sakuli.properties</code> to make the property overriding more generic.</p>
</li>
<li>
<p>fix bug that <code>new Region("image_pattern.png").click();</code> always clicks on the center of the screen</p>
</li>
<li>
<p>introduce experimental JAVA-DSL as new module</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.4.6</strong></div>
<ul>
<li>
<p>add <code>sleep()</code> method to Region</p>
</li>
<li>
<p><code>keyUp(&#8230;&#8203;)</code>, <code>keyDown(&#8230;&#8203;)</code> and <code>write(&#8230;&#8203;)</code> method to the Region and Environment functions to have more control over the typing.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.4.5</strong></div>
<ul>
<li>
<p>add method to set an delay for the sahi-status-requests, so that no key or click events will be lost by the JavaScript engine of the Browser, see new entry in <code>sakuli.properties</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre> # Specifies the interval in milliseconds, what should be applied when sikuli based input
 # (like typing or clicking) is interacting with a Browser website.
 # This setting only make sense, if your test does NOT use Sahi functions for controlling the
 # testing website. This setting will prevent the test for losing some key or click events
 # in case of blocking, synchronous sahi-interal state requests.
 #
 #sahi.proxy.requestDelayOnSikuliInput.delayTime=500
 #
 ### refresh time for the sahi proxy to set the delay time
 #sahi.proxy.requestDelayOnSikuliInput.refreshTime</pre>
</div>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.4.1</strong></div>
<ul>
<li>
<p>update release build so that the zipped-release files can be downloaded from <a href="http://labs.consol.de/sakuli/install">http://labs.consol.de/sakuli/install</a>.</p>
</li>
<li>
<p>remove zipped-release files from git repository</p>
</li>
<li>
<p>documentation update</p>
</li>
<li>
<p>build automatic sakuli-api documentation</p>
</li>
<li>
<p>clean up repository</p>
</li>
<li>
<p>introduce some maven-profiles for individual usage</p>
</li>
<li>
<p>change <code>.inc</code> and <code>.sah</code> file ending to <code>.js</code></p>
</li>
<li>
<p>fixed some typos</p>
</li>
<li>
<p>set up jenkins build</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.4.0</strong></div>
<ul>
<li>
<p>centralized the configuration of properties files:</p>
<div class="ulist">
<ul>
<li>
<p><code><em>include/sakuli.properties</code> now contains all possible configuration options for Sakuli. These are the _default values</em> for all tests</p>
</li>
<li>
<p><code>&lt;test-suite&gt;/testsuite.properties</code> contains the <em>test suite specific configuration options</em>. The only mandatory property here is the test suite identifier <code>testsuite.id</code>. All other properties are optional.</p>
</li>
<li>
<p>Options set in <code>testsuite.properties</code> will override the default settings in <code>sakuli.properties</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Proxy configuration options can now be set in <code>sakuli.properties</code> (defaults) or <code>testsuite.properties</code> (suite specific)</p>
</li>
<li>
<p>Re-organized the folder structure of <code>sakuli-zipped-release-vX.X.X.zip</code> and source code directory.</p>
</li>
<li>
<p>Extended logging with more configuration possibilities (SLF4J with underlying logback-Logging)</p>
</li>
<li>
<p>Consolidation of the applicationContext files</p>
</li>
<li>
<p>Remove the program-based setting of system properties.</p>
</li>
<li>
<p>The possibility to disable the "encryption interface" with new property <code>sakuli.encryption.interface.testmode=true</code></p>
</li>
<li>
<p>Added a separate module for integration testing</p>
</li>
<li>
<p>Bugfixing and extended unit tests</p>
</li>
<li>
<p>documentation update</p>
</li>
<li>
<p>Added a separate module for integration testing.</p>
</li>
<li>
<p>Bugfixing and extended unit tests.</p>
</li>
<li>
<p>Update the documentation</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Version 0.4.2</strong></div>
<ul>
<li>
<p>Introducing receiver concept: For each receiver the results will be sent. Currently Supported JDBC-Databases and the Gearman
receiver.</p>
</li>
<li>
<p>Gearman receiver: sent all data directly to your OMD/Nagios distribution. Currently it is missing that the screenshots
will also be transferred. This will be fixed in the next version</p>
</li>
<li>
<p>Bugfixing in maven build, exception handling, testcase ids and added some more unit tests</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="support"><a class="anchor" href="#support"></a>7. Support</h2>
<div class="sectionbody">
<div id="git-edit-section" class="paragraph">
<p><a href="https://github.com/ConSol/sakuli/blob/dev/docs/support.adoc" target="_blank">view</a> | <a href="https://github.com/ConSol/sakuli/edit/dev/docs/support.adoc" target="_blank">edit</a></p>
</div>
<div class="paragraph">
<p>You want to use Sakuli in your project and need on-site help from our Sakuli experts? You&#8217;ve got a specific
question about Sakuli implementation, or you&#8217;re just looking for some guidelines and best practices in writing test cases or setting up your infrastructure? Please feel
free to contact us! We will be glad to help you achieve your goals and a stable software application.</p>
</div>
<div class="paragraph">
<p>The Sakuli developers are the same that deal with high complex enterprise applications and cloud-based technology at our customers every day. So if you need special extensions or new features, do not hesitate to contact us!
We would like to help you!</p>
</div>
<div class="paragraph">
<p>Also if you need Sakuli patches or fast access to special programming from the Sakuli development team contact us!</p>
</div>
<div class="sect2">
<h3 id="_training"><a class="anchor" href="#_training"></a>7.1. Training</h3>
<div class="paragraph">
<p>Sakuli grew out of multiple software development and monitoring projects at ConSol. The Sakuli team can assist you not only in testing your
enterprise applications but also in develop, operate and monitor those. If you looking for expert assistance regardless of
which part - talk to us!</p>
</div>
<div class="paragraph">
<p>More information you also find under our project homepage: <strong><a href="http://www.sakuli.org/">www.sakuli.org</a></strong></p>
</div>
</div>
<div class="sect2">
<h3 id="more"><a class="anchor" href="#more"></a>7.2. More Resources</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Project Homepage: <a href="http://www.sakuli.org/">www.sakuli.org</a></strong></p>
</li>
<li>
<p><strong>Blog Entries: <a href="https://labs.consol.de/tags/sakuli/">labs.consol.de/sakuli</a></strong></p>
</li>
<li>
<p><strong>Tutorials &amp; Examples: <a href="https://github.com/ConSol/sakuli-examples">github.com/ConSol/sakuli-examples</a></strong></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contact"><a class="anchor" href="#_contact"></a>7.3. Contact</h3>
<div class="paragraph">
<p>The Sakuli team members will listen on the following channels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>E-mail: <a href="mailto:sakuli@consol.de">sakuli@consol.de</a></strong></p>
</li>
<li>
<p><strong>GitHub issues: <a href="https://github.com/ConSol/sakuli/issues/new">github.com/ConSol/sakuli/issues/new</a></strong></p>
</li>
<li>
<p><strong>Twitter: <a href="https://twitter.com/sakuli_e2e">sakuli_e2e</a></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The company behind Sakuli:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/consol-logo.png" alt="consol logo"></span></p>
</div>
<div class="paragraph">
<p><strong>ConSol Software GmbH</strong><br>
Franziskanerstr. 38<br>
D-81669 München</p>
</div>
<div class="paragraph">
<p>Tel. +49-89-45841-100<br>
Fax +49-89-45841-111<br>
E-Mail: <a href="mailto:info@consol.de">info@consol.de</a><br>
Website: <a href="http://www.consol.de">www.consol.de</a></p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v1.2.0-SNAPSHOT<br>
Last updated 2018-06-14 12:06:56 CEST
</div>
</div>
<!--
  ~ Sakuli - Testing and Monitoring-Tool for Websites and common UIs.
  ~
  ~ Copyright 2013 - 2017 the original author or authors.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!-- Change some CSS. -->

<style>

    .consol-footer {
        font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
        color: rgba(255, 255, 255, .8);
        font-weight: bold;
        float: right;
        /*display: inline-flex;*/
        text-align: right;
    }

</style>
<div style="padding-top: 0" id="footer" class="consol-footer">
    Supported by <a href="https://www.consol.de" target="_blank"><img style="margin-left: 20px"
                                                                      src="images/consol-logo.png"></a>
</div>
</body>
</html>